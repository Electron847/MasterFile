<?xml version="1.0"?>
<!--Generated by an XSL stylesheet.  Do not edit!-->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta xmlns="" http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta xmlns="" http-equiv="Expires" content="Mon, 10 Jan 2000 12:00:00 GMT"/><style xmlns="" type="text/css">
    p.flushtop     { margin-top: 0px; }
    p.flushbottom  { margin-bottom: 0px; }
    p.flush        { margin-top: 0px;
                     margin-bottom: 0px; }
    h1             { margin-top: 0px;
                     font-weight: bold;
                     font-size: large; }
    h2             { margin-top: 0px;
                     font-weight: bold;
                     font-size: medium; }
    body           { color: black;
                     background-color: white; }
    img.noborder   { border-width: 0px; }
    table.title    { border-style: solid; 
                     border-width: 1px; 
                     border-color: #888888; 
                     color: black;
                     background-color: #E4E4C2; }
    table.item     { border-style: solid; 
                     border-width: 1px; 
                     border-color: #888888; 
                     color: black;
                     background-color: #F4F4E0; }
    table.notes    { border-width: 0px; 
                     color: black;
                     background-color: #E0F4E0; }
    table.comment  { border-width: 0px; 
                     color: black;
                     background-color: #E0F4E0; }
    table.code     { border-style: solid; 
                     border-width: 1px; 
                     border-color: #888888; 
                     color: black;
                     background-color: #E0F4E0; }
    table.contents { border-width: 0px; 
                     color: black;
                     background-color: #FFFFFF; }
    span.red       { color: red; }
    span.orange    { color: orange; }
    span.purple    { color: purple; }
    span.blue      { color: blue; }
    span.brown     { color: brown; }
    span.green     { color: lime; }
    span.hilight   { background-color: #E4E4C2; }
  </style><title>SE450:  Lecture 7 
      [2008/10/22]
    </title></head><body><h1><a href="../index.html">SE450</a>:  Lecture 7 
      (Project and Observers)
    </h1><table xmlns="" width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide000">Contents</a></span><span style="font-weight: normal"><a href="class-07-000.html"> [0/25] </a></span></td></tr></table><p xmlns=""> </p><table xmlns="" width="100%" cellpadding="0" cellspacing="0" class="contents"><tr><td><a href="#slide001">Observer: Cyclic Dependencies</a> [1/25] </td></tr><tr><td><a href="#slide002">Observer: 1</a> [2/25] </td></tr><tr><td><a href="#slide003">Observer: 2</a> [3/25] </td></tr><tr><td><a href="#slide004">Observer: 3</a> [4/25] </td></tr><tr><td><a href="#slide005">Observer: 4</a> [5/25] </td></tr><tr><td><a href="#slide006">Observer: 5</a> [6/25] </td></tr><tr><td><a href="#slide007">Observer: 6</a> [7/25] </td></tr><tr><td><a href="#slide008">Observer: 7</a> [8/25] </td></tr><tr><td><a href="#slide009">Observer: 8</a> [9/25] </td></tr><tr><td><a href="#slide010">Observer: UI Driven</a> [10/25] </td></tr><tr><td><a href="#slide011">Simulation: Active and Passive Objects</a> [11/25] </td></tr><tr><td><a href="#slide012">Simulation: Example 1</a> [12/25] </td></tr><tr><td><a href="#slide013">Simulation: Example 2</a> [13/25] </td></tr><tr><td><a href="#slide014">Simulation: Example 3</a> [14/25] </td></tr><tr><td><a href="#slide015">Simulation: Example 4</a> [15/25] </td></tr><tr><td><a href="#slide016">Simulation: TimeServer Implementation</a> [16/25] </td></tr><tr><td><a href="#slide017">Simulation: Random numbers</a> [17/25] </td></tr><tr><td><a href="#slide018">Project: Car Movement</a> [18/25] </td></tr><tr><td><a href="#slide019">Project: Lights</a> [19/25] </td></tr><tr><td><a href="#slide020">Project: Creating the road graph</a> [20/25] </td></tr><tr><td><a href="#slide021">Animation: Overview</a> [21/25] </td></tr><tr><td><a href="#slide022">Animation: Model</a> [22/25] </td></tr><tr><td><a href="#slide023">Animation: Text output</a> [23/25] </td></tr><tr><td><a href="#slide024">Animation: Swing output</a> [24/25] </td></tr><tr><td><a href="#slide025">Animation: Notes</a> [25/25] </td></tr></table><br xmlns=""/><table xmlns="" width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide001">Observer: Cyclic Dependencies</a></span><span style="font-weight: normal"><a href="class-07-001.html"> [1/25] </a></span></td></tr></table><p xmlns=""> </p>
        <p xmlns="">
          Example of a GUI element (a slider) which controls a program
          variable <code>x</code>.
        </p>
        <p xmlns="">
          Program creates <code>Slider</code>.
        </p>
        <p xmlns="">
          <code>Slider</code> controls program.
        </p>
        <p xmlns="">
          Observer reverse the dependency of Slider on program.
        </p>
        <p xmlns="">
          Program can use slider code, but slider decides when to call
          (back) to the client!
        </p>
        <p xmlns="">
          <a href="http://java.sun.com/javase/6/docs/api/javax/swing/JSlider.html">javax.swing.JSlider</a>
        <br/>
          <a href="http://java.sun.com/javase/6/docs/api/javax/swing/event/ChangeListener.html">javax.swing.event.ChangeListener</a>
        </p>
        <p xmlns="">
          <a href="http://java.sun.com/javase/6/docs/api/java/awt/Button.html">java.awt.Button</a>
        <br/>
          <a href="http://java.sun.com/javase/6/docs/api/java/awt/event/ActionListener.html">java.awt.event.ActionListener</a>
        </p>
      <p xmlns=""> </p><table xmlns="" width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide002">Observer: 1</a></span><span style="font-weight: normal"><a href="class-07-002.html"> [2/25] </a></span></td></tr></table><p xmlns=""> </p>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a href="../code/html/observer/one/Main_java.html">file:Main.java</a> [<a href="../code/src/observer/one/Main.java">source</a>] [<a href="../code/doc-publicobserver/one/Main.html">doc-public</a>] [<a href="../code/doc-privateobserver/one/Main.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> observer<span style="color: #990000">.</span>one<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">Main</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00003:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">main</span></span><span style="color: #990000">(</span>String<span style="color: #990000">[]</span> argv<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00004:</span>     Int c <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Int</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00005:</span>     Runnable r1 <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">M</span></span><span style="color: #990000">(</span>c<span style="color: #990000">);</span>
<span style="color: #000000">00006:</span>     Runnable r2 <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">N</span></span><span style="color: #990000">(</span>c<span style="color: #990000">);</span>
<span style="color: #000000">00007:</span>     <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span><span style="color: #009900">int</span> i<span style="color: #990000">=</span><span style="color: #993399">0</span><span style="color: #990000">;</span> i<span style="color: #990000">&lt;</span><span style="color: #993399">10000</span><span style="color: #990000">;</span> i<span style="color: #990000">++)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00008:</span>       r1<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00009:</span>       r2<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00010:</span>     <span style="color: #FF0000">}</span>
<span style="color: #000000">00011:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00012:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00013:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">Int</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00014:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">int</span> _v<span style="color: #990000">;</span>
<span style="color: #000000">00015:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">inc</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> _v<span style="color: #990000">++;</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00016:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">dec</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> _v<span style="color: #990000">--;</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00017:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00018:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">M</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Runnable <span style="color: #FF0000">{</span>
<span style="color: #000000">00019:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> Int _c<span style="color: #990000">;</span>
<span style="color: #000000">00020:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">M</span></span><span style="color: #990000">(</span>Int c<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> _c <span style="color: #990000">=</span> c<span style="color: #990000">;</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00021:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00022:</span>     _c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">inc</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00023:</span>     _c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">inc</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00024:</span>     _c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">dec</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00025:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00026:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00027:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">N</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Runnable <span style="color: #FF0000">{</span>
<span style="color: #000000">00028:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> Int _c<span style="color: #990000">;</span>
<span style="color: #000000">00029:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">N</span></span><span style="color: #990000">(</span>Int c<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> _c <span style="color: #990000">=</span> c<span style="color: #990000">;</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00030:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00031:</span>     <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span><span style="color: #009900">int</span> i<span style="color: #990000">=</span><span style="color: #993399">0</span><span style="color: #990000">;</span> i<span style="color: #990000">&lt;</span><span style="color: #993399">50</span><span style="color: #990000">;</span> i<span style="color: #990000">++)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00032:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>i<span style="color: #990000">%</span><span style="color: #993399">3</span><span style="color: #990000">==</span><span style="color: #993399">0</span><span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00033:</span>         _c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">dec</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00034:</span>       <span style="color: #FF0000">}</span> <span style="font-weight: bold"><span style="color: #0000FF">else</span></span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00035:</span>         _c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">inc</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00036:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00037:</span>     <span style="color: #FF0000">}</span>
<span style="color: #000000">00038:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00039:</span> <span style="color: #FF0000">}</span>
</tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns="">
          What if we have to print the number of operations performed
          on the <tt>Int</tt>?
        </p>
      <p xmlns=""> </p><table xmlns="" width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide003">Observer: 2</a></span><span style="font-weight: normal"><a href="class-07-003.html"> [3/25] </a></span></td></tr></table><p xmlns=""> </p>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a href="../code/html/observer/two/Main_java.html">file:Main.java</a> [<a href="../code/src/observer/two/Main.java">source</a>] [<a href="../code/doc-publicobserver/two/Main.html">doc-public</a>] [<a href="../code/doc-privateobserver/two/Main.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> observer<span style="color: #990000">.</span>two<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">Main</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00003:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">main</span></span><span style="color: #990000">(</span>String<span style="color: #990000">[]</span> argv<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00004:</span>     Int c <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Int</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00005:</span>     Runnable r1 <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">M</span></span><span style="color: #990000">(</span>c<span style="color: #990000">);</span>
<span style="color: #000000">00006:</span>     Runnable r2 <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">N</span></span><span style="color: #990000">(</span>c<span style="color: #990000">);</span>
<span style="color: #000000">00007:</span>     <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span><span style="color: #009900">int</span> i<span style="color: #990000">=</span><span style="color: #993399">0</span><span style="color: #990000">;</span> i<span style="color: #990000">&lt;</span><span style="color: #993399">10000</span><span style="color: #990000">;</span> i<span style="color: #990000">++)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00008:</span>       r1<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00009:</span>       r2<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00010:</span>     <span style="color: #FF0000">}</span>
<span style="color: #000000">00011:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00012:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00013:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">Int</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00014:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">int</span> _v<span style="color: #990000">;</span>
<span style="color: #000000">00015:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">inc</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> _v<span style="color: #990000">++;</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00016:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">dec</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> _v<span style="color: #990000">--;</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00017:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00018:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">M</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Runnable <span style="color: #FF0000">{</span>
<span style="color: #000000">00019:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">int</span> _numOps<span style="color: #990000">;</span>
<span style="color: #000000">00020:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> Int _c<span style="color: #990000">;</span>
<span style="color: #000000">00021:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">M</span></span><span style="color: #990000">(</span>Int c<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> _c <span style="color: #990000">=</span> c<span style="color: #990000">;</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00022:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00023:</span>     _c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">inc</span></span><span style="color: #990000">();</span> System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println </span></span><span style="color: #990000">(++</span>_numOps<span style="color: #990000">);</span>
<span style="color: #000000">00024:</span>     _c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">inc</span></span><span style="color: #990000">();</span> System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println </span></span><span style="color: #990000">(++</span>_numOps<span style="color: #990000">);</span>
<span style="color: #000000">00025:</span>     _c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">dec</span></span><span style="color: #990000">();</span> System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println </span></span><span style="color: #990000">(++</span>_numOps<span style="color: #990000">);</span>
<span style="color: #000000">00026:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00027:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00028:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">N</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Runnable <span style="color: #FF0000">{</span>
<span style="color: #000000">00029:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> Int _c<span style="color: #990000">;</span>
<span style="color: #000000">00030:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">N</span></span><span style="color: #990000">(</span>Int c<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> _c <span style="color: #990000">=</span> c<span style="color: #990000">;</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00031:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00032:</span>     <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span><span style="color: #009900">int</span> i<span style="color: #990000">=</span><span style="color: #993399">0</span><span style="color: #990000">;</span> i<span style="color: #990000">&lt;</span><span style="color: #993399">50</span><span style="color: #990000">;</span> i<span style="color: #990000">++)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00033:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>i<span style="color: #990000">%</span><span style="color: #993399">3</span><span style="color: #990000">==</span><span style="color: #993399">0</span><span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00034:</span>         _c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">dec</span></span><span style="color: #990000">();</span> <span style="font-style: italic"><span style="color: #9A1900">/*??*/</span></span>
<span style="color: #000000">00035:</span>       <span style="color: #FF0000">}</span> <span style="font-weight: bold"><span style="color: #0000FF">else</span></span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00036:</span>         _c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">inc</span></span><span style="color: #990000">();</span> <span style="font-style: italic"><span style="color: #9A1900">/*??*/</span></span>
<span style="color: #000000">00037:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00038:</span>     <span style="color: #FF0000">}</span>
<span style="color: #000000">00039:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00040:</span> <span style="color: #FF0000">}</span>
</tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns="">
          Who remembers the <tt>numOps</tt>?
        </p>
      <p xmlns=""> </p><table xmlns="" width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide004">Observer: 3</a></span><span style="font-weight: normal"><a href="class-07-004.html"> [4/25] </a></span></td></tr></table><p xmlns=""> </p>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a href="../code/html/observer/three/Main_java.html">file:Main.java</a> [<a href="../code/src/observer/three/Main.java">source</a>] [<a href="../code/doc-publicobserver/three/Main.html">doc-public</a>] [<a href="../code/doc-privateobserver/three/Main.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> observer<span style="color: #990000">.</span>three<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">Main</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00003:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">main</span></span><span style="color: #990000">(</span>String<span style="color: #990000">[]</span> argv<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00004:</span>     Int c <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Int</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00005:</span>     Runnable r1 <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">M</span></span><span style="color: #990000">(</span>c<span style="color: #990000">);</span>
<span style="color: #000000">00006:</span>     Runnable r2 <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">N</span></span><span style="color: #990000">(</span>c<span style="color: #990000">);</span>
<span style="color: #000000">00007:</span>     <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span><span style="color: #009900">int</span> i<span style="color: #990000">=</span><span style="color: #993399">0</span><span style="color: #990000">;</span> i<span style="color: #990000">&lt;</span><span style="color: #993399">10000</span><span style="color: #990000">;</span> i<span style="color: #990000">++)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00008:</span>       r1<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00009:</span>       r2<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00010:</span>     <span style="color: #FF0000">}</span>
<span style="color: #000000">00011:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00012:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00013:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">Int</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00014:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">int</span> _v<span style="color: #990000">;</span>
<span style="color: #000000">00015:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">int</span> _numOps<span style="color: #990000">;</span>
<span style="color: #000000">00016:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">inc</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> _v<span style="color: #990000">++;</span> System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println </span></span><span style="color: #990000">(++</span>_numOps<span style="color: #990000">);</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00017:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">dec</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> _v<span style="color: #990000">--;</span> System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println </span></span><span style="color: #990000">(++</span>_numOps<span style="color: #990000">);</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00018:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00019:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">M</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Runnable <span style="color: #FF0000">{</span>
<span style="color: #000000">00020:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> Int _c<span style="color: #990000">;</span>
<span style="color: #000000">00021:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">M</span></span><span style="color: #990000">(</span>Int c<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> _c <span style="color: #990000">=</span> c<span style="color: #990000">;</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00022:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00023:</span>     _c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">inc</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00024:</span>     _c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">inc</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00025:</span>     _c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">dec</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00026:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00027:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00028:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">N</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Runnable <span style="color: #FF0000">{</span>
<span style="color: #000000">00029:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> Int _c<span style="color: #990000">;</span>
<span style="color: #000000">00030:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">N</span></span><span style="color: #990000">(</span>Int c<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> _c <span style="color: #990000">=</span> c<span style="color: #990000">;</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00031:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00032:</span>     <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span><span style="color: #009900">int</span> i<span style="color: #990000">=</span><span style="color: #993399">0</span><span style="color: #990000">;</span> i<span style="color: #990000">&lt;</span><span style="color: #993399">50</span><span style="color: #990000">;</span> i<span style="color: #990000">++)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00033:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>i<span style="color: #990000">%</span><span style="color: #993399">3</span><span style="color: #990000">==</span><span style="color: #993399">0</span><span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00034:</span>         _c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">dec</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00035:</span>       <span style="color: #FF0000">}</span> <span style="font-weight: bold"><span style="color: #0000FF">else</span></span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00036:</span>         _c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">inc</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00037:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00038:</span>     <span style="color: #FF0000">}</span>
<span style="color: #000000">00039:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00040:</span> <span style="color: #FF0000">}</span>
</tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns="">
          Is this <tt>Int</tt> cohesive?
        </p>
        <p xmlns="">
          Let's use an observer!
        </p>
      <p xmlns=""> </p><table xmlns="" width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide005">Observer: 4</a></span><span style="font-weight: normal"><a href="class-07-005.html"> [5/25] </a></span></td></tr></table><p xmlns=""> </p>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a href="../code/html/observer/four/Main_java.html">file:Main.java</a> [<a href="../code/src/observer/four/Main.java">source</a>] [<a href="../code/doc-publicobserver/four/Main.html">doc-public</a>] [<a href="../code/doc-privateobserver/four/Main.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> observer<span style="color: #990000">.</span>four<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">Main</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00003:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">main</span></span><span style="color: #990000">(</span>String<span style="color: #990000">[]</span> argv<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00004:</span>     Int c <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Int</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00005:</span>     IntObserver o <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">IntObserver</span></span><span style="color: #990000">(</span>c<span style="color: #990000">);</span>
<span style="color: #000000">00006:</span>     Runnable r1 <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">M</span></span><span style="color: #990000">(</span>c<span style="color: #990000">);</span>
<span style="color: #000000">00007:</span>     Runnable r2 <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">N</span></span><span style="color: #990000">(</span>c<span style="color: #990000">);</span>
<span style="color: #000000">00008:</span>     <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span><span style="color: #009900">int</span> i<span style="color: #990000">=</span><span style="color: #993399">0</span><span style="color: #990000">;</span> i<span style="color: #990000">&lt;</span><span style="color: #993399">10000</span><span style="color: #990000">;</span> i<span style="color: #990000">++)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00009:</span>       r1<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00010:</span>       r2<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00011:</span>     <span style="color: #FF0000">}</span>
<span style="color: #000000">00012:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00013:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00014:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">IntObserver</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00015:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">int</span> _numOps<span style="color: #990000">;</span>
<span style="color: #000000">00016:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">IntObserver </span></span><span style="color: #990000">(</span>Int c<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> <span style="font-style: italic"><span style="color: #9A1900">/* ?? */</span></span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00017:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">update</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00018:</span>     System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println </span></span><span style="color: #990000">(++</span>_numOps<span style="color: #990000">);</span>
<span style="color: #000000">00019:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00020:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00021:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">Int</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00022:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">int</span> _v<span style="color: #990000">;</span>
<span style="color: #000000">00023:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">inc</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> _v<span style="color: #990000">++;</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00024:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">dec</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> _v<span style="color: #990000">--;</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00025:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00026:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">M</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Runnable <span style="color: #FF0000">{</span>
<span style="color: #000000">00027:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> Int _c<span style="color: #990000">;</span>
<span style="color: #000000">00028:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">M</span></span><span style="color: #990000">(</span>Int c<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> _c <span style="color: #990000">=</span> c<span style="color: #990000">;</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00029:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00030:</span>     _c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">inc</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00031:</span>     _c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">inc</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00032:</span>     _c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">dec</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00033:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00034:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00035:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">N</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Runnable <span style="color: #FF0000">{</span>
<span style="color: #000000">00036:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> Int _c<span style="color: #990000">;</span>
<span style="color: #000000">00037:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">N</span></span><span style="color: #990000">(</span>Int c<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> _c <span style="color: #990000">=</span> c<span style="color: #990000">;</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00038:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00039:</span>     <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span><span style="color: #009900">int</span> i<span style="color: #990000">=</span><span style="color: #993399">0</span><span style="color: #990000">;</span> i<span style="color: #990000">&lt;</span><span style="color: #993399">50</span><span style="color: #990000">;</span> i<span style="color: #990000">++)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00040:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>i<span style="color: #990000">%</span><span style="color: #993399">3</span><span style="color: #990000">==</span><span style="color: #993399">0</span><span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00041:</span>         _c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">dec</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00042:</span>       <span style="color: #FF0000">}</span> <span style="font-weight: bold"><span style="color: #0000FF">else</span></span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00043:</span>         _c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">inc</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00044:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00045:</span>     <span style="color: #FF0000">}</span>
<span style="color: #000000">00046:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00047:</span> <span style="color: #FF0000">}</span>
</tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns="">
          How do we tell the observer what to observe?
        </p>
      <p xmlns=""> </p><table xmlns="" width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide006">Observer: 5</a></span><span style="font-weight: normal"><a href="class-07-006.html"> [6/25] </a></span></td></tr></table><p xmlns=""> </p>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a href="../code/html/observer/five/Main_java.html">file:Main.java</a> [<a href="../code/src/observer/five/Main.java">source</a>] [<a href="../code/doc-publicobserver/five/Main.html">doc-public</a>] [<a href="../code/doc-privateobserver/five/Main.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> observer<span style="color: #990000">.</span>five<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">Main</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00003:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">main</span></span><span style="color: #990000">(</span>String<span style="color: #990000">[]</span> argv<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00004:</span>     IntObserver o <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">IntObserver</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00005:</span>     Int c <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Int</span></span><span style="color: #990000">(</span>o<span style="color: #990000">);</span>
<span style="color: #000000">00006:</span>     Runnable r1 <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">M</span></span><span style="color: #990000">(</span>c<span style="color: #990000">);</span>
<span style="color: #000000">00007:</span>     Runnable r2 <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">N</span></span><span style="color: #990000">(</span>c<span style="color: #990000">);</span>
<span style="color: #000000">00008:</span>     <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span><span style="color: #009900">int</span> i<span style="color: #990000">=</span><span style="color: #993399">0</span><span style="color: #990000">;</span> i<span style="color: #990000">&lt;</span><span style="color: #993399">10000</span><span style="color: #990000">;</span> i<span style="color: #990000">++)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00009:</span>       r1<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00010:</span>       r2<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00011:</span>     <span style="color: #FF0000">}</span>
<span style="color: #000000">00012:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00013:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00014:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">IntObserver</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00015:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">int</span> _numOps<span style="color: #990000">;</span>
<span style="color: #000000">00016:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">update</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00017:</span>     System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println </span></span><span style="color: #990000">(++</span>_numOps<span style="color: #990000">);</span>
<span style="color: #000000">00018:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00019:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00020:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">Int</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00021:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> IntObserver _o<span style="color: #990000">;</span>
<span style="color: #000000">00022:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">Int</span></span><span style="color: #990000">(</span>IntObserver o<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> _o <span style="color: #990000">=</span> o<span style="color: #990000">;</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00023:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">int</span> _v<span style="color: #990000">;</span>
<span style="color: #000000">00024:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">inc</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> _v<span style="color: #990000">++;</span> _o<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">update</span></span><span style="color: #990000">();</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00025:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">dec</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> _v<span style="color: #990000">--;</span> _o<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">update</span></span><span style="color: #990000">();</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00026:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00027:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">M</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Runnable <span style="color: #FF0000">{</span>
<span style="color: #000000">00028:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> Int _c<span style="color: #990000">;</span>
<span style="color: #000000">00029:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">M</span></span><span style="color: #990000">(</span>Int c<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> _c <span style="color: #990000">=</span> c<span style="color: #990000">;</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00030:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00031:</span>     _c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">inc</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00032:</span>     _c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">inc</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00033:</span>     _c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">dec</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00034:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00035:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00036:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">N</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Runnable <span style="color: #FF0000">{</span>
<span style="color: #000000">00037:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> Int _c<span style="color: #990000">;</span>
<span style="color: #000000">00038:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">N</span></span><span style="color: #990000">(</span>Int c<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> _c <span style="color: #990000">=</span> c<span style="color: #990000">;</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00039:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00040:</span>     <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span><span style="color: #009900">int</span> i<span style="color: #990000">=</span><span style="color: #993399">0</span><span style="color: #990000">;</span> i<span style="color: #990000">&lt;</span><span style="color: #993399">50</span><span style="color: #990000">;</span> i<span style="color: #990000">++)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00041:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>i<span style="color: #990000">%</span><span style="color: #993399">3</span><span style="color: #990000">==</span><span style="color: #993399">0</span><span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00042:</span>         _c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">dec</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00043:</span>       <span style="color: #FF0000">}</span> <span style="font-weight: bold"><span style="color: #0000FF">else</span></span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00044:</span>         _c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">inc</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00045:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00046:</span>     <span style="color: #FF0000">}</span>
<span style="color: #000000">00047:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00048:</span> <span style="color: #FF0000">}</span>
</tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns="">
          Observers are lazy!
          Subscriber is a better name.
        </p>
        <p xmlns="">
          Does <tt>Int</tt> need to know the actual class of the subscriber?
        </p>
        <p xmlns="">
          Could there be more than one subscriber?
        </p>
      <p xmlns=""> </p><table xmlns="" width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide007">Observer: 6</a></span><span style="font-weight: normal"><a href="class-07-007.html"> [7/25] </a></span></td></tr></table><p xmlns=""> </p>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a href="../code/html/observer/six/Main_java.html">file:Main.java</a> [<a href="../code/src/observer/six/Main.java">source</a>] [<a href="../code/doc-publicobserver/six/Main.html">doc-public</a>] [<a href="../code/doc-privateobserver/six/Main.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> observer<span style="color: #990000">.</span>six<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>util<span style="color: #990000">.</span>List<span style="color: #990000">;</span>
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>util<span style="color: #990000">.</span>ArrayList<span style="color: #990000">;</span>
<span style="color: #000000">00004:</span> 
<span style="color: #000000">00005:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">Main</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00006:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">main</span></span><span style="color: #990000">(</span>String<span style="color: #990000">[]</span> argv<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00007:</span>     Int c <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Int</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00008:</span>     c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">addObserver</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">IntObserver</span></span><span style="color: #990000">());</span>
<span style="color: #000000">00009:</span>     Runnable r1 <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">M</span></span><span style="color: #990000">(</span>c<span style="color: #990000">);</span>
<span style="color: #000000">00010:</span>     Runnable r2 <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">N</span></span><span style="color: #990000">(</span>c<span style="color: #990000">);</span>
<span style="color: #000000">00011:</span>     <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span><span style="color: #009900">int</span> i<span style="color: #990000">=</span><span style="color: #993399">0</span><span style="color: #990000">;</span> i<span style="color: #990000">&lt;</span><span style="color: #993399">10000</span><span style="color: #990000">;</span> i<span style="color: #990000">++)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00012:</span>       r1<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00013:</span>       r2<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00014:</span>     <span style="color: #FF0000">}</span>
<span style="color: #000000">00015:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00016:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00017:</span> 
<span style="color: #000000">00018:</span> <span style="font-weight: bold"><span style="color: #0000FF">interface</span></span> <span style="color: #009900">Observer</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00019:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">update</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00020:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00021:</span> 
<span style="color: #000000">00022:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">IntObserver</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Observer <span style="color: #FF0000">{</span>
<span style="color: #000000">00023:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">int</span> _numOps<span style="color: #990000">;</span>
<span style="color: #000000">00024:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">update</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00025:</span>     System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println </span></span><span style="color: #990000">(++</span>_numOps<span style="color: #990000">);</span>
<span style="color: #000000">00026:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00027:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00028:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">Int</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00029:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> List<span style="color: #990000">&lt;</span>Observer<span style="color: #990000">&gt;</span> _observers <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> ArrayList<span style="color: #990000">&lt;</span>Observer<span style="color: #990000">&gt;();</span>
<span style="color: #000000">00030:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">boolean</span> _changed <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">false</span></span><span style="color: #990000">;</span>
<span style="color: #000000">00031:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">addObserver</span></span><span style="color: #990000">(</span>Observer o<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00032:</span>     _observers<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">add</span></span><span style="color: #990000">(</span>o<span style="color: #990000">);</span>
<span style="color: #000000">00033:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00034:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">setChanged</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00035:</span>     _changed <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">true</span></span><span style="color: #990000">;</span>
<span style="color: #000000">00036:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00037:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">notifyObservers</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00038:</span>     <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>_changed<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00039:</span>       <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span>Observer o <span style="color: #990000">:</span> _observers<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00040:</span>         o<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">update</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00041:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00042:</span>       _changed <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">false</span></span><span style="color: #990000">;</span>
<span style="color: #000000">00043:</span>     <span style="color: #FF0000">}</span>
<span style="color: #000000">00044:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00045:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">int</span> _v<span style="color: #990000">;</span>
<span style="color: #000000">00046:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">inc</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> _v<span style="color: #990000">++;</span> <span style="font-weight: bold"><span style="color: #000000">setChanged</span></span><span style="color: #990000">();</span> <span style="font-weight: bold"><span style="color: #000000">notifyObservers</span></span><span style="color: #990000">();</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00047:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">dec</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> _v<span style="color: #990000">--;</span> <span style="font-weight: bold"><span style="color: #000000">setChanged</span></span><span style="color: #990000">();</span> <span style="font-weight: bold"><span style="color: #000000">notifyObservers</span></span><span style="color: #990000">();</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00048:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00049:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">M</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Runnable <span style="color: #FF0000">{</span>
<span style="color: #000000">00050:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> Int _c<span style="color: #990000">;</span>
<span style="color: #000000">00051:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">M</span></span><span style="color: #990000">(</span>Int c<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> _c <span style="color: #990000">=</span> c<span style="color: #990000">;</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00052:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00053:</span>     _c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">inc</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00054:</span>     _c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">inc</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00055:</span>     _c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">dec</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00056:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00057:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00058:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">N</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Runnable <span style="color: #FF0000">{</span>
<span style="color: #000000">00059:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> Int _c<span style="color: #990000">;</span>
<span style="color: #000000">00060:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">N</span></span><span style="color: #990000">(</span>Int c<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> _c <span style="color: #990000">=</span> c<span style="color: #990000">;</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00061:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00062:</span>     <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span><span style="color: #009900">int</span> i<span style="color: #990000">=</span><span style="color: #993399">0</span><span style="color: #990000">;</span> i<span style="color: #990000">&lt;</span><span style="color: #993399">50</span><span style="color: #990000">;</span> i<span style="color: #990000">++)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00063:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>i<span style="color: #990000">%</span><span style="color: #993399">3</span><span style="color: #990000">==</span><span style="color: #993399">0</span><span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00064:</span>         _c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">dec</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00065:</span>       <span style="color: #FF0000">}</span> <span style="font-weight: bold"><span style="color: #0000FF">else</span></span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00066:</span>         _c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">inc</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00067:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00068:</span>     <span style="color: #FF0000">}</span>
<span style="color: #000000">00069:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00070:</span> <span style="color: #FF0000">}</span>
</tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
      <p xmlns=""> </p><table xmlns="" width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide008">Observer: 7</a></span><span style="font-weight: normal"><a href="class-07-008.html"> [8/25] </a></span></td></tr></table><p xmlns=""> </p>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a href="../code/html/observer/seven/Main_java.html">file:Main.java</a> [<a href="../code/src/observer/seven/Main.java">source</a>] [<a href="../code/doc-publicobserver/seven/Main.html">doc-public</a>] [<a href="../code/doc-privateobserver/seven/Main.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> observer<span style="color: #990000">.</span>seven<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>util<span style="color: #990000">.</span>Observer<span style="color: #990000">;</span>
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>util<span style="color: #990000">.</span>Observable<span style="color: #990000">;</span>
<span style="color: #000000">00004:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">Main</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00005:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">main</span></span><span style="color: #990000">(</span>String<span style="color: #990000">[]</span> argv<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00006:</span>     Int c <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Int</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00007:</span>     c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">addObserver</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">IntObserver</span></span><span style="color: #990000">());</span>
<span style="color: #000000">00008:</span>     Runnable r1 <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">M</span></span><span style="color: #990000">(</span>c<span style="color: #990000">);</span>
<span style="color: #000000">00009:</span>     Runnable r2 <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">N</span></span><span style="color: #990000">(</span>c<span style="color: #990000">);</span>
<span style="color: #000000">00010:</span>     <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span><span style="color: #009900">int</span> i<span style="color: #990000">=</span><span style="color: #993399">0</span><span style="color: #990000">;</span> i<span style="color: #990000">&lt;</span><span style="color: #993399">10000</span><span style="color: #990000">;</span> i<span style="color: #990000">++)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00011:</span>       r1<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00012:</span>       r2<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00013:</span>     <span style="color: #FF0000">}</span>
<span style="color: #000000">00014:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00015:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00016:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">IntObserver</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Observer <span style="color: #FF0000">{</span>
<span style="color: #000000">00017:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">int</span> _numOps<span style="color: #990000">;</span>
<span style="color: #000000">00018:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">update</span></span><span style="color: #990000">(</span>Observable o<span style="color: #990000">,</span> Object arg<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00019:</span>     System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println </span></span><span style="color: #990000">(++</span>_numOps<span style="color: #990000">);</span>
<span style="color: #000000">00020:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00021:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00022:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">Int</span> <span style="font-weight: bold"><span style="color: #0000FF">extends</span></span> Observable <span style="color: #FF0000">{</span>
<span style="color: #000000">00023:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">int</span> _v<span style="color: #990000">;</span>
<span style="color: #000000">00024:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">inc</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> _v<span style="color: #990000">++;</span> <span style="font-weight: bold"><span style="color: #000000">setChanged</span></span><span style="color: #990000">();</span> <span style="font-weight: bold"><span style="color: #000000">notifyObservers</span></span><span style="color: #990000">();</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00025:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">dec</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> _v<span style="color: #990000">--;</span> <span style="font-weight: bold"><span style="color: #000000">setChanged</span></span><span style="color: #990000">();</span> <span style="font-weight: bold"><span style="color: #000000">notifyObservers</span></span><span style="color: #990000">();</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00026:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00027:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">M</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Runnable <span style="color: #FF0000">{</span>
<span style="color: #000000">00028:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> Int _c<span style="color: #990000">;</span>
<span style="color: #000000">00029:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">M</span></span><span style="color: #990000">(</span>Int c<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> _c <span style="color: #990000">=</span> c<span style="color: #990000">;</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00030:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00031:</span>     _c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">inc</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00032:</span>     _c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">inc</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00033:</span>     _c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">dec</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00034:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00035:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00036:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">N</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Runnable <span style="color: #FF0000">{</span>
<span style="color: #000000">00037:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> Int _c<span style="color: #990000">;</span>
<span style="color: #000000">00038:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">N</span></span><span style="color: #990000">(</span>Int c<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> _c <span style="color: #990000">=</span> c<span style="color: #990000">;</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00039:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00040:</span>     <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span><span style="color: #009900">int</span> i<span style="color: #990000">=</span><span style="color: #993399">0</span><span style="color: #990000">;</span> i<span style="color: #990000">&lt;</span><span style="color: #993399">50</span><span style="color: #990000">;</span> i<span style="color: #990000">++)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00041:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>i<span style="color: #990000">%</span><span style="color: #993399">3</span><span style="color: #990000">==</span><span style="color: #993399">0</span><span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00042:</span>         _c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">dec</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00043:</span>       <span style="color: #FF0000">}</span> <span style="font-weight: bold"><span style="color: #0000FF">else</span></span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00044:</span>         _c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">inc</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00045:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00046:</span>     <span style="color: #FF0000">}</span>
<span style="color: #000000">00047:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00048:</span> <span style="color: #FF0000">}</span>
</tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns="">
          <a href="http://java.sun.com/javase/6/docs/api/java/util/Observable.html">java.util.Observable</a>
          <br/>
          <a href="http://java.sun.com/javase/6/docs/api/java/util/Observer.html">java.util.Observer</a>
        </p>
        <p xmlns="">
          Is it worth giving <tt>IntObserver</tt> a name?
        </p>
      <p xmlns=""> </p><table xmlns="" width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide009">Observer: 8</a></span><span style="font-weight: normal"><a href="class-07-009.html"> [9/25] </a></span></td></tr></table><p xmlns=""> </p>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a href="../code/html/observer/eight/Main_java.html">file:Main.java</a> [<a href="../code/src/observer/eight/Main.java">source</a>] [<a href="../code/doc-publicobserver/eight/Main.html">doc-public</a>] [<a href="../code/doc-privateobserver/eight/Main.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> observer<span style="color: #990000">.</span>eight<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>util<span style="color: #990000">.</span>Observer<span style="color: #990000">;</span>
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>util<span style="color: #990000">.</span>Observable<span style="color: #990000">;</span>
<span style="color: #000000">00004:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">Main</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00005:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">main</span></span><span style="color: #990000">(</span>String<span style="color: #990000">[]</span> argv<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00006:</span>     Int c <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Int</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00007:</span>     c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">addObserver</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Observer</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00008:</span>         <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">int</span> _numOps<span style="color: #990000">;</span>
<span style="color: #000000">00009:</span>         <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">update</span></span><span style="color: #990000">(</span>Observable o<span style="color: #990000">,</span> Object arg<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00010:</span>           System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println </span></span><span style="color: #990000">(++</span>_numOps<span style="color: #990000">);</span>
<span style="color: #000000">00011:</span>         <span style="color: #FF0000">}</span>
<span style="color: #000000">00012:</span>       <span style="color: #FF0000">}</span><span style="color: #990000">);</span>
<span style="color: #000000">00013:</span>     Runnable r1 <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">M</span></span><span style="color: #990000">(</span>c<span style="color: #990000">);</span>
<span style="color: #000000">00014:</span>     Runnable r2 <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">N</span></span><span style="color: #990000">(</span>c<span style="color: #990000">);</span>
<span style="color: #000000">00015:</span>     <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span><span style="color: #009900">int</span> i<span style="color: #990000">=</span><span style="color: #993399">0</span><span style="color: #990000">;</span> i<span style="color: #990000">&lt;</span><span style="color: #993399">10000</span><span style="color: #990000">;</span> i<span style="color: #990000">++)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00016:</span>       r1<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00017:</span>       r2<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00018:</span>     <span style="color: #FF0000">}</span>
<span style="color: #000000">00019:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00020:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00021:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">Int</span> <span style="font-weight: bold"><span style="color: #0000FF">extends</span></span> Observable <span style="color: #FF0000">{</span>
<span style="color: #000000">00022:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">int</span> _v<span style="color: #990000">;</span>
<span style="color: #000000">00023:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">inc</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> _v<span style="color: #990000">++;</span> <span style="font-weight: bold"><span style="color: #000000">setChanged</span></span><span style="color: #990000">();</span> <span style="font-weight: bold"><span style="color: #000000">notifyObservers</span></span><span style="color: #990000">();</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00024:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">dec</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> _v<span style="color: #990000">--;</span> <span style="font-weight: bold"><span style="color: #000000">setChanged</span></span><span style="color: #990000">();</span> <span style="font-weight: bold"><span style="color: #000000">notifyObservers</span></span><span style="color: #990000">();</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00025:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00026:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">M</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Runnable <span style="color: #FF0000">{</span>
<span style="color: #000000">00027:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> Int _c<span style="color: #990000">;</span>
<span style="color: #000000">00028:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">M</span></span><span style="color: #990000">(</span>Int c<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> _c <span style="color: #990000">=</span> c<span style="color: #990000">;</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00029:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00030:</span>     _c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">inc</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00031:</span>     _c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">inc</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00032:</span>     _c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">dec</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00033:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00034:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00035:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">N</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Runnable <span style="color: #FF0000">{</span>
<span style="color: #000000">00036:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> Int _c<span style="color: #990000">;</span>
<span style="color: #000000">00037:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">N</span></span><span style="color: #990000">(</span>Int c<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> _c <span style="color: #990000">=</span> c<span style="color: #990000">;</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00038:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00039:</span>     <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span><span style="color: #009900">int</span> i<span style="color: #990000">=</span><span style="color: #993399">0</span><span style="color: #990000">;</span> i<span style="color: #990000">&lt;</span><span style="color: #993399">50</span><span style="color: #990000">;</span> i<span style="color: #990000">++)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00040:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>i<span style="color: #990000">%</span><span style="color: #993399">3</span><span style="color: #990000">==</span><span style="color: #993399">0</span><span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00041:</span>         _c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">dec</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00042:</span>       <span style="color: #FF0000">}</span> <span style="font-weight: bold"><span style="color: #0000FF">else</span></span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00043:</span>         _c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">inc</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00044:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00045:</span>     <span style="color: #FF0000">}</span>
<span style="color: #000000">00046:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00047:</span> <span style="color: #FF0000">}</span>
</tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
      <p xmlns=""> </p><table xmlns="" width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide010">Observer: UI Driven</a></span><span style="font-weight: normal"><a href="class-07-010.html"> [10/25] </a></span></td></tr></table><p xmlns=""> </p>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a href="../code/html/observer/slider/Main_java.html">file:Main.java</a> [<a href="../code/src/observer/slider/Main.java">source</a>] [<a href="../code/doc-publicobserver/slider/Main.html">doc-public</a>] [<a href="../code/doc-privateobserver/slider/Main.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> observer<span style="color: #990000">.</span>slider<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> javax<span style="color: #990000">.</span>swing<span style="color: #990000">.</span>JSlider<span style="color: #990000">;</span>
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> javax<span style="color: #990000">.</span>swing<span style="color: #990000">.</span>event<span style="color: #990000">.</span>ChangeEvent<span style="color: #990000">;</span>
<span style="color: #000000">00004:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> javax<span style="color: #990000">.</span>swing<span style="color: #990000">.</span>event<span style="color: #990000">.</span>ChangeListener<span style="color: #990000">;</span>
<span style="color: #000000">00005:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">Main</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00006:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">main</span></span><span style="color: #990000">(</span>String<span style="color: #990000">[]</span> args<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00007:</span>     <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">M</span></span><span style="color: #990000">().</span><span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00008:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00009:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00010:</span> 
<span style="color: #000000">00011:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">M</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Runnable <span style="color: #FF0000">{</span>
<span style="color: #000000">00012:</span>   <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">int</span> MIN <span style="color: #990000">=</span> <span style="color: #993399">0</span><span style="color: #990000">;</span>
<span style="color: #000000">00013:</span>   <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">int</span> MAX <span style="color: #990000">=</span> <span style="color: #993399">100</span><span style="color: #990000">;</span>
<span style="color: #000000">00014:</span>   <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">int</span> INIT <span style="color: #990000">=</span> <span style="color: #993399">50</span><span style="color: #990000">;</span>
<span style="color: #000000">00015:</span>   <span style="color: #009900">int</span> x <span style="color: #990000">=</span> INIT<span style="color: #990000">;</span>
<span style="color: #000000">00016:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">run </span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00017:</span>     JSlider s <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">JSlider</span></span><span style="color: #990000">(</span>JSlider<span style="color: #990000">.</span>VERTICAL<span style="color: #990000">,</span> M<span style="color: #990000">.</span>MIN<span style="color: #990000">,</span> M<span style="color: #990000">.</span>MAX<span style="color: #990000">,</span> M<span style="color: #990000">.</span>INIT<span style="color: #990000">);</span>
<span style="color: #000000">00018:</span>     <span style="font-style: italic"><span style="color: #9A1900">/* ... */</span></span>
<span style="color: #000000">00019:</span>     s<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">addChangeListener</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">ChangeListener</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00020:</span>         <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">stateChanged</span></span><span style="color: #990000">(</span>ChangeEvent e<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00021:</span>           JSlider source <span style="color: #990000">=</span> <span style="color: #990000">(</span>JSlider<span style="color: #990000">)</span>e<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getSource</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00022:</span>           <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(!</span>source<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getValueIsAdjusting</span></span><span style="color: #990000">())</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00023:</span>             <span style="font-style: italic"><span style="color: #9A1900">// the next two lines are redundant</span></span>
<span style="color: #000000">00024:</span>             x <span style="color: #990000">=</span> <span style="color: #990000">(</span><span style="color: #009900">int</span><span style="color: #990000">)</span>source<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getValue</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00025:</span>             M<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">.</span>x <span style="color: #990000">=</span> <span style="color: #990000">(</span><span style="color: #009900">int</span><span style="color: #990000">)</span>source<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getValue</span></span><span style="color: #990000">();</span> 
<span style="color: #000000">00026:</span>           <span style="color: #FF0000">}</span>
<span style="color: #000000">00027:</span>         <span style="color: #FF0000">}</span>
<span style="color: #000000">00028:</span>       <span style="color: #FF0000">}</span><span style="color: #990000">);</span>
<span style="color: #000000">00029:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00030:</span> <span style="color: #FF0000">}</span>
</tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
      <p xmlns=""> </p><table xmlns="" width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide011">Simulation: Active and Passive Objects</a></span><span style="font-weight: normal"><a href="class-07-011.html"> [11/25] </a></span></td></tr></table><p xmlns=""> </p>
        <p xmlns="">
          Agents act.
        </p>
        <p xmlns="">
          Agents know what they want to do.
        </p>
        <p xmlns="">
          One can model agents as finite automata.
        </p>
        <p xmlns="">
          Let's say I am implementing an airline reservation system.
          How do I do a simulation?
        </p>
        <p xmlns="">
          A passive view of a customer:
        </p>

<pre xmlns="" xml:space="preserve"><tt><span style="font-weight: bold"><span style="color: #0000FF">interface</span></span> <span style="color: #009900">Customer</span> <span style="color: #FF0000">{</span>
  <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">addFlight</span></span><span style="color: #990000">(</span>Flight f<span style="color: #990000">);</span>
  <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">removeFlight</span></span><span style="color: #990000">(</span>Flight f<span style="color: #990000">);</span>
<span style="color: #FF0000">}</span>
</tt></pre>

        <p xmlns="">
          A more active view:
        </p>

<pre xmlns="" xml:space="preserve"><tt><span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">interface</span></span> <span style="color: #009900">Agent</span> <span style="color: #FF0000">{</span>
  <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">();</span>
<span style="color: #FF0000">}</span> 
<span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">Main</span> <span style="color: #FF0000">{</span>
  List<span style="color: #990000">&lt;</span>Agent<span style="color: #990000">&gt;</span> q <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> List<span style="color: #990000">&lt;</span>Agent<span style="color: #990000">&gt;();</span>
  <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span>i<span style="color: #990000">=</span><span style="color: #993399">0</span><span style="color: #990000">;</span> i<span style="color: #990000">&lt;</span>numSimulated<span style="color: #990000">;</span> i<span style="color: #990000">++)</span>
    q<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">add</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">SimulatedCustomer</span></span><span style="color: #990000">());</span>
  <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span>i<span style="color: #990000">=</span><span style="color: #993399">0</span><span style="color: #990000">;</span> i<span style="color: #990000">&lt;</span>numHuman<span style="color: #990000">;</span> i<span style="color: #990000">++)</span>
    q<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">add</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">HumanCustomer</span></span><span style="color: #990000">());</span>
  <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span>currentTime<span style="color: #990000">=</span><span style="color: #993399">0</span><span style="color: #990000">;</span> currentTime<span style="color: #990000">&lt;</span>endTime<span style="color: #990000">;</span> currentTime<span style="color: #990000">+=</span>timeStep<span style="color: #990000">)</span>
    <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span>Agent a <span style="color: #990000">:</span> q<span style="color: #990000">)</span>
      a<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">();</span>
<span style="color: #FF0000">}</span>
</tt></pre>

        <p xmlns="">
          If we think of customers as "subscribing" to a time service:
        </p>

<pre xmlns="" xml:space="preserve"><tt><span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">interface</span></span> <span style="color: #009900">Agent</span> <span style="color: #FF0000">{</span>
  <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">();</span>
<span style="color: #FF0000">}</span> 
<span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">interface</span></span> <span style="color: #009900">TimeServer</span> <span style="color: #FF0000">{</span>
  <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">long</span> <span style="font-weight: bold"><span style="color: #000000">currentTime</span></span><span style="color: #990000">();</span>
  <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">add</span></span><span style="color: #990000">(</span>Agent thing<span style="color: #990000">);</span>
  <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> duration<span style="color: #990000">);</span> 
<span style="color: #FF0000">}</span>
<span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">Main</span> <span style="color: #FF0000">{</span>
  TimeService q <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #000000">TimeService </span></span><span style="color: #990000">();</span>
  <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span>i<span style="color: #990000">=</span><span style="color: #993399">0</span><span style="color: #990000">;</span> i<span style="color: #990000">&lt;</span>numSimulated<span style="color: #990000">;</span> i<span style="color: #990000">++)</span>
    q<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">add</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">SimulatedCustomer</span></span><span style="color: #990000">());</span>
  <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span>i<span style="color: #990000">=</span><span style="color: #993399">0</span><span style="color: #990000">;</span> i<span style="color: #990000">&lt;</span>numHuman<span style="color: #990000">;</span> i<span style="color: #990000">++)</span>
    q<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">add</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">HumanCustomer</span></span><span style="color: #990000">());</span>
  q<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">(</span>duration<span style="color: #990000">);</span>
<span style="color: #FF0000">}</span>
</tt></pre>

        <p xmlns="">
          With "sparse" time you use a priority queue:
        </p>

<pre xmlns="" xml:space="preserve"><tt><span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">Main</span> <span style="color: #FF0000">{</span>
  TimeServer q <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">TimeServer</span></span><span style="color: #990000">();</span>
  <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span>i<span style="color: #990000">=</span><span style="color: #993399">0</span><span style="color: #990000">;</span> i<span style="color: #990000">&lt;</span>numSimulated<span style="color: #990000">;</span> i<span style="color: #990000">++)</span>
    q<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">enqueue</span></span><span style="color: #990000">(</span>q<span style="color: #990000">.</span>currentTime<span style="color: #990000">,</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">SimulatedCustomer</span></span><span style="color: #990000">());</span>
  <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span>i<span style="color: #990000">=</span><span style="color: #993399">0</span><span style="color: #990000">;</span> i<span style="color: #990000">&lt;</span>numHuman<span style="color: #990000">;</span> i<span style="color: #990000">++)</span>
    q<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">enqueue</span></span><span style="color: #990000">(</span>q<span style="color: #990000">.</span>currentTime<span style="color: #990000">,</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">HumanCustomer</span></span><span style="color: #990000">());</span>
  q<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">(</span>duration<span style="color: #990000">);</span> 
<span style="color: #FF0000">}</span>
<span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">interface</span></span> <span style="color: #009900">TimeServer</span> <span style="color: #FF0000">{</span>
  <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">long</span> <span style="font-weight: bold"><span style="color: #000000">currentTime</span></span><span style="color: #990000">();</span>
  <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">enqueue</span></span><span style="color: #990000">(</span><span style="color: #009900">long</span> time<span style="color: #990000">,</span> Agent thing<span style="color: #990000">);</span>
  <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> duration<span style="color: #990000">);</span> 
<span style="color: #FF0000">}</span>
<span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">interface</span></span> <span style="color: #009900">Agent</span> <span style="color: #FF0000">{</span>
  <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">();</span>
<span style="color: #FF0000">}</span> 
<span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">SimulatedCustomer</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Agent <span style="color: #FF0000">{</span>
  <span style="color: #009900">int</span> state<span style="color: #990000">;</span>
  <span style="font-weight: bold"><span style="color: #000000">SimulatedCustomer</span></span><span style="color: #990000">(</span>TimeServer q<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> <span style="color: #990000">...</span> <span style="color: #FF0000">}</span>
  <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
    <span style="font-weight: bold"><span style="color: #0000FF">switch</span></span> <span style="color: #990000">(</span>state<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
      <span style="font-weight: bold"><span style="color: #0000FF">case</span></span> <span style="color: #990000">...</span>
        <span style="color: #990000">...</span>
        q<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">enqueue</span></span><span style="color: #990000">(</span>q<span style="color: #990000">.</span>currentTime <span style="color: #990000">+</span> <span style="color: #993399">500</span><span style="color: #990000">,</span> <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">);</span>
        <span style="font-weight: bold"><span style="color: #0000FF">break</span></span><span style="color: #990000">;</span>
      <span style="color: #990000">...</span>
    <span style="color: #FF0000">}</span>
  <span style="color: #FF0000">}</span>
<span style="color: #FF0000">}</span>
<span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">HumanCustomer</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Agent <span style="color: #FF0000">{</span>
  <span style="font-weight: bold"><span style="color: #000000">HumanCustomer</span></span><span style="color: #990000">(</span>TimeServer q<span style="color: #990000">,</span> UI ui<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> <span style="color: #990000">...</span> <span style="color: #FF0000">}</span>
  <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
    <span style="font-style: italic"><span style="color: #9A1900">// create a menu whose options end with:</span></span>
    <span style="font-style: italic"><span style="color: #9A1900">// q.enqueue(q.currentTime + 500, this);</span></span>
    <span style="color: #990000">...</span>
    ui<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">displayMenu</span></span><span style="color: #990000">(</span>menu<span style="color: #990000">);</span>
  <span style="color: #FF0000">}</span>
<span style="color: #FF0000">}</span>
</tt></pre>

      <p xmlns=""> </p><table xmlns="" width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide012">Simulation: Example 1</a></span><span style="font-weight: normal"><a href="class-07-012.html"> [12/25] </a></span></td></tr></table><p xmlns=""> </p>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a href="../code/html/agent/one/Main_java.html">file:Main.java</a> [<a href="../code/src/agent/one/Main.java">source</a>] [<a href="../code/doc-publicagent/one/Main.html">doc-public</a>] [<a href="../code/doc-privateagent/one/Main.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> agent<span style="color: #990000">.</span>one<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> agent<span style="color: #990000">.</span>Agent<span style="color: #990000">;</span>
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> agent<span style="color: #990000">.</span>TimeServer<span style="color: #990000">;</span>
<span style="color: #000000">00004:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> agent<span style="color: #990000">.</span>TimeServerLinked<span style="color: #990000">;</span>
<span style="color: #000000">00005:</span> 
<span style="color: #000000">00006:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">Main</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00007:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">main </span></span><span style="color: #990000">(</span>String<span style="color: #990000">[]</span> args<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00008:</span>     TimeServer time <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">TimeServerLinked</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00009:</span>     Agent a <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Tiger</span></span><span style="color: #990000">(</span>time<span style="color: #990000">);</span>
<span style="color: #000000">00010:</span>     time<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">enqueue</span></span><span style="color: #990000">(</span><span style="color: #993399">0</span><span style="color: #990000">,</span>a<span style="color: #990000">);</span>
<span style="color: #000000">00011:</span>     time<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">(</span><span style="color: #993399">100</span><span style="color: #990000">);</span>
<span style="color: #000000">00012:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00013:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00014:</span> 
<span style="color: #000000">00015:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">Tiger</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Agent <span style="color: #FF0000">{</span>
<span style="color: #000000">00016:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> TimeServer _time<span style="color: #990000">;</span>
<span style="color: #000000">00017:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">Tiger</span></span><span style="color: #990000">(</span>TimeServer time<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> _time <span style="color: #990000">=</span> time<span style="color: #990000">;</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00018:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00019:</span>     System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"It's "</span> <span style="color: #990000">+</span> _time<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">currentTime</span></span><span style="color: #990000">()</span> <span style="color: #990000">+</span> <span style="color: #FF0000">" and I'm alive!"</span><span style="color: #990000">);</span>
<span style="color: #000000">00020:</span>     _time<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">enqueue</span></span><span style="color: #990000">(</span><span style="color: #993399">10</span><span style="color: #990000">+</span>_time<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">currentTime</span></span><span style="color: #990000">(),</span> <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">);</span>
<span style="color: #000000">00021:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00022:</span> <span style="color: #FF0000">}</span>  
</tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
      <p xmlns=""> </p><table xmlns="" width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide013">Simulation: Example 2</a></span><span style="font-weight: normal"><a href="class-07-013.html"> [13/25] </a></span></td></tr></table><p xmlns=""> </p>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a href="../code/html/agent/two/Main_java.html">file:Main.java</a> [<a href="../code/src/agent/two/Main.java">source</a>] [<a href="../code/doc-publicagent/two/Main.html">doc-public</a>] [<a href="../code/doc-privateagent/two/Main.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> agent<span style="color: #990000">.</span>two<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> agent<span style="color: #990000">.</span>Agent<span style="color: #990000">;</span>
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> agent<span style="color: #990000">.</span>TimeServer<span style="color: #990000">;</span>
<span style="color: #000000">00004:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> agent<span style="color: #990000">.</span>TimeServerLinked<span style="color: #990000">;</span>
<span style="color: #000000">00005:</span> 
<span style="color: #000000">00006:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">Main</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00007:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">main </span></span><span style="color: #990000">(</span>String<span style="color: #990000">[]</span> args<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00008:</span>     World w <span style="color: #990000">=</span> World<span style="color: #990000">.</span>instance<span style="color: #990000">;</span>
<span style="color: #000000">00009:</span>     Agent a <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Tiger</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00010:</span>     w<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">time</span></span><span style="color: #990000">().</span><span style="font-weight: bold"><span style="color: #000000">enqueue</span></span><span style="color: #990000">(</span><span style="color: #993399">0</span><span style="color: #990000">,</span>a<span style="color: #990000">);</span>
<span style="color: #000000">00011:</span>     w<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">time</span></span><span style="color: #990000">().</span><span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">(</span><span style="color: #993399">100</span><span style="color: #990000">);</span>
<span style="color: #000000">00012:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00013:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00014:</span> 
<span style="color: #000000">00015:</span> <span style="font-weight: bold"><span style="color: #0000FF">interface</span></span> <span style="color: #009900">World</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00016:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> World instance <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">WorldObj</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00017:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> TimeServer <span style="font-weight: bold"><span style="color: #000000">time</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00018:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> Object<span style="color: #990000">[][]</span> <span style="font-weight: bold"><span style="color: #000000">space</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00019:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00020:</span> 
<span style="color: #000000">00021:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">WorldObj</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> World <span style="color: #FF0000">{</span>
<span style="color: #000000">00022:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> TimeServer _time <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">TimeServerLinked</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00023:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> Object<span style="color: #990000">[][]</span> _space <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> Object<span style="color: #990000">[</span><span style="color: #993399">100</span><span style="color: #990000">][</span><span style="color: #993399">100</span><span style="color: #990000">];</span>
<span style="color: #000000">00024:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> TimeServer <span style="font-weight: bold"><span style="color: #000000">time</span></span><span style="color: #990000">()</span>  <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> _time<span style="color: #990000">;</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00025:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> Object<span style="color: #990000">[][]</span> <span style="font-weight: bold"><span style="color: #000000">space</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> _space<span style="color: #990000">;</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00026:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00027:</span>   
<span style="color: #000000">00028:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">Tiger</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Agent <span style="color: #FF0000">{</span>
<span style="color: #000000">00029:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00030:</span>     World w <span style="color: #990000">=</span> World<span style="color: #990000">.</span>instance<span style="color: #990000">;</span>
<span style="color: #000000">00031:</span>     System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"It's "</span> <span style="color: #990000">+</span> w<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">time</span></span><span style="color: #990000">().</span><span style="font-weight: bold"><span style="color: #000000">currentTime</span></span><span style="color: #990000">()</span> <span style="color: #990000">+</span> <span style="color: #FF0000">" and I'm alive!"</span><span style="color: #990000">);</span>
<span style="color: #000000">00032:</span>     w<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">time</span></span><span style="color: #990000">().</span><span style="font-weight: bold"><span style="color: #000000">enqueue</span></span><span style="color: #990000">(</span><span style="color: #993399">10</span><span style="color: #990000">+</span>w<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">time</span></span><span style="color: #990000">().</span><span style="font-weight: bold"><span style="color: #000000">currentTime</span></span><span style="color: #990000">(),</span> <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">);</span>
<span style="color: #000000">00033:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00034:</span> <span style="color: #FF0000">}</span>  
</tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
      <p xmlns=""> </p><table xmlns="" width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide014">Simulation: Example 3</a></span><span style="font-weight: normal"><a href="class-07-014.html"> [14/25] </a></span></td></tr></table><p xmlns=""> </p>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a href="../code/html/agent/three/Main_java.html">file:Main.java</a> [<a href="../code/src/agent/three/Main.java">source</a>] [<a href="../code/doc-publicagent/three/Main.html">doc-public</a>] [<a href="../code/doc-privateagent/three/Main.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> agent<span style="color: #990000">.</span>three<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> agent<span style="color: #990000">.</span>Agent<span style="color: #990000">;</span>
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> agent<span style="color: #990000">.</span>TimeServer<span style="color: #990000">;</span>
<span style="color: #000000">00004:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> agent<span style="color: #990000">.</span>TimeServerLinked<span style="color: #990000">;</span>
<span style="color: #000000">00005:</span> 
<span style="color: #000000">00006:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">Main</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00007:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">main </span></span><span style="color: #990000">(</span>String<span style="color: #990000">[]</span> args<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00008:</span>     World w <span style="color: #990000">=</span> World<span style="color: #990000">.</span>instance<span style="color: #990000">;</span>
<span style="color: #000000">00009:</span>     Agent a <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Tiger</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00010:</span>     w<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">enqueue</span></span><span style="color: #990000">(</span><span style="color: #993399">0</span><span style="color: #990000">,</span>a<span style="color: #990000">);</span>
<span style="color: #000000">00011:</span>     w<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">set</span></span><span style="color: #990000">(</span><span style="color: #993399">0</span><span style="color: #990000">,</span><span style="color: #993399">0</span><span style="color: #990000">,</span>a<span style="color: #990000">);</span>
<span style="color: #000000">00012:</span>     w<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">(</span><span style="color: #993399">100</span><span style="color: #990000">);</span>
<span style="color: #000000">00013:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00014:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00015:</span> 
<span style="color: #000000">00016:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">Util</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00017:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #000000">Util</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{}</span>
<span style="color: #000000">00018:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">long</span> SEED <span style="color: #990000">=</span> <span style="color: #993399">2497</span><span style="color: #990000">;</span>
<span style="color: #000000">00019:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> java<span style="color: #990000">.</span>util<span style="color: #990000">.</span>Random _r <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> java<span style="color: #990000">.</span>util<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">Random</span></span><span style="color: #990000">(</span>SEED<span style="color: #990000">);</span>
<span style="color: #000000">00020:</span>   <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">random</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> n<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> _r<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">nextInt</span></span><span style="color: #990000">(</span>n<span style="color: #990000">);</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00021:</span>   <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">boolean</span> <span style="font-weight: bold"><span style="color: #000000">randomBoolean</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> _r<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">nextBoolean</span></span><span style="color: #990000">();</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00022:</span> <span style="color: #FF0000">}</span>  
<span style="color: #000000">00023:</span> 
<span style="color: #000000">00024:</span> <span style="font-weight: bold"><span style="color: #0000FF">interface</span></span> <span style="color: #009900">World</span> <span style="font-weight: bold"><span style="color: #0000FF">extends</span></span> TimeServer <span style="color: #FF0000">{</span>
<span style="color: #000000">00025:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> World instance <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">WorldObj</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00026:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">maxx</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00027:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">maxy</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00028:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> Object <span style="font-weight: bold"><span style="color: #000000">get</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> i<span style="color: #990000">,</span> <span style="color: #009900">int</span> j<span style="color: #990000">);</span>
<span style="color: #000000">00029:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">set</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> i<span style="color: #990000">,</span> <span style="color: #009900">int</span> j<span style="color: #990000">,</span> Object a<span style="color: #990000">);</span>
<span style="color: #000000">00030:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00031:</span> 
<span style="color: #000000">00032:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">WorldObj</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> World <span style="color: #FF0000">{</span>
<span style="color: #000000">00033:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">int</span> MAXX <span style="color: #990000">=</span> <span style="color: #993399">100</span><span style="color: #990000">;</span>
<span style="color: #000000">00034:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">int</span> MAXY <span style="color: #990000">=</span> <span style="color: #993399">100</span><span style="color: #990000">;</span>
<span style="color: #000000">00035:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> TimeServer _time <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">TimeServerLinked</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00036:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> Object<span style="color: #990000">[][]</span> _space <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> Object<span style="color: #990000">[</span>MAXX<span style="color: #990000">][</span>MAXY<span style="color: #990000">];</span>
<span style="color: #000000">00037:</span> 
<span style="color: #000000">00038:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">maxx</span></span><span style="color: #990000">()</span>                      <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> MAXX<span style="color: #990000">;</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00039:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">maxy</span></span><span style="color: #990000">()</span>                      <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> MAXY<span style="color: #990000">;</span> <span style="color: #FF0000">}</span>     
<span style="color: #000000">00040:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> Object <span style="font-weight: bold"><span style="color: #000000">get</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> x<span style="color: #990000">,</span> <span style="color: #009900">int</span> y<span style="color: #990000">)</span>        <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> _space<span style="color: #990000">[</span>x<span style="color: #990000">%</span>MAXX<span style="color: #990000">][</span>y<span style="color: #990000">%</span>MAXY<span style="color: #990000">];</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00041:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">set</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> x<span style="color: #990000">,</span> <span style="color: #009900">int</span> y<span style="color: #990000">,</span> Object a<span style="color: #990000">)</span><span style="color: #FF0000">{</span> _space<span style="color: #990000">[</span>x<span style="color: #990000">%</span>MAXX<span style="color: #990000">][</span>y<span style="color: #990000">%</span>MAXY<span style="color: #990000">]</span> <span style="color: #990000">=</span> a<span style="color: #990000">;</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00042:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">long</span> <span style="font-weight: bold"><span style="color: #000000">currentTime</span></span><span style="color: #990000">()</span>              <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> _time<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">currentTime</span></span><span style="color: #990000">();</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00043:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">enqueue</span></span><span style="color: #990000">(</span><span style="color: #009900">long</span> t<span style="color: #990000">,</span> Agent a<span style="color: #990000">)</span>   <span style="color: #FF0000">{</span> _time<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">enqueue</span></span><span style="color: #990000">(</span>t<span style="color: #990000">,</span>a<span style="color: #990000">);</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00044:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> d<span style="color: #990000">)</span>                 <span style="color: #FF0000">{</span> _time<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">(</span>d<span style="color: #990000">);</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00045:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00046:</span>   
<span style="color: #000000">00047:</span> <span style="font-style: italic"><span style="color: #9A1900">/* BUGS HERE */</span></span>
<span style="color: #000000">00048:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">Tiger</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Agent <span style="color: #FF0000">{</span>
<span style="color: #000000">00049:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">int</span> _x<span style="color: #990000">;</span>
<span style="color: #000000">00050:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">int</span> _y<span style="color: #990000">;</span>
<span style="color: #000000">00051:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> World _w <span style="color: #990000">=</span> World<span style="color: #990000">.</span>instance<span style="color: #990000">;</span>
<span style="color: #000000">00052:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">moveRandom</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00053:</span>     _w<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">set</span></span><span style="color: #990000">(</span>_x<span style="color: #990000">,</span>_y<span style="color: #990000">,</span><span style="font-weight: bold"><span style="color: #0000FF">null</span></span><span style="color: #990000">);</span>
<span style="color: #000000">00054:</span>     <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>Util<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">randomBoolean</span></span><span style="color: #990000">())</span> <span style="color: #FF0000">{</span> _x <span style="color: #990000">=</span> <span style="color: #990000">(</span>_x<span style="color: #990000">+</span><span style="color: #993399">1</span><span style="color: #990000">)%</span>_w<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">maxx</span></span><span style="color: #990000">();</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00055:</span>     <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>Util<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">randomBoolean</span></span><span style="color: #990000">())</span> <span style="color: #FF0000">{</span> _y <span style="color: #990000">=</span> <span style="color: #990000">(</span>_y<span style="color: #990000">+</span><span style="color: #993399">1</span><span style="color: #990000">)%</span>_w<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">maxy</span></span><span style="color: #990000">();</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00056:</span>     _w<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">set</span></span><span style="color: #990000">(</span>_x<span style="color: #990000">,</span>_y<span style="color: #990000">,</span><span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">);</span>
<span style="color: #000000">00057:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00058:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00059:</span>     <span style="font-weight: bold"><span style="color: #000000">moveRandom</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00060:</span>     System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"It's "</span> <span style="color: #990000">+</span> _w<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">currentTime</span></span><span style="color: #990000">()</span> <span style="color: #990000">+</span> <span style="color: #FF0000">" and I'm alive at ("</span> <span style="color: #990000">+</span> _x <span style="color: #990000">+</span> <span style="color: #FF0000">","</span> <span style="color: #990000">+</span> _y <span style="color: #990000">+</span> <span style="color: #FF0000">")!"</span><span style="color: #990000">);</span>
<span style="color: #000000">00061:</span>     _w<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">enqueue</span></span><span style="color: #990000">(</span><span style="color: #993399">10</span><span style="color: #990000">+</span>_w<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">currentTime</span></span><span style="color: #990000">(),</span> <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">);</span>
<span style="color: #000000">00062:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00063:</span>   
<span style="color: #000000">00064:</span> <span style="color: #FF0000">}</span>  
</tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
      <p xmlns=""> </p><table xmlns="" width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide015">Simulation: Example 4</a></span><span style="font-weight: normal"><a href="class-07-015.html"> [15/25] </a></span></td></tr></table><p xmlns=""> </p>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a href="../code/html/agent/four/Main_java.html">file:Main.java</a> [<a href="../code/src/agent/four/Main.java">source</a>] [<a href="../code/doc-publicagent/four/Main.html">doc-public</a>] [<a href="../code/doc-privateagent/four/Main.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> agent<span style="color: #990000">.</span>four<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> 
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">Main</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00004:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">main </span></span><span style="color: #990000">(</span>String<span style="color: #990000">[]</span> args<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00005:</span>     World w <span style="color: #990000">=</span> WorldF<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">instance</span></span><span style="color: #990000">(</span><span style="color: #993399">100</span><span style="color: #990000">,</span><span style="color: #993399">100</span><span style="color: #990000">);</span>
<span style="color: #000000">00006:</span>     <span style="color: #009900">int</span> i <span style="color: #990000">=</span> <span style="color: #993399">0</span><span style="color: #990000">;</span>
<span style="color: #000000">00007:</span>     <span style="font-weight: bold"><span style="color: #0000FF">while</span></span> <span style="color: #990000">(</span>i<span style="color: #990000">&lt;</span><span style="color: #993399">20</span><span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00008:</span>       <span style="font-weight: bold"><span style="color: #0000FF">try</span></span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00009:</span>         Tiger t <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> Tiger
<span style="color: #000000">00010:</span>           <span style="color: #990000">(</span>Integer<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">toString</span></span><span style="color: #990000">(</span>i<span style="color: #990000">),</span> Util<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">random</span></span><span style="color: #990000">(</span>w<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">maxx</span></span><span style="color: #990000">()),</span> Util<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">random</span></span><span style="color: #990000">(</span>w<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">maxy</span></span><span style="color: #990000">()));</span>
<span style="color: #000000">00011:</span>         i<span style="color: #990000">++;</span>
<span style="color: #000000">00012:</span>       <span style="color: #FF0000">}</span> <span style="font-weight: bold"><span style="color: #0000FF">catch</span></span> <span style="color: #990000">(</span>SpaceOccupiedException e<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00013:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00014:</span>     <span style="color: #FF0000">}</span>
<span style="color: #000000">00015:</span>     w<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">(</span><span style="color: #993399">1000</span><span style="color: #990000">);</span>
<span style="color: #000000">00016:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00017:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00018:</span> 
<span style="color: #000000">00019:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">Util</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00020:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #000000">Util</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{}</span>
<span style="color: #000000">00021:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">long</span> SEED <span style="color: #990000">=</span> <span style="color: #993399">2497</span><span style="color: #990000">;</span>
<span style="color: #000000">00022:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> java<span style="color: #990000">.</span>util<span style="color: #990000">.</span>Random _r <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> java<span style="color: #990000">.</span>util<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">Random</span></span><span style="color: #990000">(</span>SEED<span style="color: #990000">);</span>
<span style="color: #000000">00023:</span>   <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">random</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> n<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> _r<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">nextInt</span></span><span style="color: #990000">(</span>n<span style="color: #990000">);</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00024:</span>   <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">boolean</span> <span style="font-weight: bold"><span style="color: #000000">randomBoolean</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> _r<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">nextBoolean</span></span><span style="color: #990000">();</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00025:</span> <span style="color: #FF0000">}</span>  
<span style="color: #000000">00026:</span> 
<span style="color: #000000">00027:</span> <span style="font-weight: bold"><span style="color: #0000FF">interface</span></span> <span style="color: #009900">World</span> <span style="font-weight: bold"><span style="color: #0000FF">extends</span></span> TimeServer <span style="color: #FF0000">{</span>
<span style="color: #000000">00028:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">maxx</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00029:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">maxy</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00030:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> Visible <span style="font-weight: bold"><span style="color: #000000">get</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> i<span style="color: #990000">,</span> <span style="color: #009900">int</span> j<span style="color: #990000">);</span>
<span style="color: #000000">00031:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">boolean</span> <span style="font-weight: bold"><span style="color: #000000">set</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> i<span style="color: #990000">,</span> <span style="color: #009900">int</span> j<span style="color: #990000">,</span> Visible a<span style="color: #990000">);</span>
<span style="color: #000000">00032:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00033:</span> 
<span style="color: #000000">00034:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">WorldF</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00035:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> World _W<span style="color: #990000">;</span>
<span style="color: #000000">00036:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> World <span style="font-weight: bold"><span style="color: #000000">instance</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> maxx<span style="color: #990000">,</span> <span style="color: #009900">int</span> maxy<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00037:</span>     <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>_W <span style="color: #990000">!=</span> <span style="font-weight: bold"><span style="color: #0000FF">null</span></span><span style="color: #990000">)</span>
<span style="color: #000000">00038:</span>       <span style="font-weight: bold"><span style="color: #0000FF">throw</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">IllegalStateException</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00039:</span>     _W <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">WorldObj</span></span><span style="color: #990000">(</span>maxx<span style="color: #990000">,</span> maxy<span style="color: #990000">);</span>
<span style="color: #000000">00040:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> _W<span style="color: #990000">;</span>
<span style="color: #000000">00041:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00042:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> World <span style="font-weight: bold"><span style="color: #000000">instance</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00043:</span>     <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>_W <span style="color: #990000">==</span> <span style="font-weight: bold"><span style="color: #0000FF">null</span></span><span style="color: #990000">)</span>
<span style="color: #000000">00044:</span>       <span style="font-weight: bold"><span style="color: #0000FF">throw</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">IllegalStateException</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00045:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> _W<span style="color: #990000">;</span>
<span style="color: #000000">00046:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00047:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00048:</span> 
<span style="color: #000000">00049:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">WorldObj</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> World <span style="color: #FF0000">{</span>
<span style="color: #000000">00050:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #009900">int</span> _maxx<span style="color: #990000">;</span>
<span style="color: #000000">00051:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #009900">int</span> _maxy<span style="color: #990000">;</span>
<span style="color: #000000">00052:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> TimeServer _time<span style="color: #990000">;</span>
<span style="color: #000000">00053:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> Visible<span style="color: #990000">[][]</span> _space<span style="color: #990000">;</span>
<span style="color: #000000">00054:</span> 
<span style="color: #000000">00055:</span>   <span style="font-weight: bold"><span style="color: #000000">WorldObj</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> maxx<span style="color: #990000">,</span> <span style="color: #009900">int</span> maxy<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00056:</span>     _maxx <span style="color: #990000">=</span> maxx<span style="color: #990000">;</span>
<span style="color: #000000">00057:</span>     _maxy <span style="color: #990000">=</span> maxy<span style="color: #990000">;</span>
<span style="color: #000000">00058:</span>     _time <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">TimeServerLinked</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00059:</span>     _space <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> Visible<span style="color: #990000">[</span>_maxx<span style="color: #990000">][</span>_maxy<span style="color: #990000">];</span>
<span style="color: #000000">00060:</span>     <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span><span style="color: #009900">int</span> x <span style="color: #990000">=</span> <span style="color: #993399">0</span><span style="color: #990000">;</span> x <span style="color: #990000">&lt;</span> _maxx<span style="color: #990000">;</span> x<span style="color: #990000">++</span> <span style="color: #990000">)</span>
<span style="color: #000000">00061:</span>       <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span><span style="color: #009900">int</span> y <span style="color: #990000">=</span> <span style="color: #993399">0</span><span style="color: #990000">;</span> y <span style="color: #990000">&lt;</span> _maxy<span style="color: #990000">;</span> y<span style="color: #990000">++</span> <span style="color: #990000">)</span>
<span style="color: #000000">00062:</span>         _space<span style="color: #990000">[</span>x<span style="color: #990000">][</span>y<span style="color: #990000">]</span> <span style="color: #990000">=</span> NullVisible<span style="color: #990000">.</span>instance<span style="color: #990000">;</span>
<span style="color: #000000">00063:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00064:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">maxx</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> _maxx<span style="color: #990000">;</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00065:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">maxy</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> _maxy<span style="color: #990000">;</span> <span style="color: #FF0000">}</span>     
<span style="color: #000000">00066:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> Visible <span style="font-weight: bold"><span style="color: #000000">get</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> x<span style="color: #990000">,</span> <span style="color: #009900">int</span> y<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00067:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> _space<span style="color: #990000">[(</span>x<span style="color: #990000">+</span>_maxx<span style="color: #990000">)%</span>_maxx<span style="color: #990000">][(</span>y<span style="color: #990000">+</span>_maxy<span style="color: #990000">)%</span>_maxy<span style="color: #990000">];</span>
<span style="color: #000000">00068:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00069:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">boolean</span> <span style="font-weight: bold"><span style="color: #000000">set</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> x<span style="color: #990000">,</span> <span style="color: #009900">int</span> y<span style="color: #990000">,</span> Visible a<span style="color: #990000">)</span><span style="color: #FF0000">{</span>
<span style="color: #000000">00070:</span>     <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>a <span style="color: #990000">==</span> <span style="font-weight: bold"><span style="color: #0000FF">null</span></span><span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00071:</span>       a <span style="color: #990000">=</span> NullVisible<span style="color: #990000">.</span>instance<span style="color: #990000">;</span>
<span style="color: #000000">00072:</span>     <span style="color: #FF0000">}</span> <span style="font-weight: bold"><span style="color: #0000FF">else</span></span> <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #000000">get</span></span><span style="color: #990000">(</span>x<span style="color: #990000">,</span>y<span style="color: #990000">)</span> <span style="color: #990000">!=</span> NullVisible<span style="color: #990000">.</span>instance<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00073:</span>       <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">false</span></span><span style="color: #990000">;</span>
<span style="color: #000000">00074:</span>     <span style="color: #FF0000">}</span>
<span style="color: #000000">00075:</span>     _space<span style="color: #990000">[(</span>x<span style="color: #990000">+</span>_maxx<span style="color: #990000">)%</span>_maxx<span style="color: #990000">][(</span>y<span style="color: #990000">+</span>_maxy<span style="color: #990000">)%</span>_maxy<span style="color: #990000">]</span> <span style="color: #990000">=</span> a<span style="color: #990000">;</span>
<span style="color: #000000">00076:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">true</span></span><span style="color: #990000">;</span>
<span style="color: #000000">00077:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00078:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">long</span> <span style="font-weight: bold"><span style="color: #000000">currentTime</span></span><span style="color: #990000">()</span>              <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> _time<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">currentTime</span></span><span style="color: #990000">();</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00079:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">enqueue</span></span><span style="color: #990000">(</span><span style="color: #009900">long</span> t<span style="color: #990000">,</span> Agent a<span style="color: #990000">)</span>   <span style="color: #FF0000">{</span> _time<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">enqueue</span></span><span style="color: #990000">(</span>t<span style="color: #990000">,</span>a<span style="color: #990000">);</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00080:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> d<span style="color: #990000">)</span>                 <span style="color: #FF0000">{</span> _time<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">(</span>d<span style="color: #990000">);</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00081:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00082:</span> 
<span style="color: #000000">00083:</span> <span style="font-weight: bold"><span style="color: #0000FF">interface</span></span> <span style="color: #009900">Visible</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00084:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">int</span> NULL <span style="color: #990000">=</span> <span style="color: #993399">0</span><span style="color: #990000">;</span>
<span style="color: #000000">00085:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">int</span> TIGER <span style="color: #990000">=</span> <span style="color: #993399">1</span><span style="color: #990000">;</span>
<span style="color: #000000">00086:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">type</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00087:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00088:</span>   
<span style="color: #000000">00089:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">NullVisible</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Visible <span style="color: #FF0000">{</span>
<span style="color: #000000">00090:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #000000">NullVisible</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{}</span>
<span style="color: #000000">00091:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> Visible instance <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">NullVisible</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00092:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">type</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> Visible<span style="color: #990000">.</span>NULL<span style="color: #990000">;</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00093:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> String <span style="font-weight: bold"><span style="color: #000000">toString</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="color: #FF0000">"Null"</span><span style="color: #990000">;</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00094:</span> <span style="color: #FF0000">}</span>  
<span style="color: #000000">00095:</span> 
<span style="color: #000000">00096:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">SpaceOccupiedException</span> <span style="font-weight: bold"><span style="color: #0000FF">extends</span></span> RuntimeException <span style="color: #FF0000">{</span>
<span style="color: #000000">00097:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #009900">long</span> serialVersionUID <span style="color: #990000">=</span> <span style="color: #993399">2008L</span><span style="color: #990000">;</span>
<span style="color: #000000">00098:</span> <span style="color: #FF0000">}</span><span style="color: #990000">;</span>
<span style="color: #000000">00099:</span> 
<span style="color: #000000">00100:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">Tiger</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Agent<span style="color: #990000">,</span> Visible <span style="color: #FF0000">{</span>
<span style="color: #000000">00101:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> String _name<span style="color: #990000">;</span>
<span style="color: #000000">00102:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">int</span> _x<span style="color: #990000">;</span>
<span style="color: #000000">00103:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">int</span> _y<span style="color: #990000">;</span>
<span style="color: #000000">00104:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> World _w <span style="color: #990000">=</span> WorldF<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">instance</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00105:</span> 
<span style="color: #000000">00106:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">Tiger</span></span><span style="color: #990000">(</span>String name<span style="color: #990000">,</span> <span style="color: #009900">int</span> x<span style="color: #990000">,</span> <span style="color: #009900">int</span> y<span style="color: #990000">)</span>
<span style="color: #000000">00107:</span>     <span style="font-weight: bold"><span style="color: #0000FF">throws</span></span> SpaceOccupiedException
<span style="color: #000000">00108:</span>   <span style="color: #FF0000">{</span>
<span style="color: #000000">00109:</span>     _name <span style="color: #990000">=</span> name<span style="color: #990000">;</span>
<span style="color: #000000">00110:</span>     <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(!</span>_w<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">set</span></span><span style="color: #990000">(</span>x<span style="color: #990000">,</span>y<span style="color: #990000">,</span><span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">))</span>
<span style="color: #000000">00111:</span>       <span style="font-weight: bold"><span style="color: #0000FF">throw</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">SpaceOccupiedException</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00112:</span>     _x <span style="color: #990000">=</span> x<span style="color: #990000">;</span>
<span style="color: #000000">00113:</span>     _y <span style="color: #990000">=</span> y<span style="color: #990000">;</span>
<span style="color: #000000">00114:</span>     _w<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">enqueue</span></span><span style="color: #990000">(</span><span style="color: #993399">1</span><span style="color: #990000">+</span>_w<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">currentTime</span></span><span style="color: #990000">(),</span> <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">);</span>
<span style="color: #000000">00115:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00116:</span>   
<span style="color: #000000">00117:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> String <span style="font-weight: bold"><span style="color: #000000">toString</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> _name <span style="color: #990000">+</span> <span style="color: #FF0000">"@("</span> <span style="color: #990000">+</span> _x <span style="color: #990000">+</span> <span style="color: #FF0000">","</span> <span style="color: #990000">+</span> _y <span style="color: #990000">+</span> <span style="color: #FF0000">")"</span><span style="color: #990000">;</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00118:</span> 
<span style="color: #000000">00119:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">type</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> Visible<span style="color: #990000">.</span>TIGER<span style="color: #990000">;</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00120:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">check</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00121:</span>     <span style="font-weight: bold"><span style="color: #000000">checkAjacent</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00122:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00123:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00124:</span>     <span style="font-style: italic"><span style="color: #9A1900">//System.out.print(this + " moves to ");</span></span>
<span style="color: #000000">00125:</span>     <span style="font-weight: bold"><span style="color: #000000">moveRandom</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00126:</span>     <span style="font-style: italic"><span style="color: #9A1900">//System.out.println(this);</span></span>
<span style="color: #000000">00127:</span>     _w<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">enqueue</span></span><span style="color: #990000">(</span><span style="color: #993399">10</span><span style="color: #990000">+</span>_w<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">currentTime</span></span><span style="color: #990000">(),</span> <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">);</span>
<span style="color: #000000">00128:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00129:</span> 
<span style="color: #000000">00130:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">checkAjacent</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00131:</span>     <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span><span style="color: #009900">int</span> i<span style="color: #990000">=-</span><span style="color: #993399">1</span><span style="color: #990000">;</span> i<span style="color: #990000">&lt;=</span><span style="color: #993399">1</span><span style="color: #990000">;</span> i<span style="color: #990000">++)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00132:</span>       <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span><span style="color: #009900">int</span> j<span style="color: #990000">=-</span><span style="color: #993399">1</span><span style="color: #990000">;</span> j<span style="color: #990000">&lt;=</span><span style="color: #993399">1</span><span style="color: #990000">;</span> j<span style="color: #990000">++)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00133:</span>         <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>i<span style="color: #990000">==</span><span style="color: #993399">0</span> <span style="color: #990000">&amp;&amp;</span> j<span style="color: #990000">==</span><span style="color: #993399">0</span><span style="color: #990000">)</span>
<span style="color: #000000">00134:</span>           <span style="font-weight: bold"><span style="color: #0000FF">continue</span></span><span style="color: #990000">;</span>
<span style="color: #000000">00135:</span>         <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>_w<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">get</span></span><span style="color: #990000">(</span>_x<span style="color: #990000">+</span>i<span style="color: #990000">,</span>_y<span style="color: #990000">+</span>j<span style="color: #990000">).</span><span style="font-weight: bold"><span style="color: #000000">type</span></span><span style="color: #990000">()</span> <span style="color: #990000">==</span> Visible<span style="color: #990000">.</span>TIGER<span style="color: #990000">)</span>
<span style="color: #000000">00136:</span>           System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">this</span></span> <span style="color: #990000">+</span> <span style="color: #FF0000">" roars at "</span> <span style="color: #990000">+</span> _w<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">get</span></span><span style="color: #990000">(</span>_x<span style="color: #990000">+</span>i<span style="color: #990000">,</span>_y<span style="color: #990000">+</span>j<span style="color: #990000">)</span> <span style="color: #990000">+</span> <span style="color: #FF0000">" at "</span> <span style="color: #990000">+</span> _w<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">currentTime</span></span><span style="color: #990000">());</span>
<span style="color: #000000">00137:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00138:</span>     <span style="color: #FF0000">}</span>
<span style="color: #000000">00139:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00140:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">moveRandom</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00141:</span>     _w<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">set</span></span><span style="color: #990000">(</span>_x<span style="color: #990000">,</span>_y<span style="color: #990000">,</span><span style="font-weight: bold"><span style="color: #0000FF">null</span></span><span style="color: #990000">);</span>
<span style="color: #000000">00142:</span>     <span style="color: #009900">int</span> x<span style="color: #990000">,</span> y<span style="color: #990000">;</span> 
<span style="color: #000000">00143:</span>     <span style="font-weight: bold"><span style="color: #0000FF">do</span></span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00144:</span>       x <span style="color: #990000">=</span> <span style="color: #990000">(</span>_w<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">maxx</span></span><span style="color: #990000">()</span> <span style="color: #990000">+</span> _x <span style="color: #990000">-</span><span style="color: #993399">1</span> <span style="color: #990000">+</span> Util<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">random</span></span><span style="color: #990000">(</span><span style="color: #993399">2</span><span style="color: #990000">))</span> <span style="color: #990000">%</span> _w<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">maxx</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00145:</span>       y <span style="color: #990000">=</span> <span style="color: #990000">(</span>_w<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">maxy</span></span><span style="color: #990000">()</span> <span style="color: #990000">+</span> _y <span style="color: #990000">-</span><span style="color: #993399">1</span> <span style="color: #990000">+</span> Util<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">random</span></span><span style="color: #990000">(</span><span style="color: #993399">2</span><span style="color: #990000">))</span> <span style="color: #990000">%</span> _w<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">maxy</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00146:</span>       <span style="font-style: italic"><span style="color: #9A1900">//System.out.println("Trying (" + x + "," + y + ")");</span></span>
<span style="color: #000000">00147:</span>     <span style="color: #FF0000">}</span> <span style="font-weight: bold"><span style="color: #0000FF">while</span></span> <span style="color: #990000">(!</span>_w<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">set</span></span><span style="color: #990000">(</span>x<span style="color: #990000">,</span>y<span style="color: #990000">,</span><span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">));</span>
<span style="color: #000000">00148:</span>     _x <span style="color: #990000">=</span> x<span style="color: #990000">;</span> _y <span style="color: #990000">=</span> y<span style="color: #990000">;</span>
<span style="color: #000000">00149:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00150:</span> <span style="color: #FF0000">}</span>  
</tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
      <p xmlns=""> </p><table xmlns="" width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide016">Simulation: TimeServer Implementation</a></span><span style="font-weight: normal"><a href="class-07-016.html"> [16/25] </a></span></td></tr></table><p xmlns=""> </p>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a href="../code/html/agent/Agent_java.html">file:Agent.java</a> [<a href="../code/src/agent/Agent.java">source</a>] [<a href="../code/doc-publicagent/Agent.html">doc-public</a>] [<a href="../code/doc-privateagent/Agent.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> agent<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> 
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">interface</span></span> <span style="color: #009900">Agent</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00004:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00005:</span> <span style="color: #FF0000">}</span>
</tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a href="../code/html/agent/TimeServer_java.html">file:TimeServer.java</a> [<a href="../code/src/agent/TimeServer.java">source</a>] [<a href="../code/doc-publicagent/TimeServer.html">doc-public</a>] [<a href="../code/doc-privateagent/TimeServer.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> agent<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> 
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">interface</span></span> <span style="color: #009900">TimeServer</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00004:</span>     <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">long</span> <span style="font-weight: bold"><span style="color: #000000">currentTime</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00005:</span>     <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">enqueue</span></span><span style="color: #990000">(</span><span style="color: #009900">long</span> waketime<span style="color: #990000">,</span> Agent thing<span style="color: #990000">);</span>
<span style="color: #000000">00006:</span>     <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> duration<span style="color: #990000">);</span>
<span style="color: #000000">00007:</span> <span style="color: #FF0000">}</span>
</tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
<pre xmlns="" xml:space="preserve">
If you want to use this for the project:

The idea is that whenever an agent adds itself to the timeserver, it
specifies its waketime.  The waketime must be greater than
currenttime, or the enqueue method should throw an exception.  The
timeserver orders agents by their waketime, so the one to wake first is
always at the front.  So in order to run the next agent, the first
agent is dequeued, and then the currenttime is set to its waketime,
then the agent is run.

For a car:
Start the car with waketime=currenttime.
When the car is run(), it should re-enqueue itself with
waketime=currenttime+timestep.

For a light:
Start the lightController with waketime=currenttime.
When the lightController is run(), it should re-enqueue itself with
waketime=currenttime+this._state.getDuration(), where the state
duration is whatever is appropriate for this state.

For a source:
Start the source with waketime=currenttime.
When the source is run(), it should re-enqueue itself with
waketime=currenttime+this._carCreationInterval, where the interval
indicates the time between car creations for this source.        
</pre>
        <p xmlns="">
          I implemented the <tt>TimeServer</tt> using a linked list
          with a <i>dummy node</i>.
        </p>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a href="../code/html/agent/TimeServerLinked_java.html">file:TimeServerLinked.java</a> [<a href="../code/src/agent/TimeServerLinked.java">source</a>] [<a href="../code/doc-publicagent/TimeServerLinked.html">doc-public</a>] [<a href="../code/doc-privateagent/TimeServerLinked.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> agent<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> 
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">TimeServerLinked</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> TimeServer <span style="color: #FF0000">{</span>
<span style="color: #000000">00004:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">Node</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00005:</span>     <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #009900">long</span> waketime<span style="color: #990000">;</span>
<span style="color: #000000">00006:</span>     <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> Agent agent<span style="color: #990000">;</span>
<span style="color: #000000">00007:</span>     Node next<span style="color: #990000">;</span>
<span style="color: #000000">00008:</span>   
<span style="color: #000000">00009:</span>     <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">Node</span></span><span style="color: #990000">(</span><span style="color: #009900">long</span> waketime<span style="color: #990000">,</span> Agent agent<span style="color: #990000">,</span> Node next<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00010:</span>       <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">.</span>waketime <span style="color: #990000">=</span> waketime<span style="color: #990000">;</span>
<span style="color: #000000">00011:</span>       <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">.</span>agent <span style="color: #990000">=</span> agent<span style="color: #990000">;</span>
<span style="color: #000000">00012:</span>       <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">.</span>next <span style="color: #990000">=</span> next<span style="color: #990000">;</span>
<span style="color: #000000">00013:</span>     <span style="color: #FF0000">}</span>
<span style="color: #000000">00014:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00015:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">long</span> _currentTime<span style="color: #990000">;</span>
<span style="color: #000000">00016:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">int</span> _size<span style="color: #990000">;</span>
<span style="color: #000000">00017:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> Node _head<span style="color: #990000">;</span>
<span style="color: #000000">00018:</span> 
<span style="color: #000000">00019:</span>   <span style="font-style: italic"><span style="color: #9A1900">/*</span></span>
<span style="color: #000000">00020:</span> <span style="font-style: italic"><span style="color: #9A1900">  * Invariant: _head != null</span></span>
<span style="color: #000000">00021:</span> <span style="font-style: italic"><span style="color: #9A1900">  * Invariant: _head.agent == null</span></span>
<span style="color: #000000">00022:</span> <span style="font-style: italic"><span style="color: #9A1900">  * Invariant: (_size == 0) iff (_head.next == null)</span></span>
<span style="color: #000000">00023:</span> <span style="font-style: italic"><span style="color: #9A1900">  */</span></span>
<span style="color: #000000">00024:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">TimeServerLinked</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00025:</span>     _size <span style="color: #990000">=</span> <span style="color: #993399">0</span><span style="color: #990000">;</span>
<span style="color: #000000">00026:</span>     _head <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Node</span></span><span style="color: #990000">(</span><span style="color: #993399">0</span><span style="color: #990000">,</span> <span style="font-weight: bold"><span style="color: #0000FF">null</span></span><span style="color: #990000">,</span> <span style="font-weight: bold"><span style="color: #0000FF">null</span></span><span style="color: #990000">);</span>
<span style="color: #000000">00027:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00028:</span> 
<span style="color: #000000">00029:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> String <span style="font-weight: bold"><span style="color: #000000">toString</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00030:</span>     StringBuilder sb <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">StringBuilder</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"["</span><span style="color: #990000">);</span>
<span style="color: #000000">00031:</span>     Node node <span style="color: #990000">=</span> _head<span style="color: #990000">.</span>next<span style="color: #990000">;</span>
<span style="color: #000000">00032:</span>     String sep <span style="color: #990000">=</span> <span style="color: #FF0000">""</span><span style="color: #990000">;</span>
<span style="color: #000000">00033:</span>     <span style="font-weight: bold"><span style="color: #0000FF">while</span></span> <span style="color: #990000">(</span>node <span style="color: #990000">!=</span> <span style="font-weight: bold"><span style="color: #0000FF">null</span></span><span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00034:</span>       sb<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">append</span></span><span style="color: #990000">(</span>sep<span style="color: #990000">).</span><span style="font-weight: bold"><span style="color: #000000">append</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"("</span><span style="color: #990000">).</span><span style="font-weight: bold"><span style="color: #000000">append</span></span><span style="color: #990000">(</span>node<span style="color: #990000">.</span>waketime<span style="color: #990000">).</span><span style="font-weight: bold"><span style="color: #000000">append</span></span><span style="color: #990000">(</span><span style="color: #FF0000">","</span><span style="color: #990000">)</span>
<span style="color: #000000">00035:</span>         <span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">append</span></span><span style="color: #990000">(</span>node<span style="color: #990000">.</span>agent<span style="color: #990000">).</span><span style="font-weight: bold"><span style="color: #000000">append</span></span><span style="color: #990000">(</span><span style="color: #FF0000">")"</span><span style="color: #990000">);</span>
<span style="color: #000000">00036:</span>       node <span style="color: #990000">=</span> node<span style="color: #990000">.</span>next<span style="color: #990000">;</span>
<span style="color: #000000">00037:</span>       sep <span style="color: #990000">=</span> <span style="color: #FF0000">";"</span><span style="color: #990000">;</span>
<span style="color: #000000">00038:</span>     <span style="color: #FF0000">}</span>
<span style="color: #000000">00039:</span>     sb<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">append</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"]"</span><span style="color: #990000">);</span>
<span style="color: #000000">00040:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="color: #990000">(</span>sb<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">toString</span></span><span style="color: #990000">());</span>
<span style="color: #000000">00041:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00042:</span> 
<span style="color: #000000">00043:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">long</span> <span style="font-weight: bold"><span style="color: #000000">currentTime</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00044:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> _currentTime<span style="color: #990000">;</span>
<span style="color: #000000">00045:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00046:</span> 
<span style="color: #000000">00047:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">enqueue</span></span><span style="color: #990000">(</span><span style="color: #009900">long</span> waketime<span style="color: #990000">,</span> Agent agent<span style="color: #990000">)</span>
<span style="color: #000000">00048:</span>     <span style="font-weight: bold"><span style="color: #0000FF">throws</span></span> IllegalArgumentException
<span style="color: #000000">00049:</span>   <span style="color: #FF0000">{</span>
<span style="color: #000000">00050:</span>     <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>waketime <span style="color: #990000">&lt;</span> _currentTime<span style="color: #990000">)</span>
<span style="color: #000000">00051:</span>       <span style="font-weight: bold"><span style="color: #0000FF">throw</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">IllegalArgumentException</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00052:</span>     Node prevElement <span style="color: #990000">=</span> _head<span style="color: #990000">;</span>
<span style="color: #000000">00053:</span>     <span style="font-weight: bold"><span style="color: #0000FF">while</span></span> <span style="color: #990000">((</span>prevElement<span style="color: #990000">.</span>next <span style="color: #990000">!=</span> <span style="font-weight: bold"><span style="color: #0000FF">null</span></span><span style="color: #990000">)</span> <span style="color: #990000">&amp;&amp;</span>
<span style="color: #000000">00054:</span>         <span style="color: #990000">(</span>prevElement<span style="color: #990000">.</span>next<span style="color: #990000">.</span>waketime <span style="color: #990000">&lt;=</span> waketime<span style="color: #990000">))</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00055:</span>       prevElement <span style="color: #990000">=</span> prevElement<span style="color: #990000">.</span>next<span style="color: #990000">;</span>
<span style="color: #000000">00056:</span>     <span style="color: #FF0000">}</span>
<span style="color: #000000">00057:</span>     Node newElement <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Node</span></span><span style="color: #990000">(</span>waketime<span style="color: #990000">,</span> agent<span style="color: #990000">,</span> prevElement<span style="color: #990000">.</span>next<span style="color: #990000">);</span>
<span style="color: #000000">00058:</span>     prevElement<span style="color: #990000">.</span>next <span style="color: #990000">=</span> newElement<span style="color: #990000">;</span>
<span style="color: #000000">00059:</span>     _size<span style="color: #990000">++;</span>
<span style="color: #000000">00060:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00061:</span> 
<span style="color: #000000">00062:</span>   Agent <span style="font-weight: bold"><span style="color: #000000">dequeue</span></span><span style="color: #990000">()</span>
<span style="color: #000000">00063:</span>   <span style="color: #FF0000">{</span>
<span style="color: #000000">00064:</span>     <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>_size <span style="color: #990000">&lt;</span> <span style="color: #993399">1</span><span style="color: #990000">)</span>
<span style="color: #000000">00065:</span>       <span style="font-weight: bold"><span style="color: #0000FF">throw</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> java<span style="color: #990000">.</span>util<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">NoSuchElementException</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00066:</span>     Agent rval <span style="color: #990000">=</span> _head<span style="color: #990000">.</span>next<span style="color: #990000">.</span>agent<span style="color: #990000">;</span>
<span style="color: #000000">00067:</span>     _head<span style="color: #990000">.</span>next <span style="color: #990000">=</span> _head<span style="color: #990000">.</span>next<span style="color: #990000">.</span>next<span style="color: #990000">;</span>
<span style="color: #000000">00068:</span>     _size<span style="color: #990000">--;</span>
<span style="color: #000000">00069:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> rval<span style="color: #990000">;</span>
<span style="color: #000000">00070:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00071:</span> 
<span style="color: #000000">00072:</span>   <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">size</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00073:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> _size<span style="color: #990000">;</span>
<span style="color: #000000">00074:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00075:</span> 
<span style="color: #000000">00076:</span>   <span style="color: #009900">boolean</span> <span style="font-weight: bold"><span style="color: #000000">empty</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00077:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #000000">size</span></span><span style="color: #990000">()</span> <span style="color: #990000">==</span> <span style="color: #993399">0</span><span style="color: #990000">;</span>
<span style="color: #000000">00078:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00079:</span> 
<span style="color: #000000">00080:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> duration<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00081:</span>     <span style="color: #009900">long</span> endtime <span style="color: #990000">=</span> _currentTime <span style="color: #990000">+</span> duration<span style="color: #990000">;</span>
<span style="color: #000000">00082:</span>     <span style="font-weight: bold"><span style="color: #0000FF">while</span></span> <span style="color: #990000">((!</span><span style="font-weight: bold"><span style="color: #000000">empty</span></span><span style="color: #990000">())</span> <span style="color: #990000">&amp;&amp;</span> <span style="color: #990000">(</span>_head<span style="color: #990000">.</span>next<span style="color: #990000">.</span>waketime <span style="color: #990000">&lt;=</span> endtime<span style="color: #990000">))</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00083:</span>       _currentTime <span style="color: #990000">=</span> _head<span style="color: #990000">.</span>next<span style="color: #990000">.</span>waketime<span style="color: #990000">;</span>
<span style="color: #000000">00084:</span>       <span style="font-weight: bold"><span style="color: #000000">dequeue</span></span><span style="color: #990000">().</span><span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00085:</span>     <span style="color: #FF0000">}</span>
<span style="color: #000000">00086:</span>     _currentTime <span style="color: #990000">=</span> endtime<span style="color: #990000">;</span>
<span style="color: #000000">00087:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00088:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00089:</span> 
<span style="color: #000000">00090:</span> 
<span style="color: #000000">00091:</span> 
</tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns="">
          Note below how one tests <tt>TimeServer</tt> without any
          "real" agents.  Instead we use <i>Mock Objects</i>.  We also
          saw this in the tests for <tt>CommandHistoryObj</tt>.
          Tools such as 
          <a href="http://www.easymock.org/">easymock</a>
          make this easy.
        </p>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a href="../code/html/agent/TimeServerTEST_java.html">file:TimeServerTEST.java</a> [<a href="../code/src/agent/TimeServerTEST.java">source</a>] [<a href="../code/doc-publicagent/TimeServerTEST.html">doc-public</a>] [<a href="../code/doc-privateagent/TimeServerTEST.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> agent<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> junit<span style="color: #990000">.</span>framework<span style="color: #990000">.</span>Assert<span style="color: #990000">;</span>
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> junit<span style="color: #990000">.</span>framework<span style="color: #990000">.</span>TestCase<span style="color: #990000">;</span>
<span style="color: #000000">00004:</span> 
<span style="color: #000000">00005:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">TimeServerTEST</span> <span style="font-weight: bold"><span style="color: #0000FF">extends</span></span> TestCase <span style="color: #FF0000">{</span>
<span style="color: #000000">00006:</span>   TimeServerQueue q <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">TimeServerQueue</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00007:</span>   <span style="font-style: italic"><span style="color: #9A1900">// TimeServerLinked q = new TimeServerLinked();</span></span>
<span style="color: #000000">00008:</span> 
<span style="color: #000000">00009:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">TimeServerTEST</span></span><span style="color: #990000">(</span>String name<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00010:</span>     <span style="font-weight: bold"><span style="color: #0000FF">super</span></span><span style="color: #990000">(</span>name<span style="color: #990000">);</span>
<span style="color: #000000">00011:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00012:</span> 
<span style="color: #000000">00013:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">testThatEmptySizeIsZero</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00014:</span>     Assert<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">assertEquals</span></span><span style="color: #990000">(</span><span style="color: #993399">0</span><span style="color: #990000">,</span> q<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">size</span></span><span style="color: #990000">());</span>
<span style="color: #000000">00015:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00016:</span> 
<span style="color: #000000">00017:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">testThatDequeueOnEmptyThrowsIndexOutOfBoundsException</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00018:</span>     <span style="color: #009900">boolean</span> exceptionOccurred <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">false</span></span><span style="color: #990000">;</span>
<span style="color: #000000">00019:</span> 
<span style="color: #000000">00020:</span>     <span style="font-weight: bold"><span style="color: #0000FF">try</span></span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00021:</span>       Agent o <span style="color: #990000">=</span> q<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">dequeue</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00022:</span>     <span style="color: #FF0000">}</span> <span style="font-weight: bold"><span style="color: #0000FF">catch</span></span> <span style="color: #990000">(</span>java<span style="color: #990000">.</span>util<span style="color: #990000">.</span>NoSuchElementException e<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00023:</span>       exceptionOccurred <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">true</span></span><span style="color: #990000">;</span>
<span style="color: #000000">00024:</span>     <span style="color: #FF0000">}</span>
<span style="color: #000000">00025:</span> 
<span style="color: #000000">00026:</span>     Assert<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">assertTrue</span></span><span style="color: #990000">(</span>exceptionOccurred<span style="color: #990000">);</span>
<span style="color: #000000">00027:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00028:</span> 
<span style="color: #000000">00029:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">testThatEnqueueFollowedByDequeueReturnsSameReference</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00030:</span>     <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">TestThatEnqueueFollowedByDequeueReturnsSameReference</span>
<span style="color: #000000">00031:</span>       <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Agent
<span style="color: #000000">00032:</span>     <span style="color: #FF0000">{</span>
<span style="color: #000000">00033:</span>       <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{}</span>
<span style="color: #000000">00034:</span>     <span style="color: #FF0000">}</span>
<span style="color: #000000">00035:</span> 
<span style="color: #000000">00036:</span>     Agent x1 <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">TestThatEnqueueFollowedByDequeueReturnsSameReference</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00037:</span>     q<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">enqueue</span></span><span style="color: #990000">(</span><span style="color: #993399">0</span><span style="color: #990000">,</span> x1<span style="color: #990000">);</span>
<span style="color: #000000">00038:</span>     Assert<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">assertSame</span></span><span style="color: #990000">(</span>x1<span style="color: #990000">,</span> q<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">dequeue</span></span><span style="color: #990000">());</span>
<span style="color: #000000">00039:</span>     Assert<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">assertEquals</span></span><span style="color: #990000">(</span><span style="color: #993399">0</span><span style="color: #990000">,</span> q<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">size</span></span><span style="color: #990000">());</span>
<span style="color: #000000">00040:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00041:</span> 
<span style="color: #000000">00042:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">testThatElementsAreInsertedInOrder</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00043:</span>     <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">TestThatElementsAreInsertedInOrder</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Agent <span style="color: #FF0000">{</span>
<span style="color: #000000">00044:</span>       <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{}</span>
<span style="color: #000000">00045:</span>     <span style="color: #FF0000">}</span>
<span style="color: #000000">00046:</span> 
<span style="color: #000000">00047:</span>     Agent x1 <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">TestThatElementsAreInsertedInOrder</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00048:</span>     Agent x2 <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">TestThatElementsAreInsertedInOrder</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00049:</span>     q<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">enqueue</span></span><span style="color: #990000">(</span><span style="color: #993399">0</span><span style="color: #990000">,</span> x2<span style="color: #990000">);</span>
<span style="color: #000000">00050:</span>     q<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">enqueue</span></span><span style="color: #990000">(</span><span style="color: #993399">1</span><span style="color: #990000">,</span> x1<span style="color: #990000">);</span>
<span style="color: #000000">00051:</span>     Assert<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">assertSame</span></span><span style="color: #990000">(</span>x2<span style="color: #990000">,</span> q<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">dequeue</span></span><span style="color: #990000">());</span>
<span style="color: #000000">00052:</span>     Assert<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">assertSame</span></span><span style="color: #990000">(</span>x1<span style="color: #990000">,</span> q<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">dequeue</span></span><span style="color: #990000">());</span>
<span style="color: #000000">00053:</span>     q<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">enqueue</span></span><span style="color: #990000">(</span><span style="color: #993399">1</span><span style="color: #990000">,</span> x1<span style="color: #990000">);</span>
<span style="color: #000000">00054:</span>     q<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">enqueue</span></span><span style="color: #990000">(</span><span style="color: #993399">0</span><span style="color: #990000">,</span> x2<span style="color: #990000">);</span>
<span style="color: #000000">00055:</span>     Assert<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">assertSame</span></span><span style="color: #990000">(</span>x2<span style="color: #990000">,</span> q<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">dequeue</span></span><span style="color: #990000">());</span>
<span style="color: #000000">00056:</span>     Assert<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">assertSame</span></span><span style="color: #990000">(</span>x1<span style="color: #990000">,</span> q<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">dequeue</span></span><span style="color: #990000">());</span>
<span style="color: #000000">00057:</span>     q<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">enqueue</span></span><span style="color: #990000">(</span><span style="color: #993399">0</span><span style="color: #990000">,</span> x1<span style="color: #990000">);</span>
<span style="color: #000000">00058:</span>     q<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">enqueue</span></span><span style="color: #990000">(</span><span style="color: #993399">0</span><span style="color: #990000">,</span> x2<span style="color: #990000">);</span>
<span style="color: #000000">00059:</span>     Assert<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">assertSame</span></span><span style="color: #990000">(</span>x1<span style="color: #990000">,</span> q<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">dequeue</span></span><span style="color: #990000">());</span>
<span style="color: #000000">00060:</span>     Assert<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">assertSame</span></span><span style="color: #990000">(</span>x2<span style="color: #990000">,</span> q<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">dequeue</span></span><span style="color: #990000">());</span>
<span style="color: #000000">00061:</span>     q<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">enqueue</span></span><span style="color: #990000">(</span><span style="color: #993399">0</span><span style="color: #990000">,</span> x2<span style="color: #990000">);</span>
<span style="color: #000000">00062:</span>     q<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">enqueue</span></span><span style="color: #990000">(</span><span style="color: #993399">0</span><span style="color: #990000">,</span> x1<span style="color: #990000">);</span>
<span style="color: #000000">00063:</span>     Assert<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">assertSame</span></span><span style="color: #990000">(</span>x2<span style="color: #990000">,</span> q<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">dequeue</span></span><span style="color: #990000">());</span>
<span style="color: #000000">00064:</span>     Assert<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">assertSame</span></span><span style="color: #990000">(</span>x1<span style="color: #990000">,</span> q<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">dequeue</span></span><span style="color: #990000">());</span>
<span style="color: #000000">00065:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00066:</span> 
<span style="color: #000000">00067:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">testToString</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00068:</span>     <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">TestToString</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Agent <span style="color: #FF0000">{</span>
<span style="color: #000000">00069:</span>       <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{}</span>
<span style="color: #000000">00070:</span>       <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> String <span style="font-weight: bold"><span style="color: #000000">toString</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="color: #FF0000">"x"</span><span style="color: #990000">;</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00071:</span>     <span style="color: #FF0000">}</span>
<span style="color: #000000">00072:</span> 
<span style="color: #000000">00073:</span>     q<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">enqueue</span></span><span style="color: #990000">(</span><span style="color: #993399">0</span><span style="color: #990000">,</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">TestToString</span></span><span style="color: #990000">());</span>
<span style="color: #000000">00074:</span>     q<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">enqueue</span></span><span style="color: #990000">(</span><span style="color: #993399">1</span><span style="color: #990000">,</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">TestToString</span></span><span style="color: #990000">());</span>
<span style="color: #000000">00075:</span>     Assert<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">assertEquals</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"[(0,x);(1,x)]"</span><span style="color: #990000">,</span> q<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">toString</span></span><span style="color: #990000">());</span>
<span style="color: #000000">00076:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00077:</span> 
<span style="color: #000000">00078:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">testCurrentTime</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00079:</span>     <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">TestCurrentTime</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Agent <span style="color: #FF0000">{</span>
<span style="color: #000000">00080:</span>       <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{}</span>
<span style="color: #000000">00081:</span>     <span style="color: #FF0000">}</span>
<span style="color: #000000">00082:</span> 
<span style="color: #000000">00083:</span>     <span style="color: #009900">int</span> expected <span style="color: #990000">=</span> <span style="color: #993399">1230</span><span style="color: #990000">;</span>
<span style="color: #000000">00084:</span>     q<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">enqueue</span></span><span style="color: #990000">(</span>expected<span style="color: #990000">,</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">TestCurrentTime</span></span><span style="color: #990000">());</span>
<span style="color: #000000">00085:</span> 
<span style="color: #000000">00086:</span>     Assert<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">assertEquals</span></span><span style="color: #990000">(</span><span style="color: #993399">0</span><span style="color: #990000">,</span> q<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">currentTime</span></span><span style="color: #990000">());</span>
<span style="color: #000000">00087:</span>     q<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">(</span>expected<span style="color: #990000">);</span>
<span style="color: #000000">00088:</span>     
<span style="color: #000000">00089:</span>     Assert<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">assertEquals</span></span><span style="color: #990000">(</span>expected<span style="color: #990000">,</span> q<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">currentTime</span></span><span style="color: #990000">());</span>
<span style="color: #000000">00090:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00091:</span> 
<span style="color: #000000">00092:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">int</span> _scratch<span style="color: #990000">;</span>
<span style="color: #000000">00093:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">testDoActionsAtOrBefore</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00094:</span>     <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">TestDoActionsAtOrBefore</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Agent <span style="color: #FF0000">{</span>
<span style="color: #000000">00095:</span>       <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">int</span> _myScratch<span style="color: #990000">;</span>
<span style="color: #000000">00096:</span>       <span style="font-weight: bold"><span style="color: #000000">TestDoActionsAtOrBefore</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> myScratch<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00097:</span>         _myScratch <span style="color: #990000">=</span> myScratch<span style="color: #990000">;</span>
<span style="color: #000000">00098:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00099:</span>       <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00100:</span>         _scratch <span style="color: #990000">=</span> _myScratch<span style="color: #990000">;</span>
<span style="color: #000000">00101:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00102:</span>     <span style="color: #FF0000">}</span>
<span style="color: #000000">00103:</span> 
<span style="color: #000000">00104:</span>     <span style="color: #009900">int</span> time1 <span style="color: #990000">=</span> <span style="color: #993399">12</span><span style="color: #990000">;</span>
<span style="color: #000000">00105:</span>     <span style="color: #009900">int</span> time2 <span style="color: #990000">=</span> <span style="color: #993399">23</span><span style="color: #990000">;</span>
<span style="color: #000000">00106:</span>     <span style="color: #009900">int</span> value1 <span style="color: #990000">=</span> <span style="color: #993399">42</span><span style="color: #990000">;</span>
<span style="color: #000000">00107:</span>     <span style="color: #009900">int</span> value2 <span style="color: #990000">=</span> <span style="color: #993399">27</span><span style="color: #990000">;</span>
<span style="color: #000000">00108:</span> 
<span style="color: #000000">00109:</span>     q<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">enqueue</span></span><span style="color: #990000">(</span>time1<span style="color: #990000">,</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">TestDoActionsAtOrBefore</span></span><span style="color: #990000">(</span>value1<span style="color: #990000">));</span>
<span style="color: #000000">00110:</span> 
<span style="color: #000000">00111:</span>     _scratch <span style="color: #990000">=</span> <span style="color: #993399">0</span><span style="color: #990000">;</span>
<span style="color: #000000">00112:</span>     q<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">(</span>time1 <span style="color: #990000">-</span> <span style="color: #993399">1</span><span style="color: #990000">);</span>
<span style="color: #000000">00113:</span>     Assert<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">assertEquals</span></span><span style="color: #990000">(</span><span style="color: #993399">0</span><span style="color: #990000">,</span> _scratch<span style="color: #990000">);</span>
<span style="color: #000000">00114:</span> 
<span style="color: #000000">00115:</span>     _scratch <span style="color: #990000">=</span> <span style="color: #993399">0</span><span style="color: #990000">;</span>
<span style="color: #000000">00116:</span>     q<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">(</span><span style="color: #993399">1</span><span style="color: #990000">);</span>
<span style="color: #000000">00117:</span>     Assert<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">assertEquals</span></span><span style="color: #990000">(</span>value1<span style="color: #990000">,</span> _scratch<span style="color: #990000">);</span>
<span style="color: #000000">00118:</span> 
<span style="color: #000000">00119:</span>     q<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">enqueue</span></span><span style="color: #990000">(</span>time2<span style="color: #990000">,</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">TestDoActionsAtOrBefore</span></span><span style="color: #990000">(</span>value2<span style="color: #990000">));</span>
<span style="color: #000000">00120:</span> 
<span style="color: #000000">00121:</span>     _scratch <span style="color: #990000">=</span> <span style="color: #993399">0</span><span style="color: #990000">;</span>
<span style="color: #000000">00122:</span>     q<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">(</span>time2<span style="color: #990000">);</span>
<span style="color: #000000">00123:</span>     Assert<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">assertEquals</span></span><span style="color: #990000">(</span>value2<span style="color: #990000">,</span> _scratch<span style="color: #990000">);</span>
<span style="color: #000000">00124:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00125:</span> <span style="color: #FF0000">}</span>
</tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
      <p xmlns=""> </p><table xmlns="" width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide017">Simulation: Random numbers</a></span><span style="font-weight: normal"><a href="class-07-017.html"> [17/25] </a></span></td></tr></table><p xmlns=""> </p>
        <p xmlns="">
          To get predictable numbers, use <code>Random(long
          seed)</code>.  If you use the seed every time, you get the
          same series of random numbers.
        </p>
        <a xmlns="" href="http://java.sun.com/javase/6/docs/api/java/util/Random.html">java.util.Random</a>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a href="../code/html/random/Util_java.html">file:random/Util.java</a> [<a href="../code/src/random/Util.java">source</a>] [<a href="../code/doc-public/random/Util.html">doc-public</a>] [<a href="../code/doc-private/random/Util.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> random<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>util<span style="color: #990000">.</span>Random<span style="color: #990000">;</span>
<span style="color: #000000">00003:</span> 
<span style="color: #000000">00004:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">Util</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00005:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #000000">Util</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{}</span>
<span style="color: #000000">00006:</span>   <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> Random _RANDOM <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Random</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00007:</span> 
<span style="color: #000000">00008:</span>   <span style="font-style: italic"><span style="color: #9A1900">/** doubles that differ by less than EPSILON should be considered equals */</span></span>
<span style="color: #000000">00009:</span>   <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #009900">double</span> EPSILON <span style="color: #990000">=</span> <span style="color: #993399">1e-9</span><span style="color: #990000">;</span>
<span style="color: #000000">00010:</span>   <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">boolean</span> <span style="font-weight: bold"><span style="color: #000000">isEquals</span></span><span style="color: #990000">(</span><span style="color: #009900">double</span> x<span style="color: #990000">,</span> <span style="color: #009900">double</span> y<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00011:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> Math<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">abs</span></span><span style="color: #990000">(</span>x<span style="color: #990000">-</span>y<span style="color: #990000">)</span> <span style="color: #990000">&lt;=</span> EPSILON<span style="color: #990000">;</span>
<span style="color: #000000">00012:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00013:</span>   <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">boolean</span> <span style="font-weight: bold"><span style="color: #000000">isLessOrEquals</span></span><span style="color: #990000">(</span><span style="color: #009900">double</span> x<span style="color: #990000">,</span> <span style="color: #009900">double</span> y<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00014:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="color: #990000">(</span>x<span style="color: #990000">-</span>y<span style="color: #990000">)</span> <span style="color: #990000">&lt;=</span> EPSILON<span style="color: #990000">;</span>
<span style="color: #000000">00015:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00016:</span>   <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">boolean</span> <span style="font-weight: bold"><span style="color: #000000">isLess</span></span><span style="color: #990000">(</span><span style="color: #009900">double</span> x<span style="color: #990000">,</span> <span style="color: #009900">double</span> y<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00017:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="color: #990000">(</span>x<span style="color: #990000">-</span>y<span style="color: #990000">)</span> <span style="color: #990000">&lt;</span> <span style="color: #990000">-</span>EPSILON<span style="color: #990000">;</span>
<span style="color: #000000">00018:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00019:</span> 
<span style="color: #000000">00020:</span>   <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">setRandomSeed</span></span><span style="color: #990000">(</span><span style="color: #009900">long</span> seed<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00021:</span>     _RANDOM<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">setSeed</span></span><span style="color: #990000">(</span>seed<span style="color: #990000">);</span>
<span style="color: #000000">00022:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00023:</span>   <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">double</span> <span style="font-weight: bold"><span style="color: #000000">nextRandom</span></span><span style="color: #990000">(</span><span style="color: #009900">double</span> min<span style="color: #990000">,</span> <span style="color: #009900">double</span> max<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00024:</span>     <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>Util<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">isLess</span></span><span style="color: #990000">(</span>max<span style="color: #990000">,</span>min<span style="color: #990000">))</span>
<span style="color: #000000">00025:</span>       <span style="font-weight: bold"><span style="color: #0000FF">throw</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">IllegalArgumentException</span></span><span style="color: #990000">(</span>max <span style="color: #990000">+</span> <span style="color: #FF0000">" is smaller than "</span> <span style="color: #990000">+</span> min<span style="color: #990000">);</span>
<span style="color: #000000">00026:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> min <span style="color: #990000">+</span> <span style="color: #990000">((</span>_RANDOM<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">nextDouble</span></span><span style="color: #990000">())</span> <span style="color: #990000">*</span> <span style="color: #990000">(</span>max <span style="color: #990000">-</span> min<span style="color: #990000">));</span>
<span style="color: #000000">00027:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00028:</span> <span style="color: #FF0000">}</span>
</tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a href="../code/html/random/UtilTEST_java.html">file:random/UtilTEST.java</a> [<a href="../code/src/random/UtilTEST.java">source</a>] [<a href="../code/doc-public/random/UtilTEST.html">doc-public</a>] [<a href="../code/doc-private/random/UtilTEST.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> random<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> 
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> junit<span style="color: #990000">.</span>framework<span style="color: #990000">.</span>Assert<span style="color: #990000">;</span>
<span style="color: #000000">00004:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> junit<span style="color: #990000">.</span>framework<span style="color: #990000">.</span>TestCase<span style="color: #990000">;</span>
<span style="color: #000000">00005:</span> 
<span style="color: #000000">00006:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">UtilTEST</span> <span style="font-weight: bold"><span style="color: #0000FF">extends</span></span> TestCase <span style="color: #FF0000">{</span>
<span style="color: #000000">00007:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">UtilTEST</span></span><span style="color: #990000">(</span>String name<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00008:</span>     <span style="font-weight: bold"><span style="color: #0000FF">super</span></span><span style="color: #990000">(</span>name<span style="color: #990000">);</span>
<span style="color: #000000">00009:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00010:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">testequals</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00011:</span>     Assert<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">assertTrue </span></span><span style="color: #990000">(</span>Util<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">isEquals</span></span><span style="color: #990000">(</span><span style="color: #993399">0.3</span><span style="color: #990000">,</span> <span style="color: #993399">0.3</span><span style="color: #990000">+</span><span style="color: #993399">0.5</span><span style="color: #990000">*</span>Util<span style="color: #990000">.</span>EPSILON<span style="color: #990000">));</span>
<span style="color: #000000">00012:</span>     Assert<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">assertFalse</span></span><span style="color: #990000">(</span>Util<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">isEquals</span></span><span style="color: #990000">(</span><span style="color: #993399">0.3</span><span style="color: #990000">,</span> <span style="color: #993399">0.3</span><span style="color: #990000">+</span><span style="color: #993399">2.0</span><span style="color: #990000">*</span>Util<span style="color: #990000">.</span>EPSILON<span style="color: #990000">));</span>
<span style="color: #000000">00013:</span>     Assert<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">assertFalse</span></span><span style="color: #990000">(</span>Util<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">isLess</span></span><span style="color: #990000">(</span><span style="color: #993399">0.3</span><span style="color: #990000">,</span> <span style="color: #993399">0.3</span><span style="color: #990000">+</span><span style="color: #993399">0.5</span><span style="color: #990000">*</span>Util<span style="color: #990000">.</span>EPSILON<span style="color: #990000">));</span>
<span style="color: #000000">00014:</span>     Assert<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">assertTrue </span></span><span style="color: #990000">(</span>Util<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">isLess</span></span><span style="color: #990000">(</span><span style="color: #993399">0.3</span><span style="color: #990000">,</span> <span style="color: #993399">0.3</span><span style="color: #990000">+</span><span style="color: #993399">2.0</span><span style="color: #990000">*</span>Util<span style="color: #990000">.</span>EPSILON<span style="color: #990000">));</span>
<span style="color: #000000">00015:</span>     Assert<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">assertTrue </span></span><span style="color: #990000">(</span>Util<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">isLessOrEquals</span></span><span style="color: #990000">(</span><span style="color: #993399">0.3</span><span style="color: #990000">,</span> <span style="color: #993399">0.3</span><span style="color: #990000">+</span><span style="color: #993399">0.5</span><span style="color: #990000">*</span>Util<span style="color: #990000">.</span>EPSILON<span style="color: #990000">));</span>
<span style="color: #000000">00016:</span>     Assert<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">assertTrue </span></span><span style="color: #990000">(</span>Util<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">isLessOrEquals</span></span><span style="color: #990000">(</span><span style="color: #993399">0.3</span><span style="color: #990000">,</span> <span style="color: #993399">0.3</span><span style="color: #990000">+</span><span style="color: #993399">2.0</span><span style="color: #990000">*</span>Util<span style="color: #990000">.</span>EPSILON<span style="color: #990000">));</span>
<span style="color: #000000">00017:</span> 
<span style="color: #000000">00018:</span>     Assert<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">assertTrue </span></span><span style="color: #990000">(</span>Util<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">isEquals</span></span><span style="color: #990000">(</span><span style="color: #993399">0.3</span><span style="color: #990000">+</span><span style="color: #993399">0.5</span><span style="color: #990000">*</span>Util<span style="color: #990000">.</span>EPSILON<span style="color: #990000">,</span> <span style="color: #993399">0.3</span><span style="color: #990000">));</span>
<span style="color: #000000">00019:</span>     Assert<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">assertFalse</span></span><span style="color: #990000">(</span>Util<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">isEquals</span></span><span style="color: #990000">(</span><span style="color: #993399">0.3</span><span style="color: #990000">+</span><span style="color: #993399">2.0</span><span style="color: #990000">*</span>Util<span style="color: #990000">.</span>EPSILON<span style="color: #990000">,</span> <span style="color: #993399">0.3</span><span style="color: #990000">));</span>
<span style="color: #000000">00020:</span>     Assert<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">assertFalse</span></span><span style="color: #990000">(</span>Util<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">isLess</span></span><span style="color: #990000">(</span><span style="color: #993399">0.3</span><span style="color: #990000">+</span><span style="color: #993399">0.5</span><span style="color: #990000">*</span>Util<span style="color: #990000">.</span>EPSILON<span style="color: #990000">,</span> <span style="color: #993399">0.3</span><span style="color: #990000">));</span>
<span style="color: #000000">00021:</span>     Assert<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">assertFalse</span></span><span style="color: #990000">(</span>Util<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">isLess</span></span><span style="color: #990000">(</span><span style="color: #993399">0.3</span><span style="color: #990000">+</span><span style="color: #993399">2.0</span><span style="color: #990000">*</span>Util<span style="color: #990000">.</span>EPSILON<span style="color: #990000">,</span> <span style="color: #993399">0.3</span><span style="color: #990000">));</span>
<span style="color: #000000">00022:</span>     Assert<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">assertTrue </span></span><span style="color: #990000">(</span>Util<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">isLessOrEquals</span></span><span style="color: #990000">(</span><span style="color: #993399">0.3</span><span style="color: #990000">+</span><span style="color: #993399">0.5</span><span style="color: #990000">*</span>Util<span style="color: #990000">.</span>EPSILON<span style="color: #990000">,</span> <span style="color: #993399">0.3</span><span style="color: #990000">));</span>
<span style="color: #000000">00023:</span>     Assert<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">assertFalse</span></span><span style="color: #990000">(</span>Util<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">isLessOrEquals</span></span><span style="color: #990000">(</span><span style="color: #993399">0.3</span><span style="color: #990000">+</span><span style="color: #993399">2.0</span><span style="color: #990000">*</span>Util<span style="color: #990000">.</span>EPSILON<span style="color: #990000">,</span> <span style="color: #993399">0.3</span><span style="color: #990000">));</span>
<span style="color: #000000">00024:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00025:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">testrandom</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00026:</span>     <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span><span style="color: #009900">int</span> i<span style="color: #990000">=</span><span style="color: #993399">0</span><span style="color: #990000">;</span> i<span style="color: #990000">&lt;</span><span style="color: #993399">100</span><span style="color: #990000">;</span> i<span style="color: #990000">++)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00027:</span>       <span style="color: #009900">double</span> x<span style="color: #990000">=</span>Util<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">nextRandom</span></span><span style="color: #990000">(</span>i<span style="color: #990000">,</span>i<span style="color: #990000">*</span>i<span style="color: #990000">);</span>
<span style="color: #000000">00028:</span>       Assert<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">assertTrue </span></span><span style="color: #990000">(</span>Util<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">isLessOrEquals</span></span><span style="color: #990000">(</span>i<span style="color: #990000">,</span>x<span style="color: #990000">));</span>
<span style="color: #000000">00029:</span>       Assert<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">assertTrue </span></span><span style="color: #990000">(</span>Util<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">isLessOrEquals</span></span><span style="color: #990000">(</span>x<span style="color: #990000">,</span>i<span style="color: #990000">*</span>i<span style="color: #990000">));</span>
<span style="color: #000000">00030:</span>     <span style="color: #FF0000">}</span>
<span style="color: #000000">00031:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00032:</span> <span style="color: #FF0000">}</span>
</tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
      <p xmlns=""> </p><table xmlns="" width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide018">Project: Car Movement</a></span><span style="font-weight: normal"><a href="class-07-018.html"> [18/25] </a></span></td></tr></table><p xmlns=""> </p>
        <p xmlns="">
          How do cars move?
        </p>
      <p xmlns=""> </p><table xmlns="" width="100%" cellpadding="0" cellspacing="0" class="notes"><tr><td>
        <p>
          Here is a sketch of one solution to the problem of car
          movement.
        </p>

<pre xml:space="preserve"><tt><span style="font-weight: bold"><span style="color: #0000FF">interface</span></span> <span style="color: #009900">CarAcceptor</span> <span style="color: #FF0000">{</span>
  <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">boolean</span> <span style="font-weight: bold"><span style="color: #000000">accept</span></span><span style="color: #990000">(</span>Car c<span style="color: #990000">,</span> <span style="color: #009900">float</span> frontPosition<span style="color: #990000">);</span>
<span style="color: #FF0000">}</span>
<span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">Road</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> CarAcceptor <span style="color: #FF0000">{</span>
  Set cars<span style="color: #990000">;</span>
  <span style="color: #009900">float</span> endPosition<span style="color: #990000">;</span>
  CarAcceptor nextRoad<span style="color: #990000">;</span>
  <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">boolean</span> <span style="font-weight: bold"><span style="color: #000000">accept</span></span><span style="color: #990000">(</span>Car c<span style="color: #990000">,</span> <span style="color: #009900">float</span> frontPosition<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
    cars<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">remove</span></span><span style="color: #990000">(</span>c<span style="color: #990000">);</span>
    <span style="font-weight: bold"><span style="color: #0000FF">if</span></span><span style="color: #990000">(</span>frontPosition<span style="color: #990000">&gt;</span>endPosition<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
      <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> nextRoad<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">accept</span></span><span style="color: #990000">(</span>c<span style="color: #990000">,</span>frontPosition<span style="color: #990000">-</span>endPosition<span style="color: #990000">)</span>
    <span style="color: #FF0000">}</span> <span style="font-weight: bold"><span style="color: #0000FF">else</span></span> <span style="color: #FF0000">{</span>
      c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">setCurrentRoad</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">);</span>
      c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">setFrontPosition</span></span><span style="color: #990000">(</span>frontPosition<span style="color: #990000">);</span>
      cars<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">add</span></span><span style="color: #990000">(</span>c<span style="color: #990000">);</span>
      <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">true</span></span><span style="color: #990000">;</span>
    <span style="color: #FF0000">}</span>
  <span style="color: #FF0000">}</span>
<span style="color: #FF0000">}</span>

<span style="font-weight: bold"><span style="color: #0000FF">interface</span></span> <span style="color: #009900">Agent</span> <span style="color: #FF0000">{</span>
  <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">run </span></span><span style="color: #990000">();</span>
<span style="color: #FF0000">}</span>
<span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">Car</span> implents Agent <span style="color: #FF0000">{</span>
  <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">int</span> sleepSeconds<span style="color: #990000">;</span>
  <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">float</span> frontPosition<span style="color: #990000">;</span>
  <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> Road currentRoad<span style="color: #990000">;</span>
  <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> TimeServer agents<span style="color: #990000">;</span>
  <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
    <span style="font-style: italic"><span style="color: #9A1900">// calculate newFrontPosition</span></span>
    <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>currentRoad<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">accept</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">,</span> newFrontPosition<span style="color: #990000">))</span>
       agents<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">add</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">,</span> Agents<span style="color: #990000">.</span>currentTime<span style="color: #990000">+</span>sleepSeconds<span style="color: #990000">);</span>
  <span style="color: #FF0000">}</span>
  <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">setCurrentRoad</span></span><span style="color: #990000">(...)</span> <span style="color: #990000">...</span> <span style="font-style: italic"><span style="color: #9A1900">// for Road</span></span>
  <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">setFrontPosition</span></span><span style="color: #990000">(...)</span> <span style="color: #990000">...</span> <span style="font-style: italic"><span style="color: #9A1900">// for Road</span></span>
<span style="color: #FF0000">}</span>
</tt></pre>

        <p>
          Here is a sketch of how to compute the distance to the
          closest obstacle.
          A simple example:
        </p>
        <p>
          r1 feeds into r2.  Both are 100m long.
          c1 and c2 have frontPosition at 70m and 20m on the repspective roads. Both are 10m long.
          So distance from c1 to obstacle should be 40m.
        </p>
<pre xml:space="preserve">
c1 ---distanceToObstacle(70)---&gt; r1
                                 r1 ---distanceToObstacle(-30)--&gt; r2
                                                                  r2 ---backPosition()--&gt; c2
                                                                  r2 &lt; - - - - - - 10 - - c2
                                 r1 &lt; - - - - - - - - - - - 40 -  r2
c1 &lt; - - - - - - - - - - 40 - -  r1
</pre>
<p>
The following code is not debugged, but that is what is intended to do:
</p>

<pre xml:space="preserve"><tt><span style="font-weight: bold"><span style="color: #0000FF">interface</span></span> <span style="color: #009900">CarAcceptor</span> <span style="color: #FF0000">{</span> <span style="color: #990000">...</span>
  <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">double</span> <span style="font-weight: bold"><span style="color: #000000">distanceToObstacle</span></span><span style="color: #990000">(</span><span style="color: #009900">double</span> fromPosition<span style="color: #990000">);</span>
<span style="color: #FF0000">}</span>
<span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">Sink</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> CarAcceptor <span style="color: #FF0000">{</span>
  <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">double</span> <span style="font-weight: bold"><span style="color: #000000">distanceToObstacle</span></span><span style="color: #990000">(</span><span style="color: #009900">double</span> fromPosition<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
    <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> Double<span style="color: #990000">.</span>POSITIVE_INFINITY<span style="color: #990000">;</span>
  <span style="color: #FF0000">}</span>
<span style="color: #FF0000">}</span>
<span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">Road</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> CarAcceptor <span style="color: #FF0000">{</span>
  Set cars<span style="color: #990000">;</span>
  CarAcceptor nextRoad<span style="color: #990000">;</span>
  <span style="color: #009900">double</span> endPosition<span style="color: #990000">;</span>
  <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">double</span> <span style="font-weight: bold"><span style="color: #000000">distanceToCarBack</span></span><span style="color: #990000">(</span><span style="color: #009900">double</span> fromPosition<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
    <span style="color: #009900">double</span> carBackPosition <span style="color: #990000">=</span> Double<span style="color: #990000">.</span>POSITIVE_INFINITY<span style="color: #990000">;</span>
    <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span>Car c <span style="color: #990000">:</span> cars<span style="color: #990000">)</span>
      <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">backPosition</span></span><span style="color: #990000">()</span> <span style="color: #990000">&gt;=</span> fromPosition <span style="color: #990000">&amp;&amp;</span>
          c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">backPosition</span></span><span style="color: #990000">()</span> <span style="color: #990000">&lt;</span> carBackPosition<span style="color: #990000">)</span>
         carBackPosition <span style="color: #990000">=</span> c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">backPosition</span></span><span style="color: #990000">();</span>
    <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> carBackPosition<span style="color: #990000">;</span>
  <span style="color: #FF0000">}</span>
  <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">double</span> <span style="font-weight: bold"><span style="color: #000000">distanceToObstacle</span></span><span style="color: #990000">(</span><span style="color: #009900">double</span> fromPosition<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
    <span style="color: #009900">double</span> obstaclePosition <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">distanceToCarBack</span></span><span style="color: #990000">(</span>fromPosition<span style="color: #990000">);</span>
    <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>obstaclePosition <span style="color: #990000">==</span> Double<span style="color: #990000">.</span>POSITIVE_INFINITY<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
      <span style="color: #009900">double</span> distanceToEnd <span style="color: #990000">=</span> fromPosition<span style="color: #990000">-</span><span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">.</span>endPosition<span style="color: #990000">;</span>
      obstaclePosition 
        <span style="color: #990000">=</span> nextRoad<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">distanceToObstacle</span></span><span style="color: #990000">(</span>fromPosition<span style="color: #990000">-</span><span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">.</span>endPosition<span style="color: #990000">);</span>
    <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> obstaclePosition<span style="color: #990000">-</span>fromPosition<span style="color: #990000">;</span>
  <span style="color: #FF0000">}</span>
<span style="color: #FF0000">}</span>
<span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">Car</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Agent <span style="color: #FF0000">{</span>
  <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">double</span> length<span style="color: #990000">;</span>
  <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">double</span> frontPosition<span style="color: #990000">;</span>
  <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">double</span> velocity<span style="color: #990000">;</span>
  <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> Road currentRoad<span style="color: #990000">;</span>
  <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
    <span style="font-style: italic"><span style="color: #9A1900">// find closest obstacle</span></span>
    <span style="font-style: italic"><span style="color: #9A1900">// calculate newVelocity</span></span>
    <span style="font-style: italic"><span style="color: #9A1900">// calculate newFrontPosition</span></span>
  <span style="color: #FF0000">}</span>
  <span style="color: #009900">double</span> <span style="font-weight: bold"><span style="color: #000000">backPosition</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
    <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> frontPosition<span style="color: #990000">-</span>length<span style="color: #990000">;</span>
  <span style="color: #FF0000">}</span>
<span style="color: #FF0000">}</span>
</tt></pre>

      </td></tr></table><p xmlns=""> </p><table xmlns="" width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide019">Project: Lights</a></span><span style="font-weight: normal"><a href="class-07-019.html"> [19/25] </a></span></td></tr></table><p xmlns=""> </p>
        <p xmlns="">
          Now, how do you add lights to this?
        </p>
        <p xmlns="">
          Think first about a stoplight that sits just between two road segments
          (no intersection).
        </p>
        <p xmlns="">
          One idea:
        </p>

<pre xmlns="" xml:space="preserve"><tt><span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">Light</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> CarAcceptor <span style="color: #FF0000">{</span>
  <span style="color: #FF0000">{</span>GREEN<span style="color: #990000">,</span>RED<span style="color: #FF0000">}</span> state<span style="color: #990000">;</span>
  CarAcceptor nextRoad<span style="color: #990000">;</span>
  <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">double</span> <span style="font-weight: bold"><span style="color: #000000">distanceToObstacle</span></span><span style="color: #990000">(</span><span style="color: #009900">double</span> fromPosition<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
    <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> state<span style="color: #990000">==</span>GREEN
      <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> nextRoad<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">distanceToObstacle</span></span><span style="color: #990000">(</span>fromPosition<span style="color: #990000">);</span>
    <span style="font-weight: bold"><span style="color: #0000FF">else</span></span>
      <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="color: #993399">0</span><span style="color: #990000">;</span>
  <span style="color: #FF0000">}</span>
  <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">setState</span></span><span style="color: #990000">(...)</span> <span style="font-style: italic"><span style="color: #9A1900">// set the state</span></span>
<span style="color: #FF0000">}</span>
</tt></pre>

        <p xmlns="">
          Then set up the objects as follows:
        </p>
<pre xmlns="" xml:space="preserve">
CarGenerator -&gt; Road1 -&gt; Light -&gt; Road2 -&gt; Sink
</pre>
        <p xmlns="">
          How do you coordinate two lights then?
        </p>
        <p xmlns="">
          One idea:
        </p>

<pre xmlns="" xml:space="preserve"><tt><span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">TwoWayLightController</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Agent <span style="color: #FF0000">{</span>
   Light<span style="color: #990000">[]</span> lights<span style="color: #990000">;</span>
   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
     <span style="font-style: italic"><span style="color: #9A1900">// change the state of lights...</span></span>
   <span style="color: #FF0000">}</span>
<span style="color: #FF0000">}</span>
</tt></pre>

      <p xmlns=""> </p><table xmlns="" width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide020">Project: Creating the road graph</a></span><span style="font-weight: normal"><a href="class-07-020.html"> [20/25] </a></span></td></tr></table><p xmlns=""> </p>
        <p xmlns="">The instructions call for an object graph
          like this:
        </p>
<pre xmlns="" xml:space="preserve">
          30     40
          |      |
          31     41
          |      |
  10--11--A--13--B--15--16
          |      |
          33     43
          |      |
  20--21--C--23--D--25--26
          |      |
          35     45
          |      |
          36     46
</pre>

        <p xmlns="">
          Here traffic goes left to right and top to bottom.
        </p>
        <ul xmlns="">
          <li>10/20/30/40 are generators.</li>
          <li>16/26/36/46 are sinks.</li>
          <li>11/21/32/42 and 13/23/33/43 and 15/25/35/45 are Roads.</li>
          <li>A/B/C/D are intersections.</li>
        </ul>
        <p xmlns="">
          The object graph you build will look like this:
        </p>
<pre xmlns="" xml:space="preserve">
CarGen10 -&gt; Road11 -&gt; Light12 -&gt; Road13 -&gt; Light14 -&gt; Road15 -&gt; Sink16

CarGen20 -&gt; Road21 -&gt; Light22 -&gt; Road23 -&gt; Light24 -&gt; Road25 -&gt; Sink26

CarGen30 -&gt; Road31 -&gt; Light32 -&gt; Road33 -&gt; Light34 -&gt; Road35 -&gt; Sink36

CarGen40 -&gt; Road41 -&gt; Light42 -&gt; Road43 -&gt; Light44 -&gt; Road45 -&gt; Sink46

      Light12 &lt;- LightControllerA -&gt; Light32

      Light12 &lt;- LightControllerB -&gt; Light42

      Light22 &lt;- LightControllerC -&gt; Light35

      Light22 &lt;- LightControllerD -&gt; Light45
</pre>
        <p xmlns="">
          How do you put all this together?
        </p>
      <p xmlns=""> </p><table xmlns="" width="100%" cellpadding="0" cellspacing="0" class="notes"><tr><td>
<pre xml:space="preserve">
Details will vary from person to person,
so you have to be able to think abstractly and adapt from someone
else's comments to see if anything applies to your own code.  

Suppose we have just two roads and no lights, then the object graph is
likely to look something like:

 r1 --&gt; r3

that is, road 1 has a link to road 2.  In the code this will be a
field, perhaps called "next".  In r3, the next field will be null.
You can create this graph by doing something like this:

 Road r3 = new Road(null);
 Road r1 = new Road(r3);

where the code looks like:

 interface CarAcceptor { ... }
 class Road implements CarAcceptor { CarAcceptor next; ... }

Note that you create the segments "backwards".  Each road needs to
know about the road after it, so you create them in reverse order.

If we use a null object for the sink we get:

 r1 --&gt; r3 --&gt; k4

which you might create like this:

 Sink k4 = new Sink()
 Road r3 = new Road(k4)
 Road r1 = new Road(r3)

Finally, you might add a car generator, or Source:

 s0 --&gt; r1 --&gt; r3 --&gt; k4

 Sink k4 = new Sink()
 Road r3 = new Road(k4)
 Road r1 = new Road(r3)
 Source s0 = new Source(r1)

You expect the code to be something like:

 interface CarAcceptor { ... }
 class Sink implements CarAcceptor { ... }
 class Road implements CarAcceptor { CarAcceptor next; ... }

 interface Agent { ... }
 class Source implements Agent { CarAcceptor first; ... }

If you add a light as I discussed in class, you might have:

 s0 --&gt; r1 --&gt; l2 --&gt; r3 --&gt; k4

 Sink k4 = new Sink()
 Road r3 = new Road(k4)
 Light l2 = new Light(r3)
 LightController c2 = new LightController(l2)
 Road r1 = new Road(r3)
 Source s0 = new Source(r1)

with code along the lines of:

 interface CarAcceptor { ... }
 class Sink implements CarAcceptor { ... }
 class Road implements CarAcceptor { CarAcceptor next; ... }
 class Light implements CarAcceptor { CarAcceptor next; ... }

 interface Agent { ... }
 class Source implements Agent { CarAcceptor first; ... }
 class LightController implements Agent { Light theLight; ... }

Having a LightController hooked up to two lights is an exercise, for
once you get this working.
</pre>
	<p>
          Here is an example of code I put out last year.
        </p>
        <p>
          In main.Main you are going to need to do all the wiring.
          Something like this should work (not debugged!).
        </p>

<pre xml:space="preserve"><tt>CarGen <span style="font-weight: bold"><span style="color: #000000">makeSegment</span></span><span style="color: #990000">(</span>LightController<span style="color: #990000">[]</span> lc<span style="color: #990000">,</span> Direction d<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
  CarAcceptor next <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Road</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Sink</span></span><span style="color: #990000">());</span>
  <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span><span style="color: #009900">int</span> i <span style="color: #990000">=</span> <span style="color: #993399">0</span><span style="color: #990000">;</span> i<span style="color: #990000">&lt;</span>lc<span style="color: #990000">.</span>size<span style="color: #990000">;</span> i<span style="color: #990000">++)</span> <span style="color: #FF0000">{</span>
     Light l <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Light</span></span><span style="color: #990000">(</span>next<span style="color: #990000">);</span>
     lc<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">setLight</span></span><span style="color: #990000">(</span>l<span style="color: #990000">,</span>d<span style="color: #990000">);</span>
     next <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Road</span></span><span style="color: #990000">(</span>l<span style="color: #990000">);</span>
  <span style="color: #FF0000">}</span>
  <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">CarGen</span></span><span style="color: #990000">(</span>next<span style="color: #990000">);</span>
<span style="color: #FF0000">}</span>
<span style="font-style: italic"><span style="color: #9A1900">// rotate a 2D array</span></span>
LightController<span style="color: #990000">[][]</span> <span style="font-weight: bold"><span style="color: #000000">rotate </span></span><span style="color: #990000">(</span>LightController<span style="color: #990000">[][]</span> orig<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
  LightController<span style="color: #990000">[][]</span> value <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> LightController<span style="color: #990000">[</span>orig<span style="color: #990000">[</span><span style="color: #993399">0</span><span style="color: #990000">].</span>size<span style="color: #990000">][</span>orig<span style="color: #990000">.</span>size<span style="color: #990000">];</span>
  <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span>i<span style="color: #990000">...)</span>
    <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span>j<span style="color: #990000">...)</span>
      value<span style="color: #990000">[</span>i<span style="color: #990000">][</span>j<span style="color: #990000">]</span> <span style="color: #990000">=</span> orig<span style="color: #990000">[</span>j<span style="color: #990000">][</span>i<span style="color: #990000">];</span>
<span style="color: #FF0000">}</span>
<span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">makeSquareGrid</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> size<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
  LightController<span style="color: #990000">[][]</span> eastWest <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> LightController<span style="color: #990000">[</span>size<span style="color: #990000">][</span>size<span style="color: #990000">];</span>
  <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span><span style="color: #009900">int</span> i <span style="color: #990000">=</span> <span style="color: #993399">0</span><span style="color: #990000">;</span> i <span style="color: #990000">&lt;</span> size<span style="color: #990000">;</span> i<span style="color: #990000">++)</span> <span style="color: #FF0000">{</span>
    <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span><span style="color: #009900">int</span> j <span style="color: #990000">=</span> <span style="color: #993399">0</span><span style="color: #990000">;</span> j <span style="color: #990000">&lt;</span> size<span style="color: #990000">;</span> j<span style="color: #990000">++)</span> <span style="color: #FF0000">{</span>
      eastWest<span style="color: #990000">[</span>i<span style="color: #990000">][</span>j<span style="color: #990000">]</span> <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">LightController</span></span><span style="color: #990000">();</span>
      TimeServer<span style="color: #990000">.</span>instance<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">add</span></span><span style="color: #990000">(</span>eastWest<span style="color: #990000">[</span>i<span style="color: #990000">][</span>j<span style="color: #990000">]);</span>
    <span style="color: #FF0000">}</span>
  <span style="color: #FF0000">}</span>
  LightController<span style="color: #990000">[][]</span> northSouth <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #000000">rotate</span></span><span style="color: #990000">(</span>eastWest<span style="color: #990000">);</span>
  <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span><span style="color: #009900">int</span> i <span style="color: #990000">=</span> <span style="color: #993399">0</span><span style="color: #990000">;</span> i <span style="color: #990000">&lt;</span> size<span style="color: #990000">;</span> i<span style="color: #990000">++)</span> <span style="color: #FF0000">{</span>
    TimeServer<span style="color: #990000">.</span>instance<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">add</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #000000">makeSegment</span></span><span style="color: #990000">(</span>eastWest<span style="color: #990000">[</span>i<span style="color: #990000">],</span> Direction<span style="color: #990000">.</span>EASTWEST<span style="color: #990000">));</span>
    TimeServer<span style="color: #990000">.</span>instance<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">add</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #000000">makeSegment</span></span><span style="color: #990000">(</span>northSouth<span style="color: #990000">[</span>i<span style="color: #990000">],</span> Direction<span style="color: #990000">.</span>NORTHSOUTH<span style="color: #990000">));</span>
  <span style="color: #FF0000">}</span>
<span style="color: #FF0000">}</span>
</tt></pre>

      </td></tr></table><p xmlns=""> </p><table xmlns="" width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide021">Animation: Overview</a></span><span style="font-weight: normal"><a href="class-07-021.html"> [21/25] </a></span></td></tr></table><p xmlns=""> </p>
        <p xmlns="">
          The code presents a rough framework for
          animation/visualization.  I have written the code to handle
          geometry problems similar to those of the project.  You
          should be able to use the animator package unchanged.  You
          will need to make some (small) changes to the visualizer.
          Of course, you will need to replace the model and main
          packages entirely.
        </p>
        <p xmlns="">
          Note that this code does not solve the problem put forth by
          the project.  This is just a bunch of lines with bouncing
          dots...  
        </p>
        <p xmlns="">
          To get the code, download
          <a href="../code/se450source.zip">file:se450source.zip</a>.  Unzip
          it, then run:
        </p>
<pre xmlns="" xml:space="preserve">
ant
java -cp build\se450.jar project.main.Main
</pre>

        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a href="../code/html/project/main/Main_java.html">file:Main.java</a> [<a href="../code/src/project/main/Main.java">source</a>] [<a href="../code/doc-publicproject/main/Main.html">doc-public</a>] [<a href="../code/doc-privateproject/main/Main.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> project<span style="color: #990000">.</span>main<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> 
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> project<span style="color: #990000">.</span>model<span style="color: #990000">.</span>Model<span style="color: #990000">;</span>
<span style="color: #000000">00004:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> project<span style="color: #990000">.</span>model<span style="color: #990000">.</span>AnimatorBuilder<span style="color: #990000">;</span>
<span style="color: #000000">00005:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> project<span style="color: #990000">.</span>model<span style="color: #990000">.</span>swing<span style="color: #990000">.</span>SwingAnimatorBuilder<span style="color: #990000">;</span>
<span style="color: #000000">00006:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> project<span style="color: #990000">.</span>model<span style="color: #990000">.</span>text<span style="color: #990000">.</span>TextAnimatorBuilder<span style="color: #990000">;</span>
<span style="color: #000000">00007:</span> 
<span style="color: #000000">00008:</span> <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00009:</span> <span style="font-style: italic"><span style="color: #9A1900"> * A static class to demonstrate the visualization aspect of</span></span>
<span style="color: #000000">00010:</span> <span style="font-style: italic"><span style="color: #9A1900"> * simulation.</span></span>
<span style="color: #000000">00011:</span> <span style="font-style: italic"><span style="color: #9A1900"> */</span></span>
<span style="color: #000000">00012:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">Main</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00013:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #000000">Main</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{}</span>
<span style="color: #000000">00014:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">main</span></span><span style="color: #990000">(</span>String<span style="color: #990000">[]</span> args<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00015:</span>     <span style="color: #FF0000">{</span>
<span style="color: #000000">00016:</span>       Model m <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Model</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">TextAnimatorBuilder</span></span><span style="color: #990000">(),</span> <span style="color: #993399">0</span><span style="color: #990000">,</span> <span style="color: #993399">1</span><span style="color: #990000">);</span>
<span style="color: #000000">00017:</span>       m<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">(</span><span style="color: #993399">10</span><span style="color: #990000">);</span>
<span style="color: #000000">00018:</span>       m<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">dispose</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00019:</span>     <span style="color: #FF0000">}</span>
<span style="color: #000000">00020:</span>     <span style="color: #FF0000">{</span>
<span style="color: #000000">00021:</span>       Model m <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Model</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">SwingAnimatorBuilder</span></span><span style="color: #990000">(),</span> <span style="color: #993399">0</span><span style="color: #990000">,</span> <span style="color: #993399">1</span><span style="color: #990000">);</span>
<span style="color: #000000">00022:</span>       m<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">(</span><span style="color: #993399">10</span><span style="color: #990000">);</span>
<span style="color: #000000">00023:</span>       m<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">dispose</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00024:</span>     <span style="color: #FF0000">}</span>
<span style="color: #000000">00025:</span>     <span style="color: #FF0000">{</span>
<span style="color: #000000">00026:</span>       Model m <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Model</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">TextAnimatorBuilder</span></span><span style="color: #990000">(),</span> <span style="color: #993399">1</span><span style="color: #990000">,</span> <span style="color: #993399">1</span><span style="color: #990000">);</span>
<span style="color: #000000">00027:</span>       m<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">(</span><span style="color: #993399">10</span><span style="color: #990000">);</span>
<span style="color: #000000">00028:</span>       m<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">dispose</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00029:</span>     <span style="color: #FF0000">}</span>
<span style="color: #000000">00030:</span>     <span style="color: #FF0000">{</span>
<span style="color: #000000">00031:</span>       Model m <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Model</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">SwingAnimatorBuilder</span></span><span style="color: #990000">(),</span> <span style="color: #993399">1</span><span style="color: #990000">,</span> <span style="color: #993399">1</span><span style="color: #990000">);</span>
<span style="color: #000000">00032:</span>       m<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">(</span><span style="color: #993399">10</span><span style="color: #990000">);</span>
<span style="color: #000000">00033:</span>       m<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">dispose</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00034:</span>     <span style="color: #FF0000">}</span>
<span style="color: #000000">00035:</span>     <span style="color: #FF0000">{</span>
<span style="color: #000000">00036:</span>       Model m <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Model</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">SwingAnimatorBuilder</span></span><span style="color: #990000">(),</span> <span style="color: #993399">2</span><span style="color: #990000">,</span> <span style="color: #993399">3</span><span style="color: #990000">);</span>
<span style="color: #000000">00037:</span>       m<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">(</span><span style="color: #993399">500</span><span style="color: #990000">);</span>
<span style="color: #000000">00038:</span>       m<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">(</span><span style="color: #993399">500</span><span style="color: #990000">);</span>
<span style="color: #000000">00039:</span>       m<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">dispose</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00040:</span>     <span style="color: #FF0000">}</span>
<span style="color: #000000">00041:</span>     System<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">exit</span></span><span style="color: #990000">(</span><span style="color: #993399">0</span><span style="color: #990000">);</span>
<span style="color: #000000">00042:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00043:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00044:</span> 
</tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
      <p xmlns=""> </p><table xmlns="" width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide022">Animation: Model</a></span><span style="font-weight: normal"><a href="class-07-022.html"> [22/25] </a></span></td></tr></table><p xmlns=""> </p>
        <p xmlns="">
          Package documentation: <a href="../code/doc-public/project/model/package-summary.html">project.model</a> [<a href="../code/doc-private/project/model/package-summary.html">private</a>]
          <a href="../code/doc-public/project/util/package-summary.html">project.util</a> [<a href="../code/doc-private/project/util/package-summary.html">private</a>]
        </p>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a href="../code/html/project/model/MP_java.html">file:MP.java</a> [<a href="../code/src/project/model/MP.java">source</a>] [<a href="../code/doc-publicproject/model/MP.html">doc-public</a>] [<a href="../code/doc-privateproject/model/MP.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> project<span style="color: #990000">.</span>model<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> 
<span style="color: #000000">00003:</span> <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00004:</span> <span style="font-style: italic"><span style="color: #9A1900"> * Static class for model parameters.</span></span>
<span style="color: #000000">00005:</span> <span style="font-style: italic"><span style="color: #9A1900"> */</span></span>
<span style="color: #000000">00006:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">MP</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00007:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #000000">MP</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{}</span>
<span style="color: #000000">00008:</span>   <span style="font-style: italic"><span style="color: #9A1900">/** Length of cars, in meters */</span></span>
<span style="color: #000000">00009:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">double</span> carLength <span style="color: #990000">=</span> <span style="color: #993399">10</span><span style="color: #990000">;</span>
<span style="color: #000000">00010:</span>   <span style="font-style: italic"><span style="color: #9A1900">/** Length of roads, in meters */</span></span>
<span style="color: #000000">00011:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">double</span> roadLength <span style="color: #990000">=</span> <span style="color: #993399">200</span><span style="color: #990000">;</span>
<span style="color: #000000">00012:</span>   <span style="font-style: italic"><span style="color: #9A1900">/** Maximum car velocity, in meters/second */</span></span>
<span style="color: #000000">00013:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">double</span> maxVelocity <span style="color: #990000">=</span> <span style="color: #993399">6</span><span style="color: #990000">;</span>
<span style="color: #000000">00014:</span> <span style="color: #FF0000">}</span>  
<span style="color: #000000">00015:</span> 
</tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a href="../code/html/project/model/Model_java.html">file:Model.java</a> [<a href="../code/src/project/model/Model.java">source</a>] [<a href="../code/doc-publicproject/model/Model.html">doc-public</a>] [<a href="../code/doc-privateproject/model/Model.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> project<span style="color: #990000">.</span>model<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> 
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>util<span style="color: #990000">.</span>List<span style="color: #990000">;</span>
<span style="color: #000000">00004:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>util<span style="color: #990000">.</span>ArrayList<span style="color: #990000">;</span>
<span style="color: #000000">00005:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>util<span style="color: #990000">.</span>Observable<span style="color: #990000">;</span>
<span style="color: #000000">00006:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>util<span style="color: #990000">.</span>Observer<span style="color: #990000">;</span>
<span style="color: #000000">00007:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> project<span style="color: #990000">.</span>util<span style="color: #990000">.</span>Animator<span style="color: #990000">;</span>
<span style="color: #000000">00008:</span> 
<span style="color: #000000">00009:</span> <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00010:</span> <span style="font-style: italic"><span style="color: #9A1900"> * An example to model for a simple visualization.</span></span>
<span style="color: #000000">00011:</span> <span style="font-style: italic"><span style="color: #9A1900"> * The model contains roads organized in a matrix.</span></span>
<span style="color: #000000">00012:</span> <span style="font-style: italic"><span style="color: #9A1900"> * See {</span></span><span style="color: #009900">@link</span><span style="font-style: italic"><span style="color: #9A1900"> #Model(AnimatorBuilder, int, int)}.</span></span>
<span style="color: #000000">00013:</span> <span style="font-style: italic"><span style="color: #9A1900"> */</span></span>
<span style="color: #000000">00014:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">Model</span> <span style="font-weight: bold"><span style="color: #0000FF">extends</span></span> Observable <span style="color: #FF0000">{</span>
<span style="color: #000000">00015:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> List<span style="color: #990000">&lt;</span>Agent<span style="color: #990000">&gt;</span> _agents<span style="color: #990000">;</span>
<span style="color: #000000">00016:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> Animator _animator<span style="color: #990000">;</span>
<span style="color: #000000">00017:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">boolean</span> _disposed<span style="color: #990000">;</span>
<span style="color: #000000">00018:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">double</span> _time<span style="color: #990000">;</span>
<span style="color: #000000">00019:</span> 
<span style="color: #000000">00020:</span>   <span style="font-style: italic"><span style="color: #9A1900">/** Creates a model to be visualized using the </span></span><span style="font-weight: bold"><span style="color: #0000FF">&lt;code&gt;</span></span><span style="font-style: italic"><span style="color: #9A1900">builder</span></span><span style="font-weight: bold"><span style="color: #0000FF">&lt;/code&gt;</span></span><span style="font-style: italic"><span style="color: #9A1900">.</span></span>
<span style="color: #000000">00021:</span> <span style="font-style: italic"><span style="color: #9A1900">   *  If the builder is null, no visualization is performed.</span></span>
<span style="color: #000000">00022:</span> <span style="font-style: italic"><span style="color: #9A1900">   *  The number of </span></span><span style="font-weight: bold"><span style="color: #0000FF">&lt;code&gt;</span></span><span style="font-style: italic"><span style="color: #9A1900">rows</span></span><span style="font-weight: bold"><span style="color: #0000FF">&lt;/code&gt;</span></span><span style="font-style: italic"><span style="color: #9A1900"> and </span></span><span style="font-weight: bold"><span style="color: #0000FF">&lt;code&gt;</span></span><span style="font-style: italic"><span style="color: #9A1900">columns</span></span><span style="font-weight: bold"><span style="color: #0000FF">&lt;/code&gt;</span></span>
<span style="color: #000000">00023:</span> <span style="font-style: italic"><span style="color: #9A1900">   *  indicate the number of {</span></span><span style="color: #009900">@link</span><span style="font-style: italic"><span style="color: #9A1900"> Light}s, organized as a 2D</span></span>
<span style="color: #000000">00024:</span> <span style="font-style: italic"><span style="color: #9A1900">   *  matrix.  These are separated and surrounded by horizontal and</span></span>
<span style="color: #000000">00025:</span> <span style="font-style: italic"><span style="color: #9A1900">   *  vertical {</span></span><span style="color: #009900">@link</span><span style="font-style: italic"><span style="color: #9A1900"> Road}s.  For example, calling the constructor with 1</span></span>
<span style="color: #000000">00026:</span> <span style="font-style: italic"><span style="color: #9A1900">   *  row and 2 columns generates a model of the form:</span></span>
<span style="color: #000000">00027:</span> <span style="font-style: italic"><span style="color: #9A1900">   *  </span></span><span style="font-weight: bold"><span style="color: #0000FF">&lt;pre&gt;</span></span>
<span style="color: #000000">00028:</span> <span style="font-style: italic"><span style="color: #9A1900">   *     |  |</span></span>
<span style="color: #000000">00029:</span> <span style="font-style: italic"><span style="color: #9A1900">   *   </span></span><span style="text-decoration: underline"><span style="color: #0000FF">--@--</span></span><span style="font-style: italic"><span style="color: #9A1900">@--</span></span>
<span style="color: #000000">00030:</span> <span style="font-style: italic"><span style="color: #9A1900">   *     |  |</span></span>
<span style="color: #000000">00031:</span> <span style="font-style: italic"><span style="color: #9A1900">   *  </span></span><span style="font-weight: bold"><span style="color: #0000FF">&lt;/pre&gt;</span></span>
<span style="color: #000000">00032:</span> <span style="font-style: italic"><span style="color: #9A1900">   *  where </span></span><span style="font-weight: bold"><span style="color: #0000FF">&lt;code&gt;</span></span><span style="font-style: italic"><span style="color: #9A1900">@</span></span><span style="font-weight: bold"><span style="color: #0000FF">&lt;/code&gt;</span></span><span style="font-style: italic"><span style="color: #9A1900"> is a {</span></span><span style="color: #009900">@link</span><span style="font-style: italic"><span style="color: #9A1900"> Light}, </span></span><span style="font-weight: bold"><span style="color: #0000FF">&lt;code&gt;</span></span><span style="font-style: italic"><span style="color: #9A1900">|</span></span><span style="font-weight: bold"><span style="color: #0000FF">&lt;/code&gt;</span></span><span style="font-style: italic"><span style="color: #9A1900"> is a</span></span>
<span style="color: #000000">00033:</span> <span style="font-style: italic"><span style="color: #9A1900">   *  vertical {</span></span><span style="color: #009900">@link</span><span style="font-style: italic"><span style="color: #9A1900"> Road} and </span></span><span style="font-weight: bold"><span style="color: #0000FF">&lt;code&gt;</span></span><span style="font-style: italic"><span style="color: #9A1900">--</span></span><span style="font-weight: bold"><span style="color: #0000FF">&lt;/code&gt;</span></span><span style="font-style: italic"><span style="color: #9A1900"> is a horizontal {</span></span><span style="color: #009900">@link</span><span style="font-style: italic"><span style="color: #9A1900"> Road}.</span></span>
<span style="color: #000000">00034:</span> <span style="font-style: italic"><span style="color: #9A1900">   *  Each road has one {</span></span><span style="color: #009900">@link</span><span style="font-style: italic"><span style="color: #9A1900"> Car}.</span></span>
<span style="color: #000000">00035:</span> <span style="font-style: italic"><span style="color: #9A1900">   *</span></span>
<span style="color: #000000">00036:</span> <span style="font-style: italic"><span style="color: #9A1900">   *  </span></span><span style="font-weight: bold"><span style="color: #0000FF">&lt;p&gt;</span></span>
<span style="color: #000000">00037:</span> <span style="font-style: italic"><span style="color: #9A1900">   *  The {</span></span><span style="color: #009900">@link</span><span style="font-style: italic"><span style="color: #9A1900"> AnimatorBuilder} is used to set up an {</span></span><span style="color: #009900">@link</span>
<span style="color: #000000">00038:</span> <span style="font-style: italic"><span style="color: #9A1900">   *  Animator}.</span></span>
<span style="color: #000000">00039:</span> <span style="font-style: italic"><span style="color: #9A1900">   *  {</span></span><span style="color: #009900">@link</span><span style="font-style: italic"><span style="color: #9A1900"> AnimatorBuilder#getAnimator()} is registered as</span></span>
<span style="color: #000000">00040:</span> <span style="font-style: italic"><span style="color: #9A1900">   *  an observer of this model.</span></span>
<span style="color: #000000">00041:</span> <span style="font-style: italic"><span style="color: #9A1900">   *  </span></span><span style="font-weight: bold"><span style="color: #0000FF">&lt;p&gt;</span></span>
<span style="color: #000000">00042:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00043:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">Model</span></span><span style="color: #990000">(</span>AnimatorBuilder builder<span style="color: #990000">,</span> <span style="color: #009900">int</span> rows<span style="color: #990000">,</span> <span style="color: #009900">int</span> columns<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00044:</span>     <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>rows <span style="color: #990000">&lt;</span> <span style="color: #993399">0</span> <span style="color: #990000">||</span> columns <span style="color: #990000">&lt;</span> <span style="color: #993399">0</span> <span style="color: #990000">||</span> <span style="color: #990000">(</span>rows <span style="color: #990000">==</span> <span style="color: #993399">0</span> <span style="color: #990000">&amp;&amp;</span> columns <span style="color: #990000">==</span> <span style="color: #993399">0</span><span style="color: #990000">))</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00045:</span>       <span style="font-weight: bold"><span style="color: #0000FF">throw</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">IllegalArgumentException</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00046:</span>     <span style="color: #FF0000">}</span>
<span style="color: #000000">00047:</span>     <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>builder <span style="color: #990000">==</span> <span style="font-weight: bold"><span style="color: #0000FF">null</span></span><span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00048:</span>       builder <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">NullAnimatorBuilder</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00049:</span>     <span style="color: #FF0000">}</span>
<span style="color: #000000">00050:</span>     _agents <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> ArrayList<span style="color: #990000">&lt;</span>Agent<span style="color: #990000">&gt;();</span>
<span style="color: #000000">00051:</span>     <span style="font-weight: bold"><span style="color: #000000">setup</span></span><span style="color: #990000">(</span>builder<span style="color: #990000">,</span> rows<span style="color: #990000">,</span> columns<span style="color: #990000">);</span>
<span style="color: #000000">00052:</span>     _animator <span style="color: #990000">=</span> builder<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getAnimator</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00053:</span>     <span style="font-weight: bold"><span style="color: #0000FF">super</span></span><span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">addObserver</span></span><span style="color: #990000">(</span>_animator<span style="color: #990000">);</span>
<span style="color: #000000">00054:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00055:</span> 
<span style="color: #000000">00056:</span>   <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00057:</span> <span style="font-style: italic"><span style="color: #9A1900">   * Run the simulation for </span></span><span style="font-weight: bold"><span style="color: #0000FF">&lt;code&gt;</span></span><span style="font-style: italic"><span style="color: #9A1900">duration</span></span><span style="font-weight: bold"><span style="color: #0000FF">&lt;/code&gt;</span></span><span style="font-style: italic"><span style="color: #9A1900"> model seconds.</span></span>
<span style="color: #000000">00058:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00059:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> duration<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00060:</span>     <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>_disposed<span style="color: #990000">)</span>
<span style="color: #000000">00061:</span>       <span style="font-weight: bold"><span style="color: #0000FF">throw</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">IllegalStateException</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00062:</span>     <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span><span style="color: #009900">int</span> i<span style="color: #990000">=</span><span style="color: #993399">0</span><span style="color: #990000">;</span> i<span style="color: #990000">&lt;</span>duration<span style="color: #990000">;</span> i<span style="color: #990000">++)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00063:</span>       _time<span style="color: #990000">++;</span>
<span style="color: #000000">00064:</span>       Agent<span style="color: #990000">[]</span> agents_copy <span style="color: #990000">=</span> _agents<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">toArray</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">new</span></span> Agent<span style="color: #990000">[</span><span style="color: #993399">0</span><span style="color: #990000">]);</span>
<span style="color: #000000">00065:</span>       <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span>Agent a <span style="color: #990000">:</span> agents_copy<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00066:</span>         a<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">(</span>_time<span style="color: #990000">);</span>
<span style="color: #000000">00067:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00068:</span>       <span style="font-weight: bold"><span style="color: #0000FF">super</span></span><span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">setChanged</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00069:</span>       <span style="font-weight: bold"><span style="color: #0000FF">super</span></span><span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">notifyObservers</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00070:</span>     <span style="color: #FF0000">}</span>
<span style="color: #000000">00071:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00072:</span> 
<span style="color: #000000">00073:</span>   <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00074:</span> <span style="font-style: italic"><span style="color: #9A1900">   * Throw away this model.</span></span>
<span style="color: #000000">00075:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00076:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">dispose</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00077:</span>     _animator<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">dispose</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00078:</span>     _disposed <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">true</span></span><span style="color: #990000">;</span>
<span style="color: #000000">00079:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00080:</span> 
<span style="color: #000000">00081:</span>   <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00082:</span> <span style="font-style: italic"><span style="color: #9A1900">   * Construct the model, establishing correspondences with the visualizer.</span></span>
<span style="color: #000000">00083:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00084:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">setup</span></span><span style="color: #990000">(</span>AnimatorBuilder builder<span style="color: #990000">,</span> <span style="color: #009900">int</span> rows<span style="color: #990000">,</span> <span style="color: #009900">int</span> columns<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00085:</span>     List<span style="color: #990000">&lt;</span>Road<span style="color: #990000">&gt;</span> roads <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> ArrayList<span style="color: #990000">&lt;</span>Road<span style="color: #990000">&gt;();</span>
<span style="color: #000000">00086:</span>     Light<span style="color: #990000">[][]</span> intersections <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> Light<span style="color: #990000">[</span>rows<span style="color: #990000">][</span>columns<span style="color: #990000">];</span>
<span style="color: #000000">00087:</span>     Boolean reverse<span style="color: #990000">;</span>
<span style="color: #000000">00088:</span> 
<span style="color: #000000">00089:</span>     <span style="font-style: italic"><span style="color: #9A1900">// Add Lights</span></span>
<span style="color: #000000">00090:</span>     <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span><span style="color: #009900">int</span> i<span style="color: #990000">=</span><span style="color: #993399">0</span><span style="color: #990000">;</span> i<span style="color: #990000">&lt;</span>rows<span style="color: #990000">;</span> i<span style="color: #990000">++)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00091:</span>       <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span><span style="color: #009900">int</span> j<span style="color: #990000">=</span><span style="color: #993399">0</span><span style="color: #990000">;</span> j<span style="color: #990000">&lt;</span>columns<span style="color: #990000">;</span> j<span style="color: #990000">++)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00092:</span>         intersections<span style="color: #990000">[</span>i<span style="color: #990000">][</span>j<span style="color: #990000">]</span> <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Light</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00093:</span>         builder<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">addLight</span></span><span style="color: #990000">(</span>intersections<span style="color: #990000">[</span>i<span style="color: #990000">][</span>j<span style="color: #990000">],</span> i<span style="color: #990000">,</span> j<span style="color: #990000">);</span>
<span style="color: #000000">00094:</span>         _agents<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">add</span></span><span style="color: #990000">(</span>intersections<span style="color: #990000">[</span>i<span style="color: #990000">][</span>j<span style="color: #990000">]);</span>
<span style="color: #000000">00095:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00096:</span>     <span style="color: #FF0000">}</span>
<span style="color: #000000">00097:</span> 
<span style="color: #000000">00098:</span>     <span style="font-style: italic"><span style="color: #9A1900">// Add Horizontal Roads</span></span>
<span style="color: #000000">00099:</span>     <span style="color: #009900">boolean</span> eastToWest <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">false</span></span><span style="color: #990000">;</span>
<span style="color: #000000">00100:</span>     <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span><span style="color: #009900">int</span> i<span style="color: #990000">=</span><span style="color: #993399">0</span><span style="color: #990000">;</span> i<span style="color: #990000">&lt;</span>rows<span style="color: #990000">;</span> i<span style="color: #990000">++)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00101:</span>       <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span><span style="color: #009900">int</span> j<span style="color: #990000">=</span><span style="color: #993399">0</span><span style="color: #990000">;</span> j<span style="color: #990000">&lt;=</span>columns<span style="color: #990000">;</span> j<span style="color: #990000">++)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00102:</span>         Road l <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Road</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00103:</span>         builder<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">addHorizontalRoad</span></span><span style="color: #990000">(</span>l<span style="color: #990000">,</span> i<span style="color: #990000">,</span> j<span style="color: #990000">,</span> eastToWest<span style="color: #990000">);</span>
<span style="color: #000000">00104:</span>         roads<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">add</span></span><span style="color: #990000">(</span>l<span style="color: #990000">);</span>
<span style="color: #000000">00105:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00106:</span>       eastToWest <span style="color: #990000">=</span> <span style="color: #990000">!</span>eastToWest<span style="color: #990000">;</span>
<span style="color: #000000">00107:</span>     <span style="color: #FF0000">}</span>
<span style="color: #000000">00108:</span> 
<span style="color: #000000">00109:</span>     <span style="font-style: italic"><span style="color: #9A1900">// Add Vertical Roads</span></span>
<span style="color: #000000">00110:</span>     <span style="color: #009900">boolean</span> southToNorth <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">false</span></span><span style="color: #990000">;</span>
<span style="color: #000000">00111:</span>     <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span><span style="color: #009900">int</span> j<span style="color: #990000">=</span><span style="color: #993399">0</span><span style="color: #990000">;</span> j<span style="color: #990000">&lt;</span>columns<span style="color: #990000">;</span> j<span style="color: #990000">++)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00112:</span>       <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span><span style="color: #009900">int</span> i<span style="color: #990000">=</span><span style="color: #993399">0</span><span style="color: #990000">;</span> i<span style="color: #990000">&lt;=</span>rows<span style="color: #990000">;</span> i<span style="color: #990000">++)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00113:</span>         Road l <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Road</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00114:</span>         builder<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">addVerticalRoad</span></span><span style="color: #990000">(</span>l<span style="color: #990000">,</span> i<span style="color: #990000">,</span> j<span style="color: #990000">,</span> southToNorth<span style="color: #990000">);</span>
<span style="color: #000000">00115:</span>         roads<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">add</span></span><span style="color: #990000">(</span>l<span style="color: #990000">);</span>
<span style="color: #000000">00116:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00117:</span>       southToNorth <span style="color: #990000">=</span> <span style="color: #990000">!</span>southToNorth<span style="color: #990000">;</span>
<span style="color: #000000">00118:</span>     <span style="color: #FF0000">}</span>
<span style="color: #000000">00119:</span> 
<span style="color: #000000">00120:</span>     <span style="font-style: italic"><span style="color: #9A1900">// Add Cars</span></span>
<span style="color: #000000">00121:</span>     <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span>Road l <span style="color: #990000">:</span> roads<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00122:</span>       Car car <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Car</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00123:</span>       _agents<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">add</span></span><span style="color: #990000">(</span>car<span style="color: #990000">);</span>
<span style="color: #000000">00124:</span>       l<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">accept</span></span><span style="color: #990000">(</span>car<span style="color: #990000">);</span>
<span style="color: #000000">00125:</span>     <span style="color: #FF0000">}</span>
<span style="color: #000000">00126:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00127:</span> <span style="color: #FF0000">}</span>
</tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a href="../code/html/project/model/Road_java.html">file:Road.java</a> [<a href="../code/src/project/model/Road.java">source</a>] [<a href="../code/doc-publicproject/model/Road.html">doc-public</a>] [<a href="../code/doc-privateproject/model/Road.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> project<span style="color: #990000">.</span>model<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> 
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>util<span style="color: #990000">.</span>List<span style="color: #990000">;</span>
<span style="color: #000000">00004:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>util<span style="color: #990000">.</span>ArrayList<span style="color: #990000">;</span>
<span style="color: #000000">00005:</span> 
<span style="color: #000000">00006:</span> <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00007:</span> <span style="font-style: italic"><span style="color: #9A1900"> * A road holds cars.</span></span>
<span style="color: #000000">00008:</span> <span style="font-style: italic"><span style="color: #9A1900"> */</span></span>
<span style="color: #000000">00009:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">Road</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00010:</span>   <span style="font-weight: bold"><span style="color: #000000">Road</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> <span style="color: #FF0000">}</span> <span style="font-style: italic"><span style="color: #9A1900">// Created only by this package</span></span>
<span style="color: #000000">00011:</span> 
<span style="color: #000000">00012:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> List<span style="color: #990000">&lt;</span>Car<span style="color: #990000">&gt;</span> _cars <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> ArrayList<span style="color: #990000">&lt;</span>Car<span style="color: #990000">&gt;();</span>
<span style="color: #000000">00013:</span> 
<span style="color: #000000">00014:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">accept</span></span><span style="color: #990000">(</span>Car d<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00015:</span>     <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>d <span style="color: #990000">==</span> <span style="font-weight: bold"><span style="color: #0000FF">null</span></span><span style="color: #990000">)</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">throw</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">IllegalArgumentException</span></span><span style="color: #990000">();</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00016:</span>     _cars<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">add</span></span><span style="color: #990000">(</span>d<span style="color: #990000">);</span>
<span style="color: #000000">00017:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00018:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> List<span style="color: #990000">&lt;</span>Car<span style="color: #990000">&gt;</span> <span style="font-weight: bold"><span style="color: #000000">getCars</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00019:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> _cars<span style="color: #990000">;</span>
<span style="color: #000000">00020:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00021:</span> <span style="color: #FF0000">}</span>
</tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a href="../code/html/project/model/Agent_java.html">file:Agent.java</a> [<a href="../code/src/project/model/Agent.java">source</a>] [<a href="../code/doc-publicproject/model/Agent.html">doc-public</a>] [<a href="../code/doc-privateproject/model/Agent.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> project<span style="color: #990000">.</span>model<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> 
<span style="color: #000000">00003:</span> <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00004:</span> <span style="font-style: italic"><span style="color: #9A1900"> * Interface for active model objects.</span></span>
<span style="color: #000000">00005:</span> <span style="font-style: italic"><span style="color: #9A1900"> */</span></span>
<span style="color: #000000">00006:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">interface</span></span> <span style="color: #009900">Agent</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00007:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">(</span><span style="color: #009900">double</span> time<span style="color: #990000">);</span>
<span style="color: #000000">00008:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00009:</span> 
</tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a href="../code/html/project/model/Car_java.html">file:Car.java</a> [<a href="../code/src/project/model/Car.java">source</a>] [<a href="../code/doc-publicproject/model/Car.html">doc-public</a>] [<a href="../code/doc-privateproject/model/Car.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> project<span style="color: #990000">.</span>model<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> 
<span style="color: #000000">00003:</span> <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00004:</span> <span style="font-style: italic"><span style="color: #9A1900"> * A car remembers its position from the beginning of its road.</span></span>
<span style="color: #000000">00005:</span> <span style="font-style: italic"><span style="color: #9A1900"> * Cars have random velocity and random movement pattern:</span></span>
<span style="color: #000000">00006:</span> <span style="font-style: italic"><span style="color: #9A1900"> * when reaching the end of a road, the dot either resets its position</span></span>
<span style="color: #000000">00007:</span> <span style="font-style: italic"><span style="color: #9A1900"> * to the beginning of the road, or reverses its direction.</span></span>
<span style="color: #000000">00008:</span> <span style="font-style: italic"><span style="color: #9A1900"> */</span></span>
<span style="color: #000000">00009:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">Car</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Agent <span style="color: #FF0000">{</span>
<span style="color: #000000">00010:</span>   <span style="font-weight: bold"><span style="color: #000000">Car</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> <span style="color: #FF0000">}</span> <span style="font-style: italic"><span style="color: #9A1900">// Created only by this package</span></span>
<span style="color: #000000">00011:</span> 
<span style="color: #000000">00012:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">boolean</span> _backAndForth <span style="color: #990000">=</span> Math<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">round</span></span><span style="color: #990000">(</span>Math<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">random</span></span><span style="color: #990000">())==</span><span style="color: #993399">1</span> <span style="color: #990000">?</span> <span style="font-weight: bold"><span style="color: #0000FF">true</span></span> <span style="color: #990000">:</span> <span style="font-weight: bold"><span style="color: #0000FF">false</span></span><span style="color: #990000">;</span>
<span style="color: #000000">00013:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">double</span> _position <span style="color: #990000">=</span> <span style="color: #993399">0</span><span style="color: #990000">;</span>
<span style="color: #000000">00014:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">double</span> _velocity <span style="color: #990000">=</span> <span style="color: #990000">(</span><span style="color: #009900">int</span><span style="color: #990000">)</span> Math<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">ceil</span></span><span style="color: #990000">(</span>Math<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">random</span></span><span style="color: #990000">()</span> <span style="color: #990000">*</span> MP<span style="color: #990000">.</span>maxVelocity<span style="color: #990000">);</span>
<span style="color: #000000">00015:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> java<span style="color: #990000">.</span>awt<span style="color: #990000">.</span>Color _color <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> java<span style="color: #990000">.</span>awt<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">Color</span></span><span style="color: #990000">((</span><span style="color: #009900">int</span><span style="color: #990000">)</span>Math<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">ceil</span></span><span style="color: #990000">(</span>Math<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">random</span></span><span style="color: #990000">()*</span><span style="color: #993399">255</span><span style="color: #990000">),(</span><span style="color: #009900">int</span><span style="color: #990000">)</span>Math<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">ceil</span></span><span style="color: #990000">(</span>Math<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">random</span></span><span style="color: #990000">()*</span><span style="color: #993399">255</span><span style="color: #990000">),(</span><span style="color: #009900">int</span><span style="color: #990000">)</span>Math<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">ceil</span></span><span style="color: #990000">(</span>Math<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">random</span></span><span style="color: #990000">()*</span><span style="color: #993399">255</span><span style="color: #990000">));</span>
<span style="color: #000000">00016:</span>   
<span style="color: #000000">00017:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">double</span> <span style="font-weight: bold"><span style="color: #000000">getPosition</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00018:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> _position<span style="color: #990000">;</span>
<span style="color: #000000">00019:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00020:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> java<span style="color: #990000">.</span>awt<span style="color: #990000">.</span>Color <span style="font-weight: bold"><span style="color: #000000">getColor</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00021:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> _color<span style="color: #990000">;</span>
<span style="color: #000000">00022:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00023:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">(</span><span style="color: #009900">double</span> time<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00024:</span>     <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>_backAndForth<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00025:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(((</span>_position <span style="color: #990000">+</span> _velocity<span style="color: #990000">)</span> <span style="color: #990000">&lt;</span> <span style="color: #993399">0</span><span style="color: #990000">)</span> <span style="color: #990000">||</span> <span style="color: #990000">((</span>_position <span style="color: #990000">+</span> _velocity<span style="color: #990000">)</span> <span style="color: #990000">&gt;</span> <span style="color: #990000">(</span>MP<span style="color: #990000">.</span>roadLength<span style="color: #990000">-</span>MP<span style="color: #990000">.</span>carLength<span style="color: #990000">)))</span>
<span style="color: #000000">00026:</span>         _velocity <span style="color: #990000">*=</span> <span style="color: #990000">-</span><span style="color: #993399">1</span><span style="color: #990000">;</span>
<span style="color: #000000">00027:</span>     <span style="color: #FF0000">}</span> <span style="font-weight: bold"><span style="color: #0000FF">else</span></span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00028:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">((</span>_position <span style="color: #990000">+</span> _velocity<span style="color: #990000">)</span> <span style="color: #990000">&gt;</span> <span style="color: #990000">(</span>MP<span style="color: #990000">.</span>roadLength<span style="color: #990000">-</span>MP<span style="color: #990000">.</span>carLength<span style="color: #990000">))</span>
<span style="color: #000000">00029:</span>         _position <span style="color: #990000">=</span> <span style="color: #993399">0</span><span style="color: #990000">;</span>
<span style="color: #000000">00030:</span>     <span style="color: #FF0000">}</span>
<span style="color: #000000">00031:</span>     _position <span style="color: #990000">+=</span> _velocity<span style="color: #990000">;</span>
<span style="color: #000000">00032:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00033:</span> <span style="color: #FF0000">}</span>
</tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a href="../code/html/project/model/Light_java.html">file:Light.java</a> [<a href="../code/src/project/model/Light.java">source</a>] [<a href="../code/doc-publicproject/model/Light.html">doc-public</a>] [<a href="../code/doc-privateproject/model/Light.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> project<span style="color: #990000">.</span>model<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> 
<span style="color: #000000">00003:</span> <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00004:</span> <span style="font-style: italic"><span style="color: #9A1900"> * A light has a boolean state.</span></span>
<span style="color: #000000">00005:</span> <span style="font-style: italic"><span style="color: #9A1900"> */</span></span>
<span style="color: #000000">00006:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">Light</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Agent <span style="color: #FF0000">{</span>
<span style="color: #000000">00007:</span>   <span style="font-weight: bold"><span style="color: #000000">Light</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> <span style="color: #FF0000">}</span> <span style="font-style: italic"><span style="color: #9A1900">// Created only by this package</span></span>
<span style="color: #000000">00008:</span>   
<span style="color: #000000">00009:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">boolean</span> _state<span style="color: #990000">;</span>
<span style="color: #000000">00010:</span> 
<span style="color: #000000">00011:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">boolean</span> <span style="font-weight: bold"><span style="color: #000000">getState</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00012:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> _state<span style="color: #990000">;</span>
<span style="color: #000000">00013:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00014:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">(</span><span style="color: #009900">double</span> time<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00015:</span>     <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>time<span style="color: #990000">%</span><span style="color: #993399">40</span><span style="color: #990000">==</span><span style="color: #993399">0</span><span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00016:</span>       _state <span style="color: #990000">=</span> <span style="color: #990000">!</span>_state<span style="color: #990000">;</span>
<span style="color: #000000">00017:</span>     <span style="color: #FF0000">}</span>
<span style="color: #000000">00018:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00019:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00020:</span> 
</tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a href="../code/html/project/util/Animator_java.html">file:Animator.java</a> [<a href="../code/src/project/util/Animator.java">source</a>] [<a href="../code/doc-publicproject/util/Animator.html">doc-public</a>] [<a href="../code/doc-privateproject/util/Animator.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> project<span style="color: #990000">.</span>util<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> 
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>util<span style="color: #990000">.</span>Observer<span style="color: #990000">;</span>
<span style="color: #000000">00004:</span>   
<span style="color: #000000">00005:</span> <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00006:</span> <span style="font-style: italic"><span style="color: #9A1900"> * An interface for displaying simulations.</span></span>
<span style="color: #000000">00007:</span> <span style="font-style: italic"><span style="color: #9A1900"> */</span></span>
<span style="color: #000000">00008:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">interface</span></span> <span style="color: #009900">Animator</span> <span style="font-weight: bold"><span style="color: #0000FF">extends</span></span> Observer <span style="color: #FF0000">{</span>
<span style="color: #000000">00009:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">dispose</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00010:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00011:</span> 
<span style="color: #000000">00012:</span> 
</tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a href="../code/html/project/model/AnimatorBuilder_java.html">file:AnimatorBuilder.java</a> [<a href="../code/src/project/model/AnimatorBuilder.java">source</a>] [<a href="../code/doc-publicproject/model/AnimatorBuilder.html">doc-public</a>] [<a href="../code/doc-privateproject/model/AnimatorBuilder.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> project<span style="color: #990000">.</span>model<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> 
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> project<span style="color: #990000">.</span>util<span style="color: #990000">.</span>Animator<span style="color: #990000">;</span>
<span style="color: #000000">00004:</span> 
<span style="color: #000000">00005:</span> <span style="font-style: italic"><span style="color: #9A1900">/** </span></span>
<span style="color: #000000">00006:</span> <span style="font-style: italic"><span style="color: #9A1900"> * An interface for building a {</span></span><span style="color: #009900">@link</span><span style="font-style: italic"><span style="color: #9A1900"> Animator} for this {</span></span><span style="color: #009900">@link</span><span style="font-style: italic"><span style="color: #9A1900"> Model}.</span></span>
<span style="color: #000000">00007:</span> <span style="font-style: italic"><span style="color: #9A1900"> */</span></span>
<span style="color: #000000">00008:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">interface</span></span> <span style="color: #009900">AnimatorBuilder</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00009:</span>   <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00010:</span> <span style="font-style: italic"><span style="color: #9A1900">   *  Returns the {</span></span><span style="color: #009900">@link</span><span style="font-style: italic"><span style="color: #9A1900"> Animator}.</span></span>
<span style="color: #000000">00011:</span> <span style="font-style: italic"><span style="color: #9A1900">   *  This method may be called only once; subsequent calls throw an</span></span>
<span style="color: #000000">00012:</span> <span style="font-style: italic"><span style="color: #9A1900">   *  {</span></span><span style="color: #009900">@link</span><span style="font-style: italic"><span style="color: #9A1900"> IllegalStateException}.</span></span>
<span style="color: #000000">00013:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00014:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> Animator <span style="font-weight: bold"><span style="color: #000000">getAnimator</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00015:</span>   <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00016:</span> <span style="font-style: italic"><span style="color: #9A1900">   *  Add the {</span></span><span style="color: #009900">@link</span><span style="font-style: italic"><span style="color: #9A1900"> Light} to the display at position </span></span><span style="font-weight: bold"><span style="color: #0000FF">&lt;code&gt;</span></span><span style="font-style: italic"><span style="color: #9A1900">i,j</span></span><span style="font-weight: bold"><span style="color: #0000FF">&lt;/code&gt;</span></span><span style="font-style: italic"><span style="color: #9A1900">.</span></span>
<span style="color: #000000">00017:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00018:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">addLight</span></span><span style="color: #990000">(</span>Light d<span style="color: #990000">,</span> <span style="color: #009900">int</span> i<span style="color: #990000">,</span> <span style="color: #009900">int</span> j<span style="color: #990000">);</span>
<span style="color: #000000">00019:</span>   <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00020:</span> <span style="font-style: italic"><span style="color: #9A1900">   *  Add the horizontal {</span></span><span style="color: #009900">@link</span><span style="font-style: italic"><span style="color: #9A1900"> Road} to the display, west of position </span></span><span style="font-weight: bold"><span style="color: #0000FF">&lt;code&gt;</span></span><span style="font-style: italic"><span style="color: #9A1900">i,j</span></span><span style="font-weight: bold"><span style="color: #0000FF">&lt;/code&gt;</span></span><span style="font-style: italic"><span style="color: #9A1900">.</span></span>
<span style="color: #000000">00021:</span> <span style="font-style: italic"><span style="color: #9A1900">   *  If </span></span><span style="font-weight: bold"><span style="color: #0000FF">&lt;code&gt;</span></span><span style="font-style: italic"><span style="color: #9A1900">eastToWest</span></span><span style="font-weight: bold"><span style="color: #0000FF">&lt;/code&gt;</span></span><span style="font-style: italic"><span style="color: #9A1900"> is true, then road position 0 is the eastmost position.</span></span>
<span style="color: #000000">00022:</span> <span style="font-style: italic"><span style="color: #9A1900">   *  If </span></span><span style="font-weight: bold"><span style="color: #0000FF">&lt;code&gt;</span></span><span style="font-style: italic"><span style="color: #9A1900">eastToWest</span></span><span style="font-weight: bold"><span style="color: #0000FF">&lt;/code&gt;</span></span><span style="font-style: italic"><span style="color: #9A1900"> is false, then road position 0 is the westmost position.</span></span>
<span style="color: #000000">00023:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00024:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">addHorizontalRoad</span></span><span style="color: #990000">(</span>Road l<span style="color: #990000">,</span> <span style="color: #009900">int</span> i<span style="color: #990000">,</span> <span style="color: #009900">int</span> j<span style="color: #990000">,</span> <span style="color: #009900">boolean</span> eastToWest<span style="color: #990000">);</span>
<span style="color: #000000">00025:</span>   <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00026:</span> <span style="font-style: italic"><span style="color: #9A1900">   *  Add the vertical {</span></span><span style="color: #009900">@link</span><span style="font-style: italic"><span style="color: #9A1900"> Road} to the display, north of position </span></span><span style="font-weight: bold"><span style="color: #0000FF">&lt;code&gt;</span></span><span style="font-style: italic"><span style="color: #9A1900">i,j</span></span><span style="font-weight: bold"><span style="color: #0000FF">&lt;/code&gt;</span></span><span style="font-style: italic"><span style="color: #9A1900">.</span></span>
<span style="color: #000000">00027:</span> <span style="font-style: italic"><span style="color: #9A1900">   *  If </span></span><span style="font-weight: bold"><span style="color: #0000FF">&lt;code&gt;</span></span><span style="font-style: italic"><span style="color: #9A1900">southToNorth</span></span><span style="font-weight: bold"><span style="color: #0000FF">&lt;/code&gt;</span></span><span style="font-style: italic"><span style="color: #9A1900"> is true, then road position 0 is the southmost position.</span></span>
<span style="color: #000000">00028:</span> <span style="font-style: italic"><span style="color: #9A1900">   *  If </span></span><span style="font-weight: bold"><span style="color: #0000FF">&lt;code&gt;</span></span><span style="font-style: italic"><span style="color: #9A1900">southToNorth</span></span><span style="font-weight: bold"><span style="color: #0000FF">&lt;/code&gt;</span></span><span style="font-style: italic"><span style="color: #9A1900"> is false, then road position 0 is the northmost position.</span></span>
<span style="color: #000000">00029:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00030:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">addVerticalRoad</span></span><span style="color: #990000">(</span>Road l<span style="color: #990000">,</span> <span style="color: #009900">int</span> i<span style="color: #990000">,</span> <span style="color: #009900">int</span> j<span style="color: #990000">,</span> <span style="color: #009900">boolean</span> southToNorth<span style="color: #990000">);</span>
<span style="color: #000000">00031:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00032:</span> 
<span style="color: #000000">00033:</span> <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00034:</span> <span style="font-style: italic"><span style="color: #9A1900"> * Null object for {</span></span><span style="color: #009900">@link</span><span style="font-style: italic"><span style="color: #9A1900"> AnimatorBuilder}.</span></span>
<span style="color: #000000">00035:</span> <span style="font-style: italic"><span style="color: #9A1900"> */</span></span>
<span style="color: #000000">00036:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">NullAnimatorBuilder</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> AnimatorBuilder <span style="color: #FF0000">{</span>
<span style="color: #000000">00037:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> Animator <span style="font-weight: bold"><span style="color: #000000">getAnimator</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">NullAnimator</span></span><span style="color: #990000">();</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00038:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">addLight</span></span><span style="color: #990000">(</span>Light d<span style="color: #990000">,</span> <span style="color: #009900">int</span> i<span style="color: #990000">,</span> <span style="color: #009900">int</span> j<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00039:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">addHorizontalRoad</span></span><span style="color: #990000">(</span>Road l<span style="color: #990000">,</span> <span style="color: #009900">int</span> i<span style="color: #990000">,</span> <span style="color: #009900">int</span> j<span style="color: #990000">,</span> <span style="color: #009900">boolean</span> eastToWest<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00040:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">addVerticalRoad</span></span><span style="color: #990000">(</span>Road l<span style="color: #990000">,</span> <span style="color: #009900">int</span> i<span style="color: #990000">,</span> <span style="color: #009900">int</span> j<span style="color: #990000">,</span> <span style="color: #009900">boolean</span> southToNorth<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00041:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00042:</span> 
<span style="color: #000000">00043:</span> <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00044:</span> <span style="font-style: italic"><span style="color: #9A1900"> * Null object for {</span></span><span style="color: #009900">@link</span><span style="font-style: italic"><span style="color: #9A1900"> Animator}.</span></span>
<span style="color: #000000">00045:</span> <span style="font-style: italic"><span style="color: #9A1900"> */</span></span>
<span style="color: #000000">00046:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">NullAnimator</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Animator <span style="color: #FF0000">{</span>
<span style="color: #000000">00047:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">update</span></span><span style="color: #990000">(</span>java<span style="color: #990000">.</span>util<span style="color: #990000">.</span>Observable o<span style="color: #990000">,</span> Object arg<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00048:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">dispose</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00049:</span> <span style="color: #FF0000">}</span>
</tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
      <p xmlns=""> </p><table xmlns="" width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide023">Animation: Text output</a></span><span style="font-weight: normal"><a href="class-07-023.html"> [23/25] </a></span></td></tr></table><p xmlns=""> </p>
        <p xmlns="">
          Package documentation: <a href="../code/doc-public/project/model/text/package-summary.html">project.model.text</a> [<a href="../code/doc-private/project/model/text/package-summary.html">private</a>]
          <a href="../code/doc-public/project/util/package-summary.html">project.util</a> [<a href="../code/doc-private/project/util/package-summary.html">private</a>]
        </p>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a href="../code/html/project/model/text/TextAnimatorBuilder_java.html">file:TextAnimatorBuilder.java</a> [<a href="../code/src/project/model/text/TextAnimatorBuilder.java">source</a>] [<a href="../code/doc-publicproject/model/text/TextAnimatorBuilder.html">doc-public</a>] [<a href="../code/doc-privateproject/model/text/TextAnimatorBuilder.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> project<span style="color: #990000">.</span>model<span style="color: #990000">.</span>text<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> 
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>util<span style="color: #990000">.</span>ArrayList<span style="color: #990000">;</span>
<span style="color: #000000">00004:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>util<span style="color: #990000">.</span>List<span style="color: #990000">;</span>
<span style="color: #000000">00005:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>util<span style="color: #990000">.</span>Observable<span style="color: #990000">;</span>
<span style="color: #000000">00006:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>util<span style="color: #990000">.</span>Observer<span style="color: #990000">;</span>
<span style="color: #000000">00007:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> project<span style="color: #990000">.</span>model<span style="color: #990000">.</span>AnimatorBuilder<span style="color: #990000">;</span>
<span style="color: #000000">00008:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> project<span style="color: #990000">.</span>model<span style="color: #990000">.</span>Car<span style="color: #990000">;</span>
<span style="color: #000000">00009:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> project<span style="color: #990000">.</span>model<span style="color: #990000">.</span>Light<span style="color: #990000">;</span>
<span style="color: #000000">00010:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> project<span style="color: #990000">.</span>model<span style="color: #990000">.</span>MP<span style="color: #990000">;</span>
<span style="color: #000000">00011:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> project<span style="color: #990000">.</span>model<span style="color: #990000">.</span>Road<span style="color: #990000">;</span>
<span style="color: #000000">00012:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> project<span style="color: #990000">.</span>util<span style="color: #990000">.</span>Animator<span style="color: #990000">;</span>
<span style="color: #000000">00013:</span> 
<span style="color: #000000">00014:</span> <span style="font-style: italic"><span style="color: #9A1900">/** </span></span>
<span style="color: #000000">00015:</span> <span style="font-style: italic"><span style="color: #9A1900"> * A class for building Animators.</span></span>
<span style="color: #000000">00016:</span> <span style="font-style: italic"><span style="color: #9A1900"> */</span></span>
<span style="color: #000000">00017:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">TextAnimatorBuilder</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> AnimatorBuilder <span style="color: #FF0000">{</span>
<span style="color: #000000">00018:</span>   TextAnimator _animator<span style="color: #990000">;</span>
<span style="color: #000000">00019:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">TextAnimatorBuilder</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00020:</span>     _animator <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">TextAnimator</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00021:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00022:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> Animator <span style="font-weight: bold"><span style="color: #000000">getAnimator</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00023:</span>     <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>_animator <span style="color: #990000">==</span> <span style="font-weight: bold"><span style="color: #0000FF">null</span></span><span style="color: #990000">)</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">throw</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">IllegalStateException</span></span><span style="color: #990000">();</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00024:</span>     Animator returnValue <span style="color: #990000">=</span> _animator<span style="color: #990000">;</span>
<span style="color: #000000">00025:</span>     _animator <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">null</span></span><span style="color: #990000">;</span>
<span style="color: #000000">00026:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> returnValue<span style="color: #990000">;</span>
<span style="color: #000000">00027:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00028:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">addLight</span></span><span style="color: #990000">(</span>Light d<span style="color: #990000">,</span> <span style="color: #009900">int</span> i<span style="color: #990000">,</span> <span style="color: #009900">int</span> j<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00029:</span>     _animator<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">addLight</span></span><span style="color: #990000">(</span>d<span style="color: #990000">,</span>i<span style="color: #990000">,</span>j<span style="color: #990000">);</span>
<span style="color: #000000">00030:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00031:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">addHorizontalRoad</span></span><span style="color: #990000">(</span>Road l<span style="color: #990000">,</span> <span style="color: #009900">int</span> i<span style="color: #990000">,</span> <span style="color: #009900">int</span> j<span style="color: #990000">,</span> <span style="color: #009900">boolean</span> eastToWest<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00032:</span>     _animator<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">addRoad</span></span><span style="color: #990000">(</span>l<span style="color: #990000">,</span>i<span style="color: #990000">,</span>j<span style="color: #990000">);</span>
<span style="color: #000000">00033:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00034:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">addVerticalRoad</span></span><span style="color: #990000">(</span>Road l<span style="color: #990000">,</span> <span style="color: #009900">int</span> i<span style="color: #990000">,</span> <span style="color: #009900">int</span> j<span style="color: #990000">,</span> <span style="color: #009900">boolean</span> southToNorth<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00035:</span>     _animator<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">addRoad</span></span><span style="color: #990000">(</span>l<span style="color: #990000">,</span>i<span style="color: #990000">,</span>j<span style="color: #990000">);</span>
<span style="color: #000000">00036:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00037:</span> 
<span style="color: #000000">00038:</span> 
<span style="color: #000000">00039:</span>   <span style="font-style: italic"><span style="color: #9A1900">/** Class for drawing the Model. */</span></span>
<span style="color: #000000">00040:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">TextAnimator</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Animator <span style="color: #FF0000">{</span>
<span style="color: #000000">00041:</span> 
<span style="color: #000000">00042:</span>     <span style="font-style: italic"><span style="color: #9A1900">/** Triple of a model element </span></span><span style="font-weight: bold"><span style="color: #0000FF">&lt;code&gt;</span></span><span style="font-style: italic"><span style="color: #9A1900">x</span></span><span style="font-weight: bold"><span style="color: #0000FF">&lt;/code&gt;</span></span><span style="font-style: italic"><span style="color: #9A1900"> and coordinates. */</span></span>
<span style="color: #000000">00043:</span>     <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">Element</span><span style="color: #990000">&lt;</span>T<span style="color: #990000">&gt;</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00044:</span>       T x<span style="color: #990000">;</span>
<span style="color: #000000">00045:</span>       <span style="color: #009900">int</span> i<span style="color: #990000">;</span>
<span style="color: #000000">00046:</span>       <span style="color: #009900">int</span> j<span style="color: #990000">;</span>
<span style="color: #000000">00047:</span>       <span style="font-weight: bold"><span style="color: #000000">Element</span></span><span style="color: #990000">(</span>T x<span style="color: #990000">,</span> <span style="color: #009900">int</span> i<span style="color: #990000">,</span> <span style="color: #009900">int</span> j<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00048:</span>         <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">.</span>x <span style="color: #990000">=</span> x<span style="color: #990000">;</span>
<span style="color: #000000">00049:</span>         <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">.</span>i <span style="color: #990000">=</span> i<span style="color: #990000">;</span>
<span style="color: #000000">00050:</span>         <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">.</span>j <span style="color: #990000">=</span> j<span style="color: #990000">;</span>
<span style="color: #000000">00051:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00052:</span>     <span style="color: #FF0000">}</span>
<span style="color: #000000">00053:</span>     
<span style="color: #000000">00054:</span>     <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> List<span style="color: #990000">&lt;</span>Element<span style="color: #990000">&lt;</span>Road<span style="color: #990000">&gt;&gt;</span> _roadElements<span style="color: #990000">;</span>
<span style="color: #000000">00055:</span>     <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> List<span style="color: #990000">&lt;</span>Element<span style="color: #990000">&lt;</span>Light<span style="color: #990000">&gt;&gt;</span> _lightElements<span style="color: #990000">;</span>
<span style="color: #000000">00056:</span>     <span style="font-weight: bold"><span style="color: #000000">TextAnimator</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00057:</span>       _roadElements <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> ArrayList<span style="color: #990000">&lt;</span>Element<span style="color: #990000">&lt;</span>Road<span style="color: #990000">&gt;&gt;();</span>
<span style="color: #000000">00058:</span>       _lightElements <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> ArrayList<span style="color: #990000">&lt;</span>Element<span style="color: #990000">&lt;</span>Light<span style="color: #990000">&gt;&gt;();</span>
<span style="color: #000000">00059:</span>     <span style="color: #FF0000">}</span>    
<span style="color: #000000">00060:</span>     <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">addLight</span></span><span style="color: #990000">(</span>Light x<span style="color: #990000">,</span> <span style="color: #009900">int</span> i<span style="color: #990000">,</span> <span style="color: #009900">int</span> j<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00061:</span>       _lightElements<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">add</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">new</span></span> Element<span style="color: #990000">&lt;</span>Light<span style="color: #990000">&gt;(</span>x<span style="color: #990000">,</span>i<span style="color: #990000">,</span>j<span style="color: #990000">));</span>
<span style="color: #000000">00062:</span>     <span style="color: #FF0000">}</span>
<span style="color: #000000">00063:</span>     <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">addRoad</span></span><span style="color: #990000">(</span>Road x<span style="color: #990000">,</span> <span style="color: #009900">int</span> i<span style="color: #990000">,</span> <span style="color: #009900">int</span> j<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00064:</span>       _roadElements<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">add</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">new</span></span> Element<span style="color: #990000">&lt;</span>Road<span style="color: #990000">&gt;(</span>x<span style="color: #990000">,</span>i<span style="color: #990000">,</span>j<span style="color: #990000">));</span>
<span style="color: #000000">00065:</span>     <span style="color: #FF0000">}</span>
<span style="color: #000000">00066:</span>     
<span style="color: #000000">00067:</span>     <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">dispose</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00068:</span>     
<span style="color: #000000">00069:</span>     <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">update</span></span><span style="color: #990000">(</span>Observable o<span style="color: #990000">,</span> Object arg<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00070:</span>       <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span>Element<span style="color: #990000">&lt;</span>Light<span style="color: #990000">&gt;</span> e <span style="color: #990000">:</span> _lightElements<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00071:</span>         System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">print</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"Light at ("</span> <span style="color: #990000">+</span> e<span style="color: #990000">.</span>i <span style="color: #990000">+</span> <span style="color: #FF0000">","</span> <span style="color: #990000">+</span> e<span style="color: #990000">.</span>j <span style="color: #990000">+</span> <span style="color: #FF0000">"): "</span><span style="color: #990000">);</span>
<span style="color: #000000">00072:</span>         <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>e<span style="color: #990000">.</span>x<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getState</span></span><span style="color: #990000">())</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00073:</span>           System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"Blue"</span><span style="color: #990000">);</span>
<span style="color: #000000">00074:</span>         <span style="color: #FF0000">}</span> <span style="font-weight: bold"><span style="color: #0000FF">else</span></span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00075:</span>           System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"Yellow"</span><span style="color: #990000">);</span>
<span style="color: #000000">00076:</span>         <span style="color: #FF0000">}</span>
<span style="color: #000000">00077:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00078:</span>       <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span>Element<span style="color: #990000">&lt;</span>Road<span style="color: #990000">&gt;</span> e <span style="color: #990000">:</span> _roadElements<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00079:</span>         <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span>Car d <span style="color: #990000">:</span> e<span style="color: #990000">.</span>x<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getCars</span></span><span style="color: #990000">())</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00080:</span>           System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">print</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"Road at ("</span> <span style="color: #990000">+</span> e<span style="color: #990000">.</span>i <span style="color: #990000">+</span> <span style="color: #FF0000">","</span> <span style="color: #990000">+</span> e<span style="color: #990000">.</span>j <span style="color: #990000">+</span> <span style="color: #FF0000">"): "</span><span style="color: #990000">);</span>
<span style="color: #000000">00081:</span>           System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"Car at "</span> <span style="color: #990000">+</span> d<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getPosition</span></span><span style="color: #990000">());</span>
<span style="color: #000000">00082:</span>         <span style="color: #FF0000">}</span>
<span style="color: #000000">00083:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00084:</span>     <span style="color: #FF0000">}</span>
<span style="color: #000000">00085:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00086:</span> <span style="color: #FF0000">}</span>
</tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
      <p xmlns=""> </p><table xmlns="" width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide024">Animation: Swing output</a></span><span style="font-weight: normal"><a href="class-07-024.html"> [24/25] </a></span></td></tr></table><p xmlns=""> </p>
        <p xmlns="">
          Package documentation: <a href="../code/doc-public/project/model/swing/package-summary.html">project.model.swing</a> [<a href="../code/doc-private/project/model/swing/package-summary.html">private</a>]
          <a href="../code/doc-public/project/util/package-summary.html">project.util</a> [<a href="../code/doc-private/project/util/package-summary.html">private</a>]
        </p>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a href="../code/html/project/util/Animator_java.html">file:Animator.java</a> [<a href="../code/src/project/util/Animator.java">source</a>] [<a href="../code/doc-publicproject/util/Animator.html">doc-public</a>] [<a href="../code/doc-privateproject/util/Animator.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> project<span style="color: #990000">.</span>util<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> 
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>util<span style="color: #990000">.</span>Observer<span style="color: #990000">;</span>
<span style="color: #000000">00004:</span>   
<span style="color: #000000">00005:</span> <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00006:</span> <span style="font-style: italic"><span style="color: #9A1900"> * An interface for displaying simulations.</span></span>
<span style="color: #000000">00007:</span> <span style="font-style: italic"><span style="color: #9A1900"> */</span></span>
<span style="color: #000000">00008:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">interface</span></span> <span style="color: #009900">Animator</span> <span style="font-weight: bold"><span style="color: #0000FF">extends</span></span> Observer <span style="color: #FF0000">{</span>
<span style="color: #000000">00009:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">dispose</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00010:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00011:</span> 
<span style="color: #000000">00012:</span> 
</tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a href="../code/html/project/util/SwingAnimator_java.html">file:SwingAnimator.java</a> [<a href="../code/src/project/util/SwingAnimator.java">source</a>] [<a href="../code/doc-publicproject/util/SwingAnimator.html">doc-public</a>] [<a href="../code/doc-privateproject/util/SwingAnimator.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> project<span style="color: #990000">.</span>util<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> 
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>awt<span style="color: #990000">.</span>Color<span style="color: #990000">;</span>
<span style="color: #000000">00004:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>awt<span style="color: #990000">.</span>Dimension<span style="color: #990000">;</span>
<span style="color: #000000">00005:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>awt<span style="color: #990000">.</span>Graphics<span style="color: #990000">;</span>
<span style="color: #000000">00006:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>awt<span style="color: #990000">.</span>Image<span style="color: #990000">;</span>
<span style="color: #000000">00007:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>util<span style="color: #990000">.</span>Observable<span style="color: #990000">;</span>
<span style="color: #000000">00008:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>util<span style="color: #990000">.</span>Observer<span style="color: #990000">;</span>
<span style="color: #000000">00009:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> javax<span style="color: #990000">.</span>swing<span style="color: #990000">.</span>JFrame<span style="color: #990000">;</span>
<span style="color: #000000">00010:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> javax<span style="color: #990000">.</span>swing<span style="color: #990000">.</span>JPanel<span style="color: #990000">;</span>
<span style="color: #000000">00011:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> javax<span style="color: #990000">.</span>swing<span style="color: #990000">.</span>SwingUtilities<span style="color: #990000">;</span>
<span style="color: #000000">00012:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> javax<span style="color: #990000">.</span>swing<span style="color: #990000">.</span>WindowConstants<span style="color: #990000">;</span>
<span style="color: #000000">00013:</span>   
<span style="color: #000000">00014:</span> <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00015:</span> <span style="font-style: italic"><span style="color: #9A1900"> * A swing implementation of {</span></span><span style="color: #009900">@link</span><span style="font-style: italic"><span style="color: #9A1900"> Animator}, using a {</span></span><span style="color: #009900">@link</span><span style="font-style: italic"><span style="color: #9A1900"> JFrame}</span></span>
<span style="color: #000000">00016:</span> <span style="font-style: italic"><span style="color: #9A1900"> * to display the animation.  The {</span></span><span style="color: #009900">@link</span><span style="font-style: italic"><span style="color: #9A1900"> JFrame} is created and</span></span>
<span style="color: #000000">00017:</span> <span style="font-style: italic"><span style="color: #9A1900"> * displayed by the constructor.</span></span>
<span style="color: #000000">00018:</span> <span style="font-style: italic"><span style="color: #9A1900"> * </span></span>
<span style="color: #000000">00019:</span> <span style="font-style: italic"><span style="color: #9A1900"> * Calls to </span></span><span style="font-weight: bold"><span style="color: #0000FF">&lt;code&gt;</span></span><span style="font-style: italic"><span style="color: #9A1900">update()</span></span><span style="font-weight: bold"><span style="color: #0000FF">&lt;/code&gt;</span></span><span style="font-style: italic"><span style="color: #9A1900"> result in a call to</span></span>
<span style="color: #000000">00020:</span> <span style="font-style: italic"><span style="color: #9A1900"> * </span></span><span style="font-weight: bold"><span style="color: #0000FF">&lt;code&gt;</span></span><span style="font-style: italic"><span style="color: #9A1900">painter.paint()</span></span><span style="font-weight: bold"><span style="color: #0000FF">&lt;/code&gt;</span></span><span style="font-style: italic"><span style="color: #9A1900">.  This is executed in the swing</span></span>
<span style="color: #000000">00021:</span> <span style="font-style: italic"><span style="color: #9A1900"> * thread while the main thread is paused for </span></span><span style="font-weight: bold"><span style="color: #0000FF">&lt;code&gt;</span></span><span style="font-style: italic"><span style="color: #9A1900">delay</span></span><span style="font-weight: bold"><span style="color: #0000FF">&lt;/code&gt;</span></span>
<span style="color: #000000">00022:</span> <span style="font-style: italic"><span style="color: #9A1900"> * milliseconds.</span></span>
<span style="color: #000000">00023:</span> <span style="font-style: italic"><span style="color: #9A1900"> */</span></span>
<span style="color: #000000">00024:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">SwingAnimator</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Animator <span style="color: #FF0000">{</span>
<span style="color: #000000">00025:</span>   <span style="font-style: italic"><span style="color: #9A1900">// The following fields are manipulated by the main program thread</span></span>
<span style="color: #000000">00026:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">int</span> _delay<span style="color: #990000">;</span>
<span style="color: #000000">00027:</span>   
<span style="color: #000000">00028:</span>   <span style="font-style: italic"><span style="color: #9A1900">// The following fields are manipulated by the swing thread</span></span>
<span style="color: #000000">00029:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> JFrame _frame<span style="color: #990000">;</span> <span style="font-style: italic"><span style="color: #9A1900">// Swing representation of an OS window</span></span>
<span style="color: #000000">00030:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> ContentPane _content<span style="color: #990000">;</span> <span style="font-style: italic"><span style="color: #9A1900">// A paintable component</span></span>
<span style="color: #000000">00031:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">boolean</span> _disposed <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">false</span></span><span style="color: #990000">;</span> <span style="font-style: italic"><span style="color: #9A1900">// If true, then die</span></span>
<span style="color: #000000">00032:</span>   
<span style="color: #000000">00033:</span>   <span style="font-style: italic"><span style="color: #9A1900">// The following fields are manipulated by both threads</span></span>
<span style="color: #000000">00034:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">boolean</span> _lock <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">false</span></span><span style="color: #990000">;</span> <span style="font-style: italic"><span style="color: #9A1900">// Used to synchronize the threads</span></span>
<span style="color: #000000">00035:</span> 
<span style="color: #000000">00036:</span>   <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00037:</span> <span style="font-style: italic"><span style="color: #9A1900">   * Creates and displays a {</span></span><span style="color: #009900">@link</span><span style="font-style: italic"><span style="color: #9A1900"> JFrame} for the animation.</span></span>
<span style="color: #000000">00038:</span> <span style="font-style: italic"><span style="color: #9A1900">   * </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> name  The name to be displayed on the graphical window.</span></span>
<span style="color: #000000">00039:</span> <span style="font-style: italic"><span style="color: #9A1900">   * </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> width The width of the display, in pixels.</span></span>
<span style="color: #000000">00040:</span> <span style="font-style: italic"><span style="color: #9A1900">   * </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> height The height of the display, in pixels.</span></span>
<span style="color: #000000">00041:</span> <span style="font-style: italic"><span style="color: #9A1900">   * </span></span><span style="color: #009900">@param</span><span style="font-style: italic"><span style="color: #9A1900"> delay Time to pause after an update, in milliseconds.</span></span>
<span style="color: #000000">00042:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00043:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">SwingAnimator</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">final</span></span> SwingAnimatorPainter painter<span style="color: #990000">,</span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> String name<span style="color: #990000">,</span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #009900">int</span> width<span style="color: #990000">,</span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #009900">int</span> height<span style="color: #990000">,</span> <span style="color: #009900">int</span> delay<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00044:</span>     _delay <span style="color: #990000">=</span> delay<span style="color: #990000">;</span>
<span style="color: #000000">00045:</span>     <span style="font-style: italic"><span style="color: #9A1900">// Create a graphics window and display it</span></span>
<span style="color: #000000">00046:</span>     SwingUtilities<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">invokeLater</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Runnable</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00047:</span>         <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00048:</span>           _content <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">ContentPane</span></span><span style="color: #990000">(</span>painter<span style="color: #990000">,</span> width<span style="color: #990000">,</span> height<span style="color: #990000">);</span> <span style="font-style: italic"><span style="color: #9A1900">// A paintable component for content</span></span>
<span style="color: #000000">00049:</span>           _frame <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">JFrame</span></span><span style="color: #990000">();</span>  <span style="font-style: italic"><span style="color: #9A1900">// An OS window</span></span>
<span style="color: #000000">00050:</span>           _frame<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">setTitle</span></span><span style="color: #990000">(</span>name<span style="color: #990000">);</span>  <span style="font-style: italic"><span style="color: #9A1900">// The title of the Frame</span></span>
<span style="color: #000000">00051:</span>           _frame<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">setDefaultCloseOperation</span></span><span style="color: #990000">(</span>WindowConstants<span style="color: #990000">.</span>EXIT_ON_CLOSE<span style="color: #990000">);</span>  <span style="font-style: italic"><span style="color: #9A1900">// End program if Frame is closed</span></span>
<span style="color: #000000">00052:</span>           _frame<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">setContentPane</span></span><span style="color: #990000">(</span>_content<span style="color: #990000">);</span> <span style="font-style: italic"><span style="color: #9A1900">// Associate the content with the Frame</span></span>
<span style="color: #000000">00053:</span>           _frame<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">pack</span></span><span style="color: #990000">();</span> <span style="font-style: italic"><span style="color: #9A1900">// Fix the layout of the Frame</span></span>
<span style="color: #000000">00054:</span>           _frame<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">setVisible</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">true</span></span><span style="color: #990000">);</span> <span style="font-style: italic"><span style="color: #9A1900">// Display the Frame</span></span>
<span style="color: #000000">00055:</span>         <span style="color: #FF0000">}}</span><span style="color: #990000">);</span>
<span style="color: #000000">00056:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00057:</span> 
<span style="color: #000000">00058:</span>   <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00059:</span> <span style="font-style: italic"><span style="color: #9A1900">   * Throw away this visualization.</span></span>
<span style="color: #000000">00060:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00061:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">dispose</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00062:</span>     SwingUtilities<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">invokeLater</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Runnable</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00063:</span>         <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00064:</span>           _frame<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">dispose</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00065:</span>           _disposed <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">true</span></span><span style="color: #990000">;</span>
<span style="color: #000000">00066:</span>         <span style="color: #FF0000">}}</span><span style="color: #990000">);</span>
<span style="color: #000000">00067:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00068:</span> 
<span style="color: #000000">00069:</span>   <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00070:</span> <span style="font-style: italic"><span style="color: #9A1900">   * Calls to </span></span><span style="font-weight: bold"><span style="color: #0000FF">&lt;code&gt;</span></span><span style="font-style: italic"><span style="color: #9A1900">update</span></span><span style="font-weight: bold"><span style="color: #0000FF">&lt;/code&gt;</span></span><span style="font-style: italic"><span style="color: #9A1900"> are executed in the swing thread,</span></span>
<span style="color: #000000">00071:</span> <span style="font-style: italic"><span style="color: #9A1900">   * while the main thread is paused for </span></span><span style="font-weight: bold"><span style="color: #0000FF">&lt;code&gt;</span></span><span style="font-style: italic"><span style="color: #9A1900">delay</span></span><span style="font-weight: bold"><span style="color: #0000FF">&lt;/code&gt;</span></span>
<span style="color: #000000">00072:</span> <span style="font-style: italic"><span style="color: #9A1900">   * milliseconds.</span></span>
<span style="color: #000000">00073:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00074:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">update</span></span><span style="color: #990000">(</span>Observable o<span style="color: #990000">,</span> Object arg<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00075:</span>     <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>_disposed<span style="color: #990000">)</span>
<span style="color: #000000">00076:</span>       <span style="font-weight: bold"><span style="color: #0000FF">throw</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">IllegalStateException</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00077:</span>     
<span style="color: #000000">00078:</span>     _lock <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">true</span></span><span style="color: #990000">;</span>
<span style="color: #000000">00079:</span>     <span style="font-style: italic"><span style="color: #9A1900">// Redraw the window</span></span>
<span style="color: #000000">00080:</span>     SwingUtilities<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">invokeLater</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Runnable</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00081:</span>         <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00082:</span>           <span style="font-style: italic"><span style="color: #9A1900">// _content.repaint() causes a call to _content.paint(g)</span></span>
<span style="color: #000000">00083:</span>           <span style="font-style: italic"><span style="color: #9A1900">// where g is an appropriate graphics argument.</span></span>
<span style="color: #000000">00084:</span>           _content<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">repaint</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00085:</span>           _lock <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">false</span></span><span style="color: #990000">;</span>
<span style="color: #000000">00086:</span>         <span style="color: #FF0000">}}</span><span style="color: #990000">);</span>
<span style="color: #000000">00087:</span>     
<span style="color: #000000">00088:</span>     <span style="font-style: italic"><span style="color: #9A1900">// Delay the main thread</span></span>
<span style="color: #000000">00089:</span>     <span style="font-weight: bold"><span style="color: #0000FF">try</span></span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00090:</span>       <span style="font-weight: bold"><span style="color: #0000FF">while</span></span> <span style="color: #990000">(</span>_lock<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00091:</span>         Thread<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">currentThread</span></span><span style="color: #990000">().</span><span style="font-weight: bold"><span style="color: #000000">sleep</span></span><span style="color: #990000">(</span>_delay<span style="color: #990000">);</span>
<span style="color: #000000">00092:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00093:</span>     <span style="color: #FF0000">}</span> <span style="font-weight: bold"><span style="color: #0000FF">catch</span></span> <span style="color: #990000">(</span>InterruptedException e<span style="color: #990000">)</span> <span style="color: #FF0000">{}</span>
<span style="color: #000000">00094:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00095:</span> 
<span style="color: #000000">00096:</span>   <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00097:</span> <span style="font-style: italic"><span style="color: #9A1900">   * A component for painting.</span></span>
<span style="color: #000000">00098:</span> <span style="font-style: italic"><span style="color: #9A1900">   * All code is executed in the swing thread.</span></span>
<span style="color: #000000">00099:</span> <span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<span style="color: #000000">00100:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">ContentPane</span> <span style="font-weight: bold"><span style="color: #0000FF">extends</span></span> JPanel <span style="color: #FF0000">{</span>
<span style="color: #000000">00101:</span>     <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> <span style="color: #009900">long</span> serialVersionUID <span style="color: #990000">=</span> <span style="color: #993399">2008L</span><span style="color: #990000">;</span>
<span style="color: #000000">00102:</span>     <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">int</span> _width<span style="color: #990000">;</span>
<span style="color: #000000">00103:</span>     <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">int</span> _height<span style="color: #990000">;</span>
<span style="color: #000000">00104:</span>     <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> SwingAnimatorPainter _painter<span style="color: #990000">;</span>
<span style="color: #000000">00105:</span>     
<span style="color: #000000">00106:</span>     <span style="font-weight: bold"><span style="color: #000000">ContentPane</span></span><span style="color: #990000">(</span>SwingAnimatorPainter painter<span style="color: #990000">,</span> <span style="color: #009900">int</span> width<span style="color: #990000">,</span> <span style="color: #009900">int</span> height<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00107:</span>       _painter <span style="color: #990000">=</span> painter<span style="color: #990000">;</span>
<span style="color: #000000">00108:</span>       _width <span style="color: #990000">=</span> width<span style="color: #990000">;</span>
<span style="color: #000000">00109:</span>       _height <span style="color: #990000">=</span> height<span style="color: #990000">;</span>
<span style="color: #000000">00110:</span>       <span style="font-weight: bold"><span style="color: #000000">setPreferredSize</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Dimension</span></span><span style="color: #990000">(</span>width<span style="color: #990000">,</span> height<span style="color: #990000">));</span>
<span style="color: #000000">00111:</span>       <span style="font-weight: bold"><span style="color: #000000">setDoubleBuffered</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">true</span></span><span style="color: #990000">);</span>
<span style="color: #000000">00112:</span>       <span style="font-weight: bold"><span style="color: #000000">setOpaque</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">true</span></span><span style="color: #990000">);</span>
<span style="color: #000000">00113:</span>       <span style="font-weight: bold"><span style="color: #000000">setBackground</span></span><span style="color: #990000">(</span>Color<span style="color: #990000">.</span>WHITE<span style="color: #990000">);</span>
<span style="color: #000000">00114:</span>     <span style="color: #FF0000">}</span>
<span style="color: #000000">00115:</span>     
<span style="color: #000000">00116:</span>     <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">setPainter</span></span><span style="color: #990000">(</span>SwingAnimatorPainter painter<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00117:</span>       _painter <span style="color: #990000">=</span> painter<span style="color: #990000">;</span>
<span style="color: #000000">00118:</span>     <span style="color: #FF0000">}</span>
<span style="color: #000000">00119:</span> 
<span style="color: #000000">00120:</span>     <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">paint</span></span><span style="color: #990000">(</span>Graphics g<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00121:</span>       <span style="font-style: italic"><span style="color: #9A1900">// This test is necessary because the swing thread may call this</span></span>
<span style="color: #000000">00122:</span>       <span style="font-style: italic"><span style="color: #9A1900">// method before the simulation calls SwingAnimator.update()</span></span>
<span style="color: #000000">00123:</span>       <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>_painter <span style="color: #990000">!=</span> <span style="font-weight: bold"><span style="color: #0000FF">null</span></span> <span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00124:</span>         <span style="font-style: italic"><span style="color: #9A1900">// The clearRect is necessary, since JPanel is lightweight</span></span>
<span style="color: #000000">00125:</span>         g<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">clearRect</span></span><span style="color: #990000">(</span><span style="color: #993399">0</span><span style="color: #990000">,</span> <span style="color: #993399">0</span><span style="color: #990000">,</span> _width<span style="color: #990000">,</span> _height<span style="color: #990000">);</span>
<span style="color: #000000">00126:</span>         _painter<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">paint</span></span><span style="color: #990000">(</span>g<span style="color: #990000">);</span>
<span style="color: #000000">00127:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00128:</span>     <span style="color: #FF0000">}</span>
<span style="color: #000000">00129:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00130:</span> <span style="color: #FF0000">}</span>
</tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a href="../code/html/project/util/SwingAnimatorPainter_java.html">file:SwingAnimatorPainter.java</a> [<a href="../code/src/project/util/SwingAnimatorPainter.java">source</a>] [<a href="../code/doc-publicproject/util/SwingAnimatorPainter.html">doc-public</a>] [<a href="../code/doc-privateproject/util/SwingAnimatorPainter.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> project<span style="color: #990000">.</span>util<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> 
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>awt<span style="color: #990000">.</span>Graphics<span style="color: #990000">;</span>
<span style="color: #000000">00004:</span> 
<span style="color: #000000">00005:</span> <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00006:</span> <span style="font-style: italic"><span style="color: #9A1900"> * Callback interface for {</span></span><span style="color: #009900">@link</span><span style="font-style: italic"><span style="color: #9A1900"> SwingAnimator}.</span></span>
<span style="color: #000000">00007:</span> <span style="font-style: italic"><span style="color: #9A1900"> * </span></span><span style="color: #009900">@see</span><span style="font-style: italic"><span style="color: #9A1900"> SwingAnimator</span></span>
<span style="color: #000000">00008:</span> <span style="font-style: italic"><span style="color: #9A1900"> */</span></span>
<span style="color: #000000">00009:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">interface</span></span> <span style="color: #009900">SwingAnimatorPainter</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00010:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">paint</span></span><span style="color: #990000">(</span>Graphics arg<span style="color: #990000">);</span>
<span style="color: #000000">00011:</span> <span style="color: #FF0000">}</span>
</tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a href="../code/html/project/model/swing/VP_java.html">file:VP.java</a> [<a href="../code/src/project/model/swing/VP.java">source</a>] [<a href="../code/doc-publicproject/model/swing/VP.html">doc-public</a>] [<a href="../code/doc-privateproject/model/swing/VP.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> project<span style="color: #990000">.</span>model<span style="color: #990000">.</span>swing<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> 
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> project<span style="color: #990000">.</span>model<span style="color: #990000">.</span>MP<span style="color: #990000">;</span>
<span style="color: #000000">00004:</span> 
<span style="color: #000000">00005:</span> <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00006:</span> <span style="font-style: italic"><span style="color: #9A1900"> * Static class for visualization parameters.</span></span>
<span style="color: #000000">00007:</span> <span style="font-style: italic"><span style="color: #9A1900"> */</span></span>
<span style="color: #000000">00008:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">VP</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00009:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #000000">VP</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{}</span>
<span style="color: #000000">00010:</span>   <span style="font-style: italic"><span style="color: #9A1900">/** Width of model elements, in meters */</span></span>
<span style="color: #000000">00011:</span>   <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">double</span> elementWidth <span style="color: #990000">=</span> MP<span style="color: #990000">.</span>carLength<span style="color: #990000">;</span>
<span style="color: #000000">00012:</span>   <span style="font-style: italic"><span style="color: #9A1900">/** Gap between model elements, in meters */</span></span>
<span style="color: #000000">00013:</span>   <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">double</span> gap <span style="color: #990000">=</span> <span style="color: #993399">1</span><span style="color: #990000">;</span>
<span style="color: #000000">00014:</span>   <span style="font-style: italic"><span style="color: #9A1900">/** Width of the displayed graphics window, in pixels */</span></span>
<span style="color: #000000">00015:</span>   <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">int</span> displayWidth <span style="color: #990000">=</span> <span style="color: #993399">1000</span><span style="color: #990000">;</span>
<span style="color: #000000">00016:</span>   <span style="font-style: italic"><span style="color: #9A1900">/** Height of the displayed graphics window, in pixels */</span></span>
<span style="color: #000000">00017:</span>   <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">int</span> displayHeight <span style="color: #990000">=</span> <span style="color: #993399">1000</span><span style="color: #990000">;</span>
<span style="color: #000000">00018:</span>   <span style="font-style: italic"><span style="color: #9A1900">/** Delay introduced into each graphics update, in milliseconds */</span></span>
<span style="color: #000000">00019:</span>   <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">int</span> displayDelay <span style="color: #990000">=</span> <span style="color: #993399">50</span><span style="color: #990000">;</span>
<span style="color: #000000">00020:</span>   <span style="font-style: italic"><span style="color: #9A1900">/** Scalefactor relating model space to pixels, in pixels/meter */</span></span>
<span style="color: #000000">00021:</span>   <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">double</span> scaleFactor <span style="color: #990000">=</span> <span style="color: #993399">1</span><span style="color: #990000">;</span>
<span style="color: #000000">00022:</span> <span style="color: #FF0000">}</span>
</tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a href="../code/html/project/model/swing/SwingAnimatorBuilder_java.html">file:SwingAnimatorBuilder.java</a> [<a href="../code/src/project/model/swing/SwingAnimatorBuilder.java">source</a>] [<a href="../code/doc-publicproject/model/swing/SwingAnimatorBuilder.html">doc-public</a>] [<a href="../code/doc-privateproject/model/swing/SwingAnimatorBuilder.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> project<span style="color: #990000">.</span>model<span style="color: #990000">.</span>swing<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> 
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>awt<span style="color: #990000">.</span>Color<span style="color: #990000">;</span>
<span style="color: #000000">00004:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>awt<span style="color: #990000">.</span>Graphics<span style="color: #990000">;</span>
<span style="color: #000000">00005:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>util<span style="color: #990000">.</span>ArrayList<span style="color: #990000">;</span>
<span style="color: #000000">00006:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>util<span style="color: #990000">.</span>List<span style="color: #990000">;</span>
<span style="color: #000000">00007:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> project<span style="color: #990000">.</span>model<span style="color: #990000">.</span>AnimatorBuilder<span style="color: #990000">;</span>
<span style="color: #000000">00008:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> project<span style="color: #990000">.</span>model<span style="color: #990000">.</span>Car<span style="color: #990000">;</span>
<span style="color: #000000">00009:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> project<span style="color: #990000">.</span>model<span style="color: #990000">.</span>Light<span style="color: #990000">;</span>
<span style="color: #000000">00010:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> project<span style="color: #990000">.</span>model<span style="color: #990000">.</span>MP<span style="color: #990000">;</span>
<span style="color: #000000">00011:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> project<span style="color: #990000">.</span>model<span style="color: #990000">.</span>Road<span style="color: #990000">;</span>
<span style="color: #000000">00012:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> project<span style="color: #990000">.</span>util<span style="color: #990000">.</span>Animator<span style="color: #990000">;</span>
<span style="color: #000000">00013:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> project<span style="color: #990000">.</span>util<span style="color: #990000">.</span>SwingAnimator<span style="color: #990000">;</span>
<span style="color: #000000">00014:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> project<span style="color: #990000">.</span>util<span style="color: #990000">.</span>SwingAnimatorPainter<span style="color: #990000">;</span>
<span style="color: #000000">00015:</span> 
<span style="color: #000000">00016:</span> <span style="font-style: italic"><span style="color: #9A1900">/** </span></span>
<span style="color: #000000">00017:</span> <span style="font-style: italic"><span style="color: #9A1900"> * A class for building Animators.</span></span>
<span style="color: #000000">00018:</span> <span style="font-style: italic"><span style="color: #9A1900"> */</span></span>
<span style="color: #000000">00019:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">SwingAnimatorBuilder</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> AnimatorBuilder <span style="color: #FF0000">{</span>
<span style="color: #000000">00020:</span>   MyPainter _painter<span style="color: #990000">;</span>
<span style="color: #000000">00021:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">SwingAnimatorBuilder</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00022:</span>     _painter <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">MyPainter</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00023:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00024:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> Animator <span style="font-weight: bold"><span style="color: #000000">getAnimator</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00025:</span>     <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>_painter <span style="color: #990000">==</span> <span style="font-weight: bold"><span style="color: #0000FF">null</span></span><span style="color: #990000">)</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">throw</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">IllegalStateException</span></span><span style="color: #990000">();</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00026:</span>     Animator returnValue <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">SwingAnimator</span></span><span style="color: #990000">(</span>_painter<span style="color: #990000">,</span> <span style="color: #FF0000">"Traffic Simulator"</span><span style="color: #990000">,</span>
<span style="color: #000000">00027:</span>                                              VP<span style="color: #990000">.</span>displayWidth<span style="color: #990000">,</span> VP<span style="color: #990000">.</span>displayHeight<span style="color: #990000">,</span> VP<span style="color: #990000">.</span>displayDelay<span style="color: #990000">);</span>
<span style="color: #000000">00028:</span>     _painter <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">null</span></span><span style="color: #990000">;</span>
<span style="color: #000000">00029:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> returnValue<span style="color: #990000">;</span>
<span style="color: #000000">00030:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00031:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">double</span> skipInit <span style="color: #990000">=</span> VP<span style="color: #990000">.</span>gap<span style="color: #990000">;</span>
<span style="color: #000000">00032:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">double</span> skipRoad <span style="color: #990000">=</span> VP<span style="color: #990000">.</span>gap <span style="color: #990000">+</span> MP<span style="color: #990000">.</span>roadLength<span style="color: #990000">;</span>
<span style="color: #000000">00033:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">double</span> skipCar <span style="color: #990000">=</span> VP<span style="color: #990000">.</span>gap <span style="color: #990000">+</span> VP<span style="color: #990000">.</span>elementWidth<span style="color: #990000">;</span>
<span style="color: #000000">00034:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">double</span> skipRoadCar <span style="color: #990000">=</span> skipRoad <span style="color: #990000">+</span> skipCar<span style="color: #990000">;</span>
<span style="color: #000000">00035:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">addLight</span></span><span style="color: #990000">(</span>Light d<span style="color: #990000">,</span> <span style="color: #009900">int</span> i<span style="color: #990000">,</span> <span style="color: #009900">int</span> j<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00036:</span>     <span style="color: #009900">double</span> x <span style="color: #990000">=</span> skipInit <span style="color: #990000">+</span> skipRoad <span style="color: #990000">+</span> j<span style="color: #990000">*</span>skipRoadCar<span style="color: #990000">;</span>
<span style="color: #000000">00037:</span>     <span style="color: #009900">double</span> y <span style="color: #990000">=</span> skipInit <span style="color: #990000">+</span> skipRoad <span style="color: #990000">+</span> i<span style="color: #990000">*</span>skipRoadCar<span style="color: #990000">;</span>
<span style="color: #000000">00038:</span>     Translator t <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">TranslatorWE</span></span><span style="color: #990000">(</span>x<span style="color: #990000">,</span> y<span style="color: #990000">,</span> MP<span style="color: #990000">.</span>carLength<span style="color: #990000">,</span> VP<span style="color: #990000">.</span>elementWidth<span style="color: #990000">,</span> VP<span style="color: #990000">.</span>scaleFactor<span style="color: #990000">);</span>
<span style="color: #000000">00039:</span>     _painter<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">addLight</span></span><span style="color: #990000">(</span>d<span style="color: #990000">,</span>t<span style="color: #990000">);</span>
<span style="color: #000000">00040:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00041:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">addHorizontalRoad</span></span><span style="color: #990000">(</span>Road l<span style="color: #990000">,</span> <span style="color: #009900">int</span> i<span style="color: #990000">,</span> <span style="color: #009900">int</span> j<span style="color: #990000">,</span> <span style="color: #009900">boolean</span> eastToWest<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00042:</span>     <span style="color: #009900">double</span> x <span style="color: #990000">=</span> skipInit <span style="color: #990000">+</span> j<span style="color: #990000">*</span>skipRoadCar<span style="color: #990000">;</span>
<span style="color: #000000">00043:</span>     <span style="color: #009900">double</span> y <span style="color: #990000">=</span> skipInit <span style="color: #990000">+</span> skipRoad <span style="color: #990000">+</span> i<span style="color: #990000">*</span>skipRoadCar<span style="color: #990000">;</span>
<span style="color: #000000">00044:</span>     Translator t <span style="color: #990000">=</span> eastToWest <span style="color: #990000">?</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">TranslatorEW</span></span><span style="color: #990000">(</span>x<span style="color: #990000">,</span> y<span style="color: #990000">,</span> MP<span style="color: #990000">.</span>roadLength<span style="color: #990000">,</span> VP<span style="color: #990000">.</span>elementWidth<span style="color: #990000">,</span> VP<span style="color: #990000">.</span>scaleFactor<span style="color: #990000">)</span>
<span style="color: #000000">00045:</span>                               <span style="color: #990000">:</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">TranslatorWE</span></span><span style="color: #990000">(</span>x<span style="color: #990000">,</span> y<span style="color: #990000">,</span> MP<span style="color: #990000">.</span>roadLength<span style="color: #990000">,</span> VP<span style="color: #990000">.</span>elementWidth<span style="color: #990000">,</span> VP<span style="color: #990000">.</span>scaleFactor<span style="color: #990000">);</span>
<span style="color: #000000">00046:</span>     _painter<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">addRoad</span></span><span style="color: #990000">(</span>l<span style="color: #990000">,</span>t<span style="color: #990000">);</span>
<span style="color: #000000">00047:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00048:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">addVerticalRoad</span></span><span style="color: #990000">(</span>Road l<span style="color: #990000">,</span> <span style="color: #009900">int</span> i<span style="color: #990000">,</span> <span style="color: #009900">int</span> j<span style="color: #990000">,</span> <span style="color: #009900">boolean</span> southToNorth<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00049:</span>     <span style="color: #009900">double</span> x <span style="color: #990000">=</span> skipInit <span style="color: #990000">+</span> skipRoad <span style="color: #990000">+</span> j<span style="color: #990000">*</span>skipRoadCar<span style="color: #990000">;</span>
<span style="color: #000000">00050:</span>     <span style="color: #009900">double</span> y <span style="color: #990000">=</span> skipInit <span style="color: #990000">+</span> i<span style="color: #990000">*</span>skipRoadCar<span style="color: #990000">;</span>
<span style="color: #000000">00051:</span>     Translator t <span style="color: #990000">=</span> southToNorth <span style="color: #990000">?</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">TranslatorSN</span></span><span style="color: #990000">(</span>x<span style="color: #990000">,</span> y<span style="color: #990000">,</span> MP<span style="color: #990000">.</span>roadLength<span style="color: #990000">,</span> VP<span style="color: #990000">.</span>elementWidth<span style="color: #990000">,</span> VP<span style="color: #990000">.</span>scaleFactor<span style="color: #990000">)</span>
<span style="color: #000000">00052:</span>                                 <span style="color: #990000">:</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">TranslatorNS</span></span><span style="color: #990000">(</span>x<span style="color: #990000">,</span> y<span style="color: #990000">,</span> MP<span style="color: #990000">.</span>roadLength<span style="color: #990000">,</span> VP<span style="color: #990000">.</span>elementWidth<span style="color: #990000">,</span> VP<span style="color: #990000">.</span>scaleFactor<span style="color: #990000">);</span>
<span style="color: #000000">00053:</span>     _painter<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">addRoad</span></span><span style="color: #990000">(</span>l<span style="color: #990000">,</span>t<span style="color: #990000">);</span>
<span style="color: #000000">00054:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00055:</span> 
<span style="color: #000000">00056:</span> 
<span style="color: #000000">00057:</span>   <span style="font-style: italic"><span style="color: #9A1900">/** Class for drawing the Model. */</span></span>
<span style="color: #000000">00058:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">MyPainter</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> SwingAnimatorPainter <span style="color: #FF0000">{</span>
<span style="color: #000000">00059:</span> 
<span style="color: #000000">00060:</span>     <span style="font-style: italic"><span style="color: #9A1900">/** Pair of a model element </span></span><span style="font-weight: bold"><span style="color: #0000FF">&lt;code&gt;</span></span><span style="font-style: italic"><span style="color: #9A1900">x</span></span><span style="font-weight: bold"><span style="color: #0000FF">&lt;/code&gt;</span></span><span style="font-style: italic"><span style="color: #9A1900"> and a translator </span></span><span style="font-weight: bold"><span style="color: #0000FF">&lt;code&gt;</span></span><span style="font-style: italic"><span style="color: #9A1900">t</span></span><span style="font-weight: bold"><span style="color: #0000FF">&lt;/code&gt;</span></span><span style="font-style: italic"><span style="color: #9A1900">. */</span></span>
<span style="color: #000000">00061:</span>     <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">Element</span><span style="color: #990000">&lt;</span>T<span style="color: #990000">&gt;</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00062:</span>       T x<span style="color: #990000">;</span>
<span style="color: #000000">00063:</span>       Translator t<span style="color: #990000">;</span>
<span style="color: #000000">00064:</span>       <span style="font-weight: bold"><span style="color: #000000">Element</span></span><span style="color: #990000">(</span>T x<span style="color: #990000">,</span> Translator t<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00065:</span>         <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">.</span>x <span style="color: #990000">=</span> x<span style="color: #990000">;</span>
<span style="color: #000000">00066:</span>         <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">.</span>t <span style="color: #990000">=</span> t<span style="color: #990000">;</span>
<span style="color: #000000">00067:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00068:</span>     <span style="color: #FF0000">}</span>
<span style="color: #000000">00069:</span>     
<span style="color: #000000">00070:</span>     <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> List<span style="color: #990000">&lt;</span>Element<span style="color: #990000">&lt;</span>Road<span style="color: #990000">&gt;&gt;</span> _roadElements<span style="color: #990000">;</span>
<span style="color: #000000">00071:</span>     <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> List<span style="color: #990000">&lt;</span>Element<span style="color: #990000">&lt;</span>Light<span style="color: #990000">&gt;&gt;</span> _lightElements<span style="color: #990000">;</span>
<span style="color: #000000">00072:</span>     <span style="font-weight: bold"><span style="color: #000000">MyPainter</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00073:</span>       _roadElements <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> ArrayList<span style="color: #990000">&lt;</span>Element<span style="color: #990000">&lt;</span>Road<span style="color: #990000">&gt;&gt;();</span>
<span style="color: #000000">00074:</span>       _lightElements <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> ArrayList<span style="color: #990000">&lt;</span>Element<span style="color: #990000">&lt;</span>Light<span style="color: #990000">&gt;&gt;();</span>
<span style="color: #000000">00075:</span>     <span style="color: #FF0000">}</span>    
<span style="color: #000000">00076:</span>     <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">addLight</span></span><span style="color: #990000">(</span>Light x<span style="color: #990000">,</span> Translator t<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00077:</span>       _lightElements<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">add</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">new</span></span> Element<span style="color: #990000">&lt;</span>Light<span style="color: #990000">&gt;(</span>x<span style="color: #990000">,</span>t<span style="color: #990000">));</span>
<span style="color: #000000">00078:</span>     <span style="color: #FF0000">}</span>
<span style="color: #000000">00079:</span>     <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">addRoad</span></span><span style="color: #990000">(</span>Road x<span style="color: #990000">,</span> Translator t<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00080:</span>       _roadElements<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">add</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">new</span></span> Element<span style="color: #990000">&lt;</span>Road<span style="color: #990000">&gt;(</span>x<span style="color: #990000">,</span>t<span style="color: #990000">));</span>
<span style="color: #000000">00081:</span>     <span style="color: #FF0000">}</span>
<span style="color: #000000">00082:</span>     
<span style="color: #000000">00083:</span>     <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">paint</span></span><span style="color: #990000">(</span>Graphics g<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00084:</span>       <span style="font-style: italic"><span style="color: #9A1900">// draw the background elements</span></span>
<span style="color: #000000">00085:</span>       <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span>Element<span style="color: #990000">&lt;</span>Light<span style="color: #990000">&gt;</span> e <span style="color: #990000">:</span> _lightElements<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00086:</span>         <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>e<span style="color: #990000">.</span>x<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getState</span></span><span style="color: #990000">())</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00087:</span>           g<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">setColor</span></span><span style="color: #990000">(</span>Color<span style="color: #990000">.</span>BLUE<span style="color: #990000">);</span>
<span style="color: #000000">00088:</span>         <span style="color: #FF0000">}</span> <span style="font-weight: bold"><span style="color: #0000FF">else</span></span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00089:</span>           g<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">setColor</span></span><span style="color: #990000">(</span>Color<span style="color: #990000">.</span>YELLOW<span style="color: #990000">);</span>
<span style="color: #000000">00090:</span>         <span style="color: #FF0000">}</span>
<span style="color: #000000">00091:</span>         XGraphics<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">fillOval</span></span><span style="color: #990000">(</span>g<span style="color: #990000">,</span> e<span style="color: #990000">.</span>t<span style="color: #990000">,</span> <span style="color: #993399">0</span><span style="color: #990000">,</span> <span style="color: #993399">0</span><span style="color: #990000">,</span> MP<span style="color: #990000">.</span>carLength<span style="color: #990000">,</span> VP<span style="color: #990000">.</span>elementWidth<span style="color: #990000">);</span>
<span style="color: #000000">00092:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00093:</span>       g<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">setColor</span></span><span style="color: #990000">(</span>Color<span style="color: #990000">.</span>BLACK<span style="color: #990000">);</span>
<span style="color: #000000">00094:</span>       <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span>Element<span style="color: #990000">&lt;</span>Road<span style="color: #990000">&gt;</span> e <span style="color: #990000">:</span> _roadElements<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00095:</span>         XGraphics<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">fillRect</span></span><span style="color: #990000">(</span>g<span style="color: #990000">,</span> e<span style="color: #990000">.</span>t<span style="color: #990000">,</span> <span style="color: #993399">0</span><span style="color: #990000">,</span> <span style="color: #993399">0</span><span style="color: #990000">,</span> MP<span style="color: #990000">.</span>roadLength<span style="color: #990000">,</span> VP<span style="color: #990000">.</span>elementWidth<span style="color: #990000">);</span>
<span style="color: #000000">00096:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00097:</span>       
<span style="color: #000000">00098:</span>       <span style="font-style: italic"><span style="color: #9A1900">// draw the foreground elements</span></span>
<span style="color: #000000">00099:</span>       <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span>Element<span style="color: #990000">&lt;</span>Road<span style="color: #990000">&gt;</span> e <span style="color: #990000">:</span> _roadElements<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00100:</span>         <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span>Car d <span style="color: #990000">:</span> e<span style="color: #990000">.</span>x<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getCars</span></span><span style="color: #990000">())</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00101:</span>           g<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">setColor</span></span><span style="color: #990000">(</span>d<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getColor</span></span><span style="color: #990000">());</span>
<span style="color: #000000">00102:</span>           XGraphics<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">fillOval</span></span><span style="color: #990000">(</span>g<span style="color: #990000">,</span> e<span style="color: #990000">.</span>t<span style="color: #990000">,</span> d<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getPosition</span></span><span style="color: #990000">(),</span> <span style="color: #993399">0</span><span style="color: #990000">,</span> MP<span style="color: #990000">.</span>carLength<span style="color: #990000">,</span> VP<span style="color: #990000">.</span>elementWidth<span style="color: #990000">);</span>
<span style="color: #000000">00103:</span>         <span style="color: #FF0000">}</span>
<span style="color: #000000">00104:</span>       <span style="color: #FF0000">}</span>
<span style="color: #000000">00105:</span>     <span style="color: #FF0000">}</span>
<span style="color: #000000">00106:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00107:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00108:</span> 
</tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a href="../code/html/project/model/swing/XGraphics_java.html">file:XGraphics.java</a> [<a href="../code/src/project/model/swing/XGraphics.java">source</a>] [<a href="../code/doc-publicproject/model/swing/XGraphics.html">doc-public</a>] [<a href="../code/doc-privateproject/model/swing/XGraphics.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> project<span style="color: #990000">.</span>model<span style="color: #990000">.</span>swing<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> 
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>awt<span style="color: #990000">.</span>Graphics<span style="color: #990000">;</span>
<span style="color: #000000">00004:</span> 
<span style="color: #000000">00005:</span> <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00006:</span> <span style="font-style: italic"><span style="color: #9A1900"> * Static class for drawing using a Translation.</span></span>
<span style="color: #000000">00007:</span> <span style="font-style: italic"><span style="color: #9A1900"> */</span></span>
<span style="color: #000000">00008:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">XGraphics</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00009:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #000000">XGraphics</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{}</span>
<span style="color: #000000">00010:</span>   <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">clearRect</span></span><span style="color: #990000">(</span>Graphics g<span style="color: #990000">,</span> Translator t<span style="color: #990000">,</span> <span style="color: #009900">double</span> x<span style="color: #990000">,</span> <span style="color: #009900">double</span> y<span style="color: #990000">,</span> <span style="color: #009900">double</span> w<span style="color: #990000">,</span> <span style="color: #009900">double</span> h<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00011:</span>     g<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">clearRect</span></span><span style="color: #990000">(</span>t<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getX</span></span><span style="color: #990000">(</span>x<span style="color: #990000">,</span>y<span style="color: #990000">,</span>w<span style="color: #990000">,</span>h<span style="color: #990000">),</span> t<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getY</span></span><span style="color: #990000">(</span>x<span style="color: #990000">,</span>y<span style="color: #990000">,</span>w<span style="color: #990000">,</span>h<span style="color: #990000">),</span> t<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getWidth</span></span><span style="color: #990000">(</span>w<span style="color: #990000">,</span>h<span style="color: #990000">),</span> t<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getHeight</span></span><span style="color: #990000">(</span>w<span style="color: #990000">,</span>h<span style="color: #990000">));</span>
<span style="color: #000000">00012:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00013:</span>   <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">drawOval</span></span><span style="color: #990000">(</span>Graphics g<span style="color: #990000">,</span> Translator t<span style="color: #990000">,</span> <span style="color: #009900">double</span> x<span style="color: #990000">,</span> <span style="color: #009900">double</span> y<span style="color: #990000">,</span> <span style="color: #009900">double</span> w<span style="color: #990000">,</span> <span style="color: #009900">double</span> h<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00014:</span>     g<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">drawOval</span></span><span style="color: #990000">(</span>t<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getX</span></span><span style="color: #990000">(</span>x<span style="color: #990000">,</span>y<span style="color: #990000">,</span>w<span style="color: #990000">,</span>h<span style="color: #990000">),</span> t<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getY</span></span><span style="color: #990000">(</span>x<span style="color: #990000">,</span>y<span style="color: #990000">,</span>w<span style="color: #990000">,</span>h<span style="color: #990000">),</span> t<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getWidth</span></span><span style="color: #990000">(</span>w<span style="color: #990000">,</span>h<span style="color: #990000">),</span> t<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getHeight</span></span><span style="color: #990000">(</span>w<span style="color: #990000">,</span>h<span style="color: #990000">));</span>
<span style="color: #000000">00015:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00016:</span>   <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">drawRect</span></span><span style="color: #990000">(</span>Graphics g<span style="color: #990000">,</span> Translator t<span style="color: #990000">,</span> <span style="color: #009900">double</span> x<span style="color: #990000">,</span> <span style="color: #009900">double</span> y<span style="color: #990000">,</span> <span style="color: #009900">double</span> w<span style="color: #990000">,</span> <span style="color: #009900">double</span> h<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00017:</span>     g<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">drawRect</span></span><span style="color: #990000">(</span>t<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getX</span></span><span style="color: #990000">(</span>x<span style="color: #990000">,</span>y<span style="color: #990000">,</span>w<span style="color: #990000">,</span>h<span style="color: #990000">),</span> t<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getY</span></span><span style="color: #990000">(</span>x<span style="color: #990000">,</span>y<span style="color: #990000">,</span>w<span style="color: #990000">,</span>h<span style="color: #990000">),</span> t<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getWidth</span></span><span style="color: #990000">(</span>w<span style="color: #990000">,</span>h<span style="color: #990000">),</span> t<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getHeight</span></span><span style="color: #990000">(</span>w<span style="color: #990000">,</span>h<span style="color: #990000">));</span>
<span style="color: #000000">00018:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00019:</span>   <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">fillOval</span></span><span style="color: #990000">(</span>Graphics g<span style="color: #990000">,</span> Translator t<span style="color: #990000">,</span> <span style="color: #009900">double</span> x<span style="color: #990000">,</span> <span style="color: #009900">double</span> y<span style="color: #990000">,</span> <span style="color: #009900">double</span> w<span style="color: #990000">,</span> <span style="color: #009900">double</span> h<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00020:</span>     g<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">fillOval</span></span><span style="color: #990000">(</span>t<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getX</span></span><span style="color: #990000">(</span>x<span style="color: #990000">,</span>y<span style="color: #990000">,</span>w<span style="color: #990000">,</span>h<span style="color: #990000">),</span> t<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getY</span></span><span style="color: #990000">(</span>x<span style="color: #990000">,</span>y<span style="color: #990000">,</span>w<span style="color: #990000">,</span>h<span style="color: #990000">),</span> t<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getWidth</span></span><span style="color: #990000">(</span>w<span style="color: #990000">,</span>h<span style="color: #990000">),</span> t<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getHeight</span></span><span style="color: #990000">(</span>w<span style="color: #990000">,</span>h<span style="color: #990000">));</span>
<span style="color: #000000">00021:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00022:</span>   <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">fillRect</span></span><span style="color: #990000">(</span>Graphics g<span style="color: #990000">,</span> Translator t<span style="color: #990000">,</span> <span style="color: #009900">double</span> x<span style="color: #990000">,</span> <span style="color: #009900">double</span> y<span style="color: #990000">,</span> <span style="color: #009900">double</span> w<span style="color: #990000">,</span> <span style="color: #009900">double</span> h<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00023:</span>     g<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">fillRect</span></span><span style="color: #990000">(</span>t<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getX</span></span><span style="color: #990000">(</span>x<span style="color: #990000">,</span>y<span style="color: #990000">,</span>w<span style="color: #990000">,</span>h<span style="color: #990000">),</span> t<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getY</span></span><span style="color: #990000">(</span>x<span style="color: #990000">,</span>y<span style="color: #990000">,</span>w<span style="color: #990000">,</span>h<span style="color: #990000">),</span> t<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getWidth</span></span><span style="color: #990000">(</span>w<span style="color: #990000">,</span>h<span style="color: #990000">),</span> t<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getHeight</span></span><span style="color: #990000">(</span>w<span style="color: #990000">,</span>h<span style="color: #990000">));</span>
<span style="color: #000000">00024:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00025:</span>   <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">drawString</span></span><span style="color: #990000">(</span>Graphics g<span style="color: #990000">,</span> Translator t<span style="color: #990000">,</span> String str<span style="color: #990000">,</span> <span style="color: #009900">double</span> x<span style="color: #990000">,</span> <span style="color: #009900">double</span> y<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00026:</span>     g<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">drawString</span></span><span style="color: #990000">(</span>str<span style="color: #990000">,</span> t<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getX</span></span><span style="color: #990000">(</span>x<span style="color: #990000">,</span>y<span style="color: #990000">,</span><span style="color: #993399">0</span><span style="color: #990000">,</span><span style="color: #993399">0</span><span style="color: #990000">),</span> t<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getY</span></span><span style="color: #990000">(</span>x<span style="color: #990000">,</span>y<span style="color: #990000">,</span><span style="color: #993399">0</span><span style="color: #990000">,</span><span style="color: #993399">0</span><span style="color: #990000">));</span>
<span style="color: #000000">00027:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00028:</span> <span style="color: #FF0000">}</span>
</tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a href="../code/html/project/model/swing/Translator_java.html">file:Translator.java</a> [<a href="../code/src/project/model/swing/Translator.java">source</a>] [<a href="../code/doc-publicproject/model/swing/Translator.html">doc-public</a>] [<a href="../code/doc-privateproject/model/swing/Translator.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> project<span style="color: #990000">.</span>model<span style="color: #990000">.</span>swing<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> 
<span style="color: #000000">00003:</span> <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="color: #000000">00004:</span> <span style="font-style: italic"><span style="color: #9A1900"> * A translator from relative model space to screen graphics.</span></span>
<span style="color: #000000">00005:</span> <span style="font-style: italic"><span style="color: #9A1900"> */</span></span>
<span style="color: #000000">00006:</span> <span style="font-weight: bold"><span style="color: #0000FF">abstract</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">Translator</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00007:</span>   <span style="color: #009900">double</span> _tX<span style="color: #990000">;</span>
<span style="color: #000000">00008:</span>   <span style="color: #009900">double</span> _tY<span style="color: #990000">;</span>
<span style="color: #000000">00009:</span>   <span style="color: #009900">double</span> _tWidth<span style="color: #990000">;</span>
<span style="color: #000000">00010:</span>   <span style="color: #009900">double</span> _tHeight<span style="color: #990000">;</span>
<span style="color: #000000">00011:</span>   <span style="color: #009900">double</span> _tScaleFactor<span style="color: #990000">;</span>
<span style="color: #000000">00012:</span>   <span style="font-weight: bold"><span style="color: #000000">Translator</span></span><span style="color: #990000">(</span><span style="color: #009900">double</span> tX<span style="color: #990000">,</span> <span style="color: #009900">double</span> tY<span style="color: #990000">,</span> <span style="color: #009900">double</span> tWidth<span style="color: #990000">,</span> <span style="color: #009900">double</span> tHeight<span style="color: #990000">,</span> <span style="color: #009900">double</span> tScaleFactor<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00013:</span>     _tX <span style="color: #990000">=</span> tX<span style="color: #990000">;</span>
<span style="color: #000000">00014:</span>     _tY <span style="color: #990000">=</span> tY<span style="color: #990000">;</span>
<span style="color: #000000">00015:</span>     _tWidth <span style="color: #990000">=</span> tWidth<span style="color: #990000">;</span>
<span style="color: #000000">00016:</span>     _tHeight <span style="color: #990000">=</span> tHeight<span style="color: #990000">;</span>
<span style="color: #000000">00017:</span>     _tScaleFactor <span style="color: #990000">=</span> tScaleFactor<span style="color: #990000">;</span>
<span style="color: #000000">00018:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00019:</span>   <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">scale</span></span><span style="color: #990000">(</span><span style="color: #009900">double</span> arg<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00020:</span>     <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="color: #990000">(</span><span style="color: #009900">int</span><span style="color: #990000">)</span> Math<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">ceil</span></span><span style="color: #990000">(</span>arg <span style="color: #990000">*</span> _tScaleFactor<span style="color: #990000">);</span> 
<span style="color: #000000">00021:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00022:</span>   <span style="font-weight: bold"><span style="color: #0000FF">abstract</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">getX</span></span><span style="color: #990000">(</span><span style="color: #009900">double</span> x<span style="color: #990000">,</span> <span style="color: #009900">double</span> y<span style="color: #990000">,</span> <span style="color: #009900">double</span> width<span style="color: #990000">,</span> <span style="color: #009900">double</span> height<span style="color: #990000">);</span>
<span style="color: #000000">00023:</span>   <span style="font-weight: bold"><span style="color: #0000FF">abstract</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">getY</span></span><span style="color: #990000">(</span><span style="color: #009900">double</span> x<span style="color: #990000">,</span> <span style="color: #009900">double</span> y<span style="color: #990000">,</span> <span style="color: #009900">double</span> width<span style="color: #990000">,</span> <span style="color: #009900">double</span> height<span style="color: #990000">);</span>
<span style="color: #000000">00024:</span>   <span style="font-weight: bold"><span style="color: #0000FF">abstract</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">getWidth</span></span><span style="color: #990000">(</span><span style="color: #009900">double</span> width<span style="color: #990000">,</span> <span style="color: #009900">double</span> height<span style="color: #990000">);</span>
<span style="color: #000000">00025:</span>   <span style="font-weight: bold"><span style="color: #0000FF">abstract</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">getHeight</span></span><span style="color: #990000">(</span><span style="color: #009900">double</span> width<span style="color: #990000">,</span> <span style="color: #009900">double</span> height<span style="color: #990000">);</span>
<span style="color: #000000">00026:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00027:</span> 
<span style="color: #000000">00028:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">TranslatorWE</span> <span style="font-weight: bold"><span style="color: #0000FF">extends</span></span> Translator <span style="color: #FF0000">{</span>
<span style="color: #000000">00029:</span>   <span style="font-weight: bold"><span style="color: #000000">TranslatorWE</span></span><span style="color: #990000">(</span><span style="color: #009900">double</span> tX<span style="color: #990000">,</span> <span style="color: #009900">double</span> tY<span style="color: #990000">,</span> <span style="color: #009900">double</span> tWidth<span style="color: #990000">,</span> <span style="color: #009900">double</span> tHeight<span style="color: #990000">,</span> <span style="color: #009900">double</span> tScaleFactor<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00030:</span>     <span style="font-weight: bold"><span style="color: #0000FF">super</span></span><span style="color: #990000">(</span>tX<span style="color: #990000">,</span> tY<span style="color: #990000">,</span> tWidth<span style="color: #990000">,</span> tHeight<span style="color: #990000">,</span> tScaleFactor<span style="color: #990000">);</span>
<span style="color: #000000">00031:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00032:</span>   <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">getX</span></span><span style="color: #990000">(</span><span style="color: #009900">double</span> x<span style="color: #990000">,</span> <span style="color: #009900">double</span> y<span style="color: #990000">,</span> <span style="color: #009900">double</span> width<span style="color: #990000">,</span> <span style="color: #009900">double</span> height<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #000000">scale</span></span><span style="color: #990000">(</span>_tX<span style="color: #990000">+</span>x<span style="color: #990000">);</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00033:</span>   <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">getY</span></span><span style="color: #990000">(</span><span style="color: #009900">double</span> x<span style="color: #990000">,</span> <span style="color: #009900">double</span> y<span style="color: #990000">,</span> <span style="color: #009900">double</span> width<span style="color: #990000">,</span> <span style="color: #009900">double</span> height<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #000000">scale</span></span><span style="color: #990000">(</span>_tY<span style="color: #990000">+</span>y<span style="color: #990000">);</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00034:</span>   <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">getWidth</span></span><span style="color: #990000">(</span><span style="color: #009900">double</span> width<span style="color: #990000">,</span> <span style="color: #009900">double</span> height<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #000000">scale</span></span><span style="color: #990000">(</span>width<span style="color: #990000">);</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00035:</span>   <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">getHeight</span></span><span style="color: #990000">(</span><span style="color: #009900">double</span> width<span style="color: #990000">,</span> <span style="color: #009900">double</span> height<span style="color: #990000">)</span>  <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #000000">scale</span></span><span style="color: #990000">(</span>height<span style="color: #990000">);</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00036:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00037:</span> 
<span style="color: #000000">00038:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">TranslatorEW</span> <span style="font-weight: bold"><span style="color: #0000FF">extends</span></span> Translator <span style="color: #FF0000">{</span>
<span style="color: #000000">00039:</span>   <span style="font-weight: bold"><span style="color: #000000">TranslatorEW</span></span><span style="color: #990000">(</span><span style="color: #009900">double</span> tX<span style="color: #990000">,</span> <span style="color: #009900">double</span> tY<span style="color: #990000">,</span> <span style="color: #009900">double</span> tWidth<span style="color: #990000">,</span> <span style="color: #009900">double</span> tHeight<span style="color: #990000">,</span> <span style="color: #009900">double</span> tScaleFactor<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00040:</span>     <span style="font-weight: bold"><span style="color: #0000FF">super</span></span><span style="color: #990000">(</span>tX<span style="color: #990000">,</span> tY<span style="color: #990000">,</span> tWidth<span style="color: #990000">,</span> tHeight<span style="color: #990000">,</span> tScaleFactor<span style="color: #990000">);</span>
<span style="color: #000000">00041:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00042:</span>   <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">getX</span></span><span style="color: #990000">(</span><span style="color: #009900">double</span> x<span style="color: #990000">,</span> <span style="color: #009900">double</span> y<span style="color: #990000">,</span> <span style="color: #009900">double</span> width<span style="color: #990000">,</span> <span style="color: #009900">double</span> height<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #000000">scale</span></span><span style="color: #990000">(</span>_tX<span style="color: #990000">+</span>_tWidth<span style="color: #990000">-</span>x<span style="color: #990000">-</span>width<span style="color: #990000">);</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00043:</span>   <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">getY</span></span><span style="color: #990000">(</span><span style="color: #009900">double</span> x<span style="color: #990000">,</span> <span style="color: #009900">double</span> y<span style="color: #990000">,</span> <span style="color: #009900">double</span> width<span style="color: #990000">,</span> <span style="color: #009900">double</span> height<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #000000">scale</span></span><span style="color: #990000">(</span>_tY<span style="color: #990000">+</span>_tHeight<span style="color: #990000">-</span>y<span style="color: #990000">-</span>height<span style="color: #990000">);</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00044:</span>   <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">getWidth</span></span><span style="color: #990000">(</span><span style="color: #009900">double</span> width<span style="color: #990000">,</span> <span style="color: #009900">double</span> height<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #000000">scale</span></span><span style="color: #990000">(</span>width<span style="color: #990000">);</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00045:</span>   <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">getHeight</span></span><span style="color: #990000">(</span><span style="color: #009900">double</span> width<span style="color: #990000">,</span> <span style="color: #009900">double</span> height<span style="color: #990000">)</span>  <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #000000">scale</span></span><span style="color: #990000">(</span>height<span style="color: #990000">);</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00046:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00047:</span> 
<span style="color: #000000">00048:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">TranslatorNS</span> <span style="font-weight: bold"><span style="color: #0000FF">extends</span></span> Translator <span style="color: #FF0000">{</span>
<span style="color: #000000">00049:</span>   <span style="font-weight: bold"><span style="color: #000000">TranslatorNS</span></span><span style="color: #990000">(</span><span style="color: #009900">double</span> tX<span style="color: #990000">,</span> <span style="color: #009900">double</span> tY<span style="color: #990000">,</span> <span style="color: #009900">double</span> tWidth<span style="color: #990000">,</span> <span style="color: #009900">double</span> tHeight<span style="color: #990000">,</span> <span style="color: #009900">double</span> tScaleFactor<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00050:</span>     <span style="font-weight: bold"><span style="color: #0000FF">super</span></span><span style="color: #990000">(</span>tX<span style="color: #990000">,</span> tY<span style="color: #990000">,</span> tWidth<span style="color: #990000">,</span> tHeight<span style="color: #990000">,</span> tScaleFactor<span style="color: #990000">);</span>
<span style="color: #000000">00051:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00052:</span>   <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">getX</span></span><span style="color: #990000">(</span><span style="color: #009900">double</span> x<span style="color: #990000">,</span> <span style="color: #009900">double</span> y<span style="color: #990000">,</span> <span style="color: #009900">double</span> width<span style="color: #990000">,</span> <span style="color: #009900">double</span> height<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #000000">scale</span></span><span style="color: #990000">(</span>_tX<span style="color: #990000">+</span>y<span style="color: #990000">);</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00053:</span>   <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">getY</span></span><span style="color: #990000">(</span><span style="color: #009900">double</span> x<span style="color: #990000">,</span> <span style="color: #009900">double</span> y<span style="color: #990000">,</span> <span style="color: #009900">double</span> width<span style="color: #990000">,</span> <span style="color: #009900">double</span> height<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #000000">scale</span></span><span style="color: #990000">(</span>_tY<span style="color: #990000">+</span>x<span style="color: #990000">);</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00054:</span>   <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">getWidth</span></span><span style="color: #990000">(</span><span style="color: #009900">double</span> width<span style="color: #990000">,</span> <span style="color: #009900">double</span> height<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #000000">scale</span></span><span style="color: #990000">(</span>height<span style="color: #990000">);</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00055:</span>   <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">getHeight</span></span><span style="color: #990000">(</span><span style="color: #009900">double</span> width<span style="color: #990000">,</span> <span style="color: #009900">double</span> height<span style="color: #990000">)</span>  <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #000000">scale</span></span><span style="color: #990000">(</span>width<span style="color: #990000">);</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00056:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00057:</span> 
<span style="color: #000000">00058:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">TranslatorSN</span> <span style="font-weight: bold"><span style="color: #0000FF">extends</span></span> Translator <span style="color: #FF0000">{</span>
<span style="color: #000000">00059:</span>   <span style="font-weight: bold"><span style="color: #000000">TranslatorSN</span></span><span style="color: #990000">(</span><span style="color: #009900">double</span> tX<span style="color: #990000">,</span> <span style="color: #009900">double</span> tY<span style="color: #990000">,</span> <span style="color: #009900">double</span> tWidth<span style="color: #990000">,</span> <span style="color: #009900">double</span> tHeight<span style="color: #990000">,</span> <span style="color: #009900">double</span> tScaleFactor<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00060:</span>     <span style="font-weight: bold"><span style="color: #0000FF">super</span></span><span style="color: #990000">(</span>tX<span style="color: #990000">,</span> tY<span style="color: #990000">,</span> tWidth<span style="color: #990000">,</span> tHeight<span style="color: #990000">,</span> tScaleFactor<span style="color: #990000">);</span>
<span style="color: #000000">00061:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00062:</span>   <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">getX</span></span><span style="color: #990000">(</span><span style="color: #009900">double</span> x<span style="color: #990000">,</span> <span style="color: #009900">double</span> y<span style="color: #990000">,</span> <span style="color: #009900">double</span> width<span style="color: #990000">,</span> <span style="color: #009900">double</span> height<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #000000">scale</span></span><span style="color: #990000">(</span>_tX<span style="color: #990000">+</span>_tHeight<span style="color: #990000">-</span>y<span style="color: #990000">-</span>height<span style="color: #990000">);</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00063:</span>   <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">getY</span></span><span style="color: #990000">(</span><span style="color: #009900">double</span> x<span style="color: #990000">,</span> <span style="color: #009900">double</span> y<span style="color: #990000">,</span> <span style="color: #009900">double</span> width<span style="color: #990000">,</span> <span style="color: #009900">double</span> height<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #000000">scale</span></span><span style="color: #990000">(</span>_tY<span style="color: #990000">+</span>_tWidth<span style="color: #990000">-</span>x<span style="color: #990000">-</span>width<span style="color: #990000">);</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00064:</span>   <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">getWidth</span></span><span style="color: #990000">(</span><span style="color: #009900">double</span> width<span style="color: #990000">,</span> <span style="color: #009900">double</span> height<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #000000">scale</span></span><span style="color: #990000">(</span>height<span style="color: #990000">);</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00065:</span>   <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">getHeight</span></span><span style="color: #990000">(</span><span style="color: #009900">double</span> width<span style="color: #990000">,</span> <span style="color: #009900">double</span> height<span style="color: #990000">)</span>  <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #000000">scale</span></span><span style="color: #990000">(</span>width<span style="color: #990000">);</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00066:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00067:</span> 
</tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
      <p xmlns=""> </p><table xmlns="" width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide025">Animation: Notes</a></span><span style="font-weight: normal"><a href="class-07-025.html"> [25/25] </a></span></td></tr></table><p xmlns=""> </p>
<pre xmlns="" xml:space="preserve">
A ConcurrentModificationException happens when you modify a collection
while iterating through it.  For example:

for (Agent a : Model.agents) {
  GrimReaper.delete(c)
}

GrimReaper {
  delete(Agent a) { Model.agents.remove(a);
}

This will cause a problem, since the grim reaper modifies the
collection that is being iterated through.  You solve the problem by
iterating through a copy:

for (Agent a : Model.agents.copy()) {
  GrimReaper.delete(c)
}

Now the copy is being iterated through, not the original, so no problems.  

-----------------------------------------------------------------------

If I follow the lecture correctly, it seems we only need to modify
SwingAnimationPainterBuilder.java, is that correct?  I know we need to
use the builder to add model components to the model, but is there
other visualization code that we need to touch?

-----------------------------------------------------------------------

I had to edit a lot of things in the animation classes to get  
everything playing nice with the graphics.  The given graphics library  
does not take care of the following:

- Changing of colors (traffic lights)
- Proportionate lengths of roads and intersecitons (i.e., a road may  
look the same size but it's actually longer than the next)
- Drawing moving dots (cars) on the intersections

So I assumed that it was up to us to fix these issues.  I went ahead  
and added the above features as necessary.  The colors of the lights  
can be done through the same sate pattern that controls the traffic.

The lengths of roads can be taken care of by using an equation that  
"normalizes" position of cars so that no matter what the visual is  
drawn up to be the position is normalized to a 0 to 1 double where 0  
is the beginning of the segment or intersection (or whatever the next  
extension you decide to draw) and 1 is the end.

I also had to add builder functions to let the animation know about  
intersections since the cars were disappearing at each intersection.  
It took me a while to figure out that they were still being processed  
but not being drawn.  When the visual of the car goes away it's really  
confusing because it looks like it teleported even though it was still  
moving all along.

Another tip: increase the size of the traffic light dots so they are  
bigger than cars.  This way if there is a lot of gridlock action, you  
can still see the state of each light.  I've got a screenshot here.

-----------------------------------------------------------------------
Can you explain this a bit further?

"The lengths of roads can be taken care of by using an equation that
"normalizes" position of cars so that no matter what the visual is
drawn up to be the position is normalized to a 0 to 1 double where 0
is the beginning of the segment or intersection (or whatever the
next
extension you decide to draw) and 1 is the end."

I think maybe this is my problem with my cars being drawn stopped in
the middle of the next road when they are supposed to be stopped at
the intersection when the light is red.

Are you saying to do something like this...

double roadLength = e.x.getLength();
double normalizedPosition = pos/roadLength;
XGraphics.fillOval(g, e.t, normalizedPosition, 0, MP.dotLength,
VP.elementWidth);

When doing it that way my cars no longer go past a blocked
intersection, but they stay at the start of the line, instead of going
up to the intersection.  Hmmmm.

-----------------------------------------------------------------------

You are REAL close.  Now all you have to do is take care of the offset  
that the dot imposes.  The graphics engine draws the center of the dot  
at "position".  I think this will get you moving in the right  
direction.  Are you using the "frontPosition"?

Also, I just put the formula in the argument for the fillOval  
function.  Then you don't really need to create all the extra  
doubles.  To do this I also added a method to Car called  
GetRoadObjectLength() which returns a double that is the length of the  
road object that the car is currently on.

Oh! and I forgot one more thing.  You now have a position from 0 to  
1.  That wouldn't show much movement for you now would it?  That must  
be why your cars are staying at the front of the road.  Actually if  
you were to look REAL close you would see the car move 1 meter on a  
200 meter road!  You forgot to multiply the "normalized" distance with  
the graphical length of the road, MP.lineLength.

What's real cool about this equation? Go ahead and change the  
MP.lineLength value.  Make it 300 if you like and watch as the  
equation takes care of all your problems!
</pre>
      <hr xmlns=""/><p xmlns="" class="flush">
      Revised: 2008/10/28 10:45</p><p xmlns="" class="flush">
    This page is
    <a href="http://validator.w3.org/check/referer">valid</a>
    xhtml 1.0. 
  </p></body></html>
