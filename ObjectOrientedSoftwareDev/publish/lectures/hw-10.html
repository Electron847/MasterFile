<?xml version="1.0"?>
<!--Generated by an XSL stylesheet.  Do not edit!-->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta xmlns="" http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta xmlns="" http-equiv="Expires" content="Mon, 10 Jan 2000 12:00:00 GMT"/><style xmlns="" type="text/css">
    p.flushtop     { margin-top: 0px; }
    p.flushbottom  { margin-bottom: 0px; }
    p.flush        { margin-top: 0px;
                     margin-bottom: 0px; }
    h1             { margin-top: 0px;
                     font-weight: bold;
                     font-size: large; }
    h2             { margin-top: 0px;
                     font-weight: bold;
                     font-size: medium; }
    body           { color: black;
                     background-color: white; }
    img.noborder   { border-width: 0px; }
    table.title    { border-style: solid; 
                     border-width: 1px; 
                     border-color: #888888; 
                     color: black;
                     background-color: #E4E4C2; }
    table.item     { border-style: solid; 
                     border-width: 1px; 
                     border-color: #888888; 
                     color: black;
                     background-color: #F4F4E0; }
    table.notes    { border-width: 0px; 
                     color: black;
                     background-color: #E0F4E0; }
    table.comment  { border-width: 0px; 
                     color: black;
                     background-color: #E0F4E0; }
    table.code     { border-style: solid; 
                     border-width: 1px; 
                     border-color: #888888; 
                     color: black;
                     background-color: #E0F4E0; }
    table.contents { border-width: 0px; 
                     color: black;
                     background-color: #FFFFFF; }
    span.red       { color: red; }
    span.orange    { color: orange; }
    span.purple    { color: purple; }
    span.blue      { color: blue; }
    span.brown     { color: brown; }
    span.green     { color: lime; }
    span.hilight   { background-color: #E4E4C2; }
  </style><title>SE450: Homework 10</title></head><body><h1><a href="../index.html">SE450</a>: Homework 10</h1><table xmlns="" width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide000">Contents</a></span><span style="font-weight: normal"><a href="hw-10-000.html"> [0/14] </a></span></td></tr></table><p xmlns=""> </p><table xmlns="" width="100%" cellpadding="0" cellspacing="0" class="contents"><tr><td><a href="#slide001">Practice (do not hand in): Problem 1</a> [1/14] </td></tr><tr><td><a href="#slide002">Practice (do not hand in): Problem 2</a> [2/14] </td></tr><tr><td><a href="#slide003">Practice (do not hand in): Problem 3</a> [3/14] </td></tr><tr><td><a href="#slide004">Practice (do not hand in): </a> [4/14] </td></tr><tr><td><a href="#slide005">Practice (do not hand in): </a> [5/14] </td></tr><tr><td><a href="#slide006">Practice (do not hand in): </a> [6/14] </td></tr><tr><td><a href="#slide007">Practice (do not hand in): Problem 4</a> [7/14] </td></tr><tr><td><a href="#slide008">Practice (do not hand in): Problem 5</a> [8/14] </td></tr><tr><td><a href="#slide009">Practice (do not hand in): Problem 6</a> [9/14] </td></tr><tr><td><a href="#slide010">Practice (do not hand in): Problem 7</a> [10/14] </td></tr><tr><td><a href="#slide011">Practice (do not hand in): Problem 8</a> [11/14] </td></tr><tr><td><a href="#slide012">Practice (do not hand in): Problem 9</a> [12/14] </td></tr><tr><td><a href="#slide013">Practice (do not hand in): Problem 10</a> [13/14] </td></tr><tr><td><a href="#slide014">Practice (do not hand in): Answers</a> [14/14] </td></tr></table><br xmlns=""/><table xmlns="" width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide001">Practice (do not hand in): Problem 1</a></span><span style="font-weight: normal"><a href="hw-10-001.html"> [1/14] </a></span></td></tr></table><p xmlns=""> </p>
        <p xmlns="">
          Consider the following Java code:
        </p>

<pre xmlns="" xml:space="preserve"><tt><span style="font-weight: bold"><span style="color: #0000FF">interface</span></span> <span style="color: #009900">I</span> <span style="color: #FF0000">{</span> String <span style="font-weight: bold"><span style="color: #000000">world</span></span><span style="color: #990000">();</span> <span style="color: #FF0000">}</span>
<span style="font-weight: bold"><span style="color: #0000FF">abstract</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">C</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> I <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> String <span style="font-weight: bold"><span style="color: #000000">hello</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="color: #FF0000">"Hello "</span><span style="color: #990000">;</span> <span style="color: #FF0000">}</span> <span style="color: #FF0000">}</span>
<span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">D</span> <span style="font-weight: bold"><span style="color: #0000FF">extends</span></span> C <span style="color: #FF0000">{</span>
    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> String <span style="font-weight: bold"><span style="color: #000000">hello</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="color: #FF0000">"World "</span><span style="color: #990000">;</span> <span style="color: #FF0000">}</span>
    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> String <span style="font-weight: bold"><span style="color: #000000">world</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">super</span></span><span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">hello</span></span><span style="color: #990000">()</span> <span style="color: #990000">+</span> <span style="font-weight: bold"><span style="color: #000000">hello</span></span><span style="color: #990000">();</span> <span style="color: #FF0000">}</span>
<span style="color: #FF0000">}</span>
<span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">E</span> <span style="font-weight: bold"><span style="color: #0000FF">extends</span></span> D <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> String <span style="font-weight: bold"><span style="color: #000000">hello</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="color: #FF0000">"Mundo "</span><span style="color: #990000">;</span> <span style="color: #FF0000">}</span> <span style="color: #FF0000">}</span>
<span style="font-style: italic"><span style="color: #9A1900">//...</span></span>
I x <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">D</span></span><span style="color: #990000">();</span> System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span>x<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">world</span></span><span style="color: #990000">());</span>
I y <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">E</span></span><span style="color: #990000">();</span> System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span>y<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">world</span></span><span style="color: #990000">());</span>
</tt></pre>

        <p xmlns="">
          What does this code print?
        </p>
      <p xmlns=""> </p><table xmlns="" width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide002">Practice (do not hand in): Problem 2</a></span><span style="font-weight: normal"><a href="hw-10-002.html"> [2/14] </a></span></td></tr></table><p xmlns=""> </p>
        <p xmlns="">
          Remember that boolean values print as <code>true</code> or
          <code>false</code>.
        </p>
        <ol xmlns="" style="list-style-type: lower-alpha">
          <li>
            <p>
              What is the output of the following Java code? Briefly
              justify your answer.
            </p>

<pre xml:space="preserve"><tt><span style="color: #009900">boolean</span> x <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">false</span></span><span style="color: #990000">;</span>
<span style="color: #009900">boolean</span> y <span style="color: #990000">=</span> x<span style="color: #990000">;</span>
System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span>x <span style="color: #990000">==</span> y<span style="color: #990000">);</span>
y <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">true</span></span><span style="color: #990000">;</span>
System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span>x <span style="color: #990000">==</span> y<span style="color: #990000">);</span>
</tt></pre>

          </li>
          <li>
            <p>
              What is the output of the following Java code? Briefly justify your answer. 
            </p>

<pre xml:space="preserve"><tt><span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">MyBool</span> <span style="color: #FF0000">{</span>
  <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">boolean</span> value<span style="color: #990000">;</span>
  <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">set</span></span><span style="color: #990000">(</span><span style="color: #009900">boolean</span> x<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> value <span style="color: #990000">=</span> x<span style="color: #990000">;</span> <span style="color: #FF0000">}</span>
  <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">boolean</span> <span style="font-weight: bold"><span style="color: #000000">get</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> value<span style="color: #990000">;</span> <span style="color: #FF0000">}</span>
  <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">MyBool</span></span><span style="color: #990000">(</span><span style="color: #009900">boolean</span> x<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #000000">set</span></span><span style="color: #990000">(</span>x<span style="color: #990000">);</span> <span style="color: #FF0000">}</span>
  <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">boolean</span> <span style="font-weight: bold"><span style="color: #000000">equals</span></span><span style="color: #990000">(</span>Object that<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
    <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="color: #990000">(</span>that <span style="font-weight: bold"><span style="color: #0000FF">instanceof</span></span> MyBool<span style="color: #990000">)</span> <span style="color: #990000">&amp;&amp;</span> <span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">get</span></span><span style="color: #990000">()</span> <span style="color: #990000">==</span> <span style="color: #990000">((</span>MyBool<span style="color: #990000">)</span> that<span style="color: #990000">).</span><span style="font-weight: bold"><span style="color: #000000">get</span></span><span style="color: #990000">());</span>
  <span style="color: #FF0000">}</span>
<span style="color: #FF0000">}</span>
<span style="font-style: italic"><span style="color: #9A1900">// ...</span></span>
MyBool x <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">MyBool</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">false</span></span><span style="color: #990000">);</span>
MyBool y <span style="color: #990000">=</span> x<span style="color: #990000">;</span>
System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span>x<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">equals</span></span><span style="color: #990000">(</span>y<span style="color: #990000">)</span> <span style="color: #990000">+</span> <span style="color: #FF0000">" "</span> <span style="color: #990000">+</span> <span style="color: #990000">(</span>x <span style="color: #990000">==</span> y<span style="color: #990000">));</span>
y<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">set</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">true</span></span><span style="color: #990000">);</span>
System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span>x<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">equals</span></span><span style="color: #990000">(</span>y<span style="color: #990000">)</span> <span style="color: #990000">+</span> <span style="color: #FF0000">" "</span> <span style="color: #990000">+</span> <span style="color: #990000">(</span>x <span style="color: #990000">==</span> y<span style="color: #990000">));</span>
</tt></pre>

          </li>
          <li>
            <p>
              What is the output of the following Java code, assuming
              the definition of MyBool from the previous subproblem?
              Briefly justify your answer.
            </p>

<pre xml:space="preserve"><tt>MyBool x <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">MyBool</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">false</span></span><span style="color: #990000">);</span>
MyBool y <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">MyBool</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">false</span></span><span style="color: #990000">);</span>
System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span>x<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">equals</span></span><span style="color: #990000">(</span>y<span style="color: #990000">)</span> <span style="color: #990000">+</span> <span style="color: #FF0000">" "</span> <span style="color: #990000">+</span> <span style="color: #990000">(</span>x <span style="color: #990000">==</span> y<span style="color: #990000">));</span>
y<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">set</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">true</span></span><span style="color: #990000">);</span>
System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span>x<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">equals</span></span><span style="color: #990000">(</span>y<span style="color: #990000">)</span> <span style="color: #990000">+</span> <span style="color: #FF0000">" "</span> <span style="color: #990000">+</span> <span style="color: #990000">(</span>x <span style="color: #990000">==</span> y<span style="color: #990000">));</span>
</tt></pre>

          </li>
        </ol>
      <p xmlns=""> </p><table xmlns="" width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide003">Practice (do not hand in): Problem 3</a></span><span style="font-weight: normal"><a href="hw-10-003.html"> [3/14] </a></span></td></tr></table><p xmlns=""> </p>
        <p xmlns="">
          Consider the following code:
        </p>

<pre xmlns="" xml:space="preserve"><tt><span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">MyInt</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Comparable <span style="color: #FF0000">{</span>
  <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">int</span> value<span style="color: #990000">;</span>
  <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">set</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> x<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> value <span style="color: #990000">=</span> x<span style="color: #990000">;</span> <span style="color: #FF0000">}</span>
  <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">get</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> value<span style="color: #990000">;</span> <span style="color: #FF0000">}</span>
  <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">MyInt</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> x<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #000000">set</span></span><span style="color: #990000">(</span>x<span style="color: #990000">);</span> <span style="color: #FF0000">}</span>
  <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">boolean</span> <span style="font-weight: bold"><span style="color: #000000">equals</span></span><span style="color: #990000">(</span>Object that<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
    <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="color: #990000">(</span>that <span style="font-weight: bold"><span style="color: #0000FF">instanceof</span></span> MyInt<span style="color: #990000">)</span> <span style="color: #990000">&amp;&amp;</span> <span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">get</span></span><span style="color: #990000">()</span> <span style="color: #990000">==</span> <span style="color: #990000">((</span>MyInt<span style="color: #990000">)</span> that<span style="color: #990000">).</span><span style="font-weight: bold"><span style="color: #000000">get</span></span><span style="color: #990000">());</span>
  <span style="color: #FF0000">}</span>
  <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">compareTo</span></span><span style="color: #990000">(</span>Object that<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> <span style="font-style: italic"><span style="color: #9A1900">/* your job */</span></span> <span style="color: #FF0000">}</span>
<span style="color: #FF0000">}</span>
<span style="font-style: italic"><span style="color: #9A1900">// ...</span></span>
TreeSet s <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">TreeSet</span></span><span style="color: #990000">();</span>
s<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">add</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">MyInt</span></span><span style="color: #990000">(</span><span style="color: #993399">2</span><span style="color: #990000">));</span> s<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">add</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">MyInt</span></span><span style="color: #990000">(</span><span style="color: #993399">7</span><span style="color: #990000">));</span> s<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">add</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">MyInt</span></span><span style="color: #990000">(</span><span style="color: #993399">8</span><span style="color: #990000">));</span> s<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">add</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">MyInt</span></span><span style="color: #990000">(</span><span style="color: #993399">5</span><span style="color: #990000">));</span>
Iterator i <span style="color: #990000">=</span> s<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">iterator</span></span><span style="color: #990000">();</span> 
<span style="font-weight: bold"><span style="color: #0000FF">while</span></span> <span style="color: #990000">(</span>i<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">hasNext</span></span><span style="color: #990000">())</span> <span style="color: #FF0000">{</span> System<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">print</span></span><span style="color: #990000">(</span>i<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">next</span></span><span style="color: #990000">()</span> <span style="color: #990000">+</span> <span style="color: #FF0000">" "</span><span style="color: #990000">);</span> <span style="color: #FF0000">}</span>
</tt></pre>

        <ol xmlns="" style="list-style-type: lower-alpha">
          <li>
             How can you define the compareTo method in MyInt so that
             the output of this code becomes 8 7 5 2? Recall that the
             method compareTo compares this object with the specified
             object for order and returns a negative integer, zero, or
             a positive integer as this object comes before, in the
             same place as, or after than the specified object in the
             desired sorted order.

<pre xml:space="preserve"><tt>  <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">compareTo</span></span><span style="color: #990000">(</span>Object that<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> <span style="color: #990000">...</span> <span style="color: #FF0000">}</span>
</tt></pre>

          </li>
          <li>
Without modifying the class MyInt at all, initialize s to a TreeSet in such a way that the output of this code becomes 2 8 5 7. In general, the sorted order of this structure is: all even integers in ascending order followed by all odd integers in ascending order.

<pre xml:space="preserve"><tt>TreeSet s <span style="color: #990000">=</span> <span style="font-style: italic"><span style="color: #9A1900">/* your job: create a TreeSet with an appropriate comparison mechanism */</span></span>
s<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">add</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">MyInt</span></span><span style="color: #990000">(</span><span style="color: #993399">2</span><span style="color: #990000">));</span> s<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">add</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">MyInt</span></span><span style="color: #990000">(</span><span style="color: #993399">7</span><span style="color: #990000">));</span> s<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">add</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">MyInt</span></span><span style="color: #990000">(</span><span style="color: #993399">8</span><span style="color: #990000">));</span> s<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">add</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">MyInt</span></span><span style="color: #990000">(</span><span style="color: #993399">5</span><span style="color: #990000">));</span>
Iterator i <span style="color: #990000">=</span> s<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">iterator</span></span><span style="color: #990000">();</span> 
<span style="font-weight: bold"><span style="color: #0000FF">while</span></span> <span style="color: #990000">(</span>i<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">hasNext</span></span><span style="color: #990000">())</span> <span style="color: #FF0000">{</span> System<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">print</span></span><span style="color: #990000">(</span>i<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">next</span></span><span style="color: #990000">()</span> <span style="color: #990000">+</span> <span style="color: #FF0000">" "</span><span style="color: #990000">);</span> <span style="color: #FF0000">}</span>
</tt></pre>

          </li>
        </ol>
      <p xmlns=""> </p><table xmlns="" width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide004">Practice (do not hand in): </a></span><span style="font-weight: normal"><a href="hw-10-004.html"> [4/14] </a></span></td></tr></table><p xmlns=""> </p>
        <p xmlns="">
          Consider the following Java Class representing a List of
          Integers.
        </p>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a href="../code/html/serialization/custom/IntList_java.html">file:IntList.java</a> [<a href="../code/src/serialization/custom/IntList.java">source</a>] [<a href="../code/doc-publicserialization/custom/IntList.html">doc-public</a>] [<a href="../code/doc-privateserialization/custom/IntList.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> serialization<span style="color: #990000">.</span>custom<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>io<span style="color: #990000">.</span>Serializable<span style="color: #990000">;</span>
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #0000FF">interface</span></span> <span style="color: #009900">IntList</span> <span style="font-weight: bold"><span style="color: #0000FF">extends</span></span> Serializable <span style="color: #FF0000">{</span>
<span style="color: #000000">00004:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">addBack</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> i<span style="color: #990000">);</span>
<span style="color: #000000">00005:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">addFront</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> i<span style="color: #990000">);</span>
<span style="color: #000000">00006:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">removeFront</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00007:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">removeBack</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00008:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">boolean</span> <span style="font-weight: bold"><span style="color: #000000">isEmpty</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00009:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00010:</span> 
</tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <p xmlns=""> </p><blockquote xmlns="">
<table width="97%">
<tr><td rowspan="1" colspan="1"><table width="100%" class="title"><tr><td rowspan="1" colspan="1"><b><a href="../code/html/serialization/custom/Main1_java.html">file:Main1.java</a> [<a href="../code/src/serialization/custom/Main1.java">source</a>] [<a href="../code/doc-publicserialization/custom/Main1.html">doc-public</a>] [<a href="../code/doc-privateserialization/custom/Main1.html">doc-private</a>]</b></td></tr></table></td></tr>
<tr><td rowspan="1" colspan="1"><table width="100%" class="code"><tr><td rowspan="1" colspan="1">

<pre xml:space="preserve"><tt><span style="color: #000000">00001:</span> <span style="font-weight: bold"><span style="color: #000080">package</span></span> serialization<span style="color: #990000">.</span>custom<span style="color: #990000">;</span>
<span style="color: #000000">00002:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>util<span style="color: #990000">.</span>LinkedList<span style="color: #990000">;</span>
<span style="color: #000000">00003:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>io<span style="color: #990000">.</span>Serializable<span style="color: #990000">;</span>
<span style="color: #000000">00004:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>io<span style="color: #990000">.</span>IOException<span style="color: #990000">;</span>
<span style="color: #000000">00005:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>io<span style="color: #990000">.</span>FileNotFoundException<span style="color: #990000">;</span>
<span style="color: #000000">00006:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>io<span style="color: #990000">.</span>FileOutputStream<span style="color: #990000">;</span>
<span style="color: #000000">00007:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>io<span style="color: #990000">.</span>ObjectOutputStream<span style="color: #990000">;</span>
<span style="color: #000000">00008:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>io<span style="color: #990000">.</span>FileInputStream<span style="color: #990000">;</span>
<span style="color: #000000">00009:</span> <span style="font-weight: bold"><span style="color: #000080">import</span></span> java<span style="color: #990000">.</span>io<span style="color: #990000">.</span>ObjectInputStream<span style="color: #990000">;</span>
<span style="color: #000000">00010:</span> 
<span style="color: #000000">00011:</span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">IntList1</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> IntList
<span style="color: #000000">00012:</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00013:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> LinkedList<span style="color: #990000">&lt;</span>Integer<span style="color: #990000">&gt;</span> _v<span style="color: #990000">;</span>
<span style="color: #000000">00014:</span>   <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">setV</span></span><span style="color: #990000">(</span>LinkedList<span style="color: #990000">&lt;</span>Integer<span style="color: #990000">&gt;</span> v<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> _v <span style="color: #990000">=</span> _v<span style="color: #990000">;</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00015:</span> 
<span style="color: #000000">00016:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">IntList1</span></span><span style="color: #990000">()</span>               <span style="color: #FF0000">{</span> _v <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> LinkedList<span style="color: #990000">&lt;</span>Integer<span style="color: #990000">&gt;();</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00017:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">addBack</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> i<span style="color: #990000">)</span>      <span style="color: #FF0000">{</span> _v<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">addLast</span></span><span style="color: #990000">(</span>i<span style="color: #990000">);</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00018:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">addFront</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> i<span style="color: #990000">)</span>     <span style="color: #FF0000">{</span> _v<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">addFirst</span></span><span style="color: #990000">(</span>i<span style="color: #990000">);</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00019:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">removeFront</span></span><span style="color: #990000">()</span>        <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> _v<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">removeFirst</span></span><span style="color: #990000">();</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00020:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">removeBack</span></span><span style="color: #990000">()</span>         <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> _v<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">removeLast</span></span><span style="color: #990000">();</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00021:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">boolean</span> <span style="font-weight: bold"><span style="color: #000000">isEmpty</span></span><span style="color: #990000">()</span>        <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> _v<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">size</span></span><span style="color: #990000">()</span> <span style="color: #990000">==</span> <span style="color: #993399">0</span><span style="color: #990000">;</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00022:</span> <span style="color: #FF0000">}</span>
<span style="color: #000000">00023:</span> 
<span style="color: #000000">00024:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">Main1</span> <span style="color: #FF0000">{</span>
<span style="color: #000000">00025:</span>   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">main</span></span><span style="color: #990000">(</span>String<span style="color: #990000">[]</span> args<span style="color: #990000">)</span>
<span style="color: #000000">00026:</span>     <span style="font-weight: bold"><span style="color: #0000FF">throws</span></span> IOException<span style="color: #990000">,</span> FileNotFoundException<span style="color: #990000">,</span> ClassNotFoundException 
<span style="color: #000000">00027:</span>   <span style="color: #FF0000">{</span>
<span style="color: #000000">00028:</span>     IntList L <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">IntList1</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00029:</span>     <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span><span style="color: #009900">int</span> i<span style="color: #990000">=</span><span style="color: #993399">0</span><span style="color: #990000">;</span> i<span style="color: #990000">&lt;</span><span style="color: #993399">1000</span><span style="color: #990000">;</span> i<span style="color: #990000">++)</span>
<span style="color: #000000">00030:</span>       L<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">addFront</span></span><span style="color: #990000">(</span>i<span style="color: #990000">);</span>
<span style="color: #000000">00031:</span>     
<span style="color: #000000">00032:</span>     ObjectOutputStream os <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">ObjectOutputStream </span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">FileOutputStream</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"out1.dat"</span><span style="color: #990000">));</span>
<span style="color: #000000">00033:</span>     os<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">writeObject</span></span><span style="color: #990000">(</span>L<span style="color: #990000">);</span>
<span style="color: #000000">00034:</span>     os<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">flush</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00035:</span> 
<span style="color: #000000">00036:</span>     ObjectInputStream in <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">ObjectInputStream </span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">FileInputStream</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"out1.dat"</span><span style="color: #990000">));</span> 
<span style="color: #000000">00037:</span>     IntList V <span style="color: #990000">=</span> <span style="color: #990000">(</span>IntList<span style="color: #990000">)</span> in<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">readObject</span></span><span style="color: #990000">();</span>
<span style="color: #000000">00038:</span>   <span style="color: #FF0000">}</span>
<span style="color: #000000">00039:</span> <span style="color: #FF0000">}</span>
</tt></pre>

</td></tr></table>
</td></tr></table>
</blockquote>
        <ol xmlns="" style="list-style-type: lower-alpha">
          <li>
            <p>
              Consider the IntList class that implements Serializable.  How
              big is the file <code>out.dat</code>?  Intuitvely, this file
              should not be much larger than 1000 words (4000 bytes).
              Explain its size.
            </p>
          </li>
          <li>
            <p>
              In this problem, customize the serialization to reduce the
              size of the information in file <code>out.dat</code>.  The
              idea is to only output the numbers in IntList to the
              output stream.
            </p>
            <p>
              An example write protocol could be:
            </p>
            <ol style="list-style-type: lower-roman">
              <li>
                first write out the number of elements in the list 
              </li>
              <li>
                write out the elements in the list one by one.
              </li>
              <li>
                <p>
                  Make the class IntList implement the Externalizable
                  interface.  Describe your design, and sketch the
                  code for the following two methods.
                </p>

<pre xml:space="preserve"><tt><span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">writeExternal</span></span><span style="color: #990000">(</span>ObjectOutput out<span style="color: #990000">)</span> <span style="font-weight: bold"><span style="color: #0000FF">throws</span></span> IOException <span style="color: #FF0000">{}</span>
<span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">readExternal</span></span><span style="color: #990000">(</span>ObjectInput in<span style="color: #990000">)</span> <span style="font-weight: bold"><span style="color: #0000FF">throws</span></span> IOException<span style="color: #990000">,</span> ClassNotFoundException <span style="color: #FF0000">{}</span>
</tt></pre>

              </li>
            </ol>
          </li>
        </ol>
      <p xmlns=""> </p><table xmlns="" width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide005">Practice (do not hand in): </a></span><span style="font-weight: normal"><a href="hw-10-005.html"> [5/14] </a></span></td></tr></table><p xmlns=""> </p>
        <p xmlns="">
          Here is an old final exam:
          <a href="../extras/03final.pdf">file:03final.pdf</a>
        </p>
        <p xmlns="">
          Here is an old midterm exam:
          <a href="../extras/04midterm.pdf">file:04midterm.pdf</a>
        </p>
        <p xmlns="">
          Here is an old midterm exam:
          <a href="../extras/03midterm.pdf">file:03midterm.pdf</a>
        </p>
      <p xmlns=""> </p><table xmlns="" width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide006">Practice (do not hand in): </a></span><span style="font-weight: normal"><a href="hw-10-006.html"> [6/14] </a></span></td></tr></table><p xmlns=""> </p>
<p xmlns="">
You are given the following class to start off things:
</p>

<pre xmlns="" xml:space="preserve"><tt><span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">BasicGLib</span> <span style="color: #FF0000">{</span>
    <span style="font-style: italic"><span style="color: #9A1900">/** draw a circle of color c with center at current cursor position</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     *  the radius of the circle is given by radius</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     */</span></span>
    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">drawCircle</span></span><span style="color: #990000">(</span>Color c<span style="color: #990000">,</span> <span style="color: #009900">int</span> radius<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> <span style="font-style: italic"><span style="color: #9A1900">/* ... */</span></span> <span style="color: #FF0000">}</span>

    <span style="font-style: italic"><span style="color: #9A1900">/** draw a rectangle of Color c </span></span>
<span style="font-style: italic"><span style="color: #9A1900">     *  with lower left corner at current cursor position</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     *  the length of the rectangle along the x axis is given by xlength</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     *  the length of the rectangle along the y axis is given by ylength</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     */</span></span>
    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">drawRect</span></span><span style="color: #990000">(</span>Color c<span style="color: #990000">,</span> <span style="color: #009900">int</span> xlength<span style="color: #990000">,</span> <span style="color: #009900">int</span> ylength<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> <span style="font-style: italic"><span style="color: #9A1900">/* ... */</span></span> <span style="color: #FF0000">}</span>

    <span style="font-style: italic"><span style="color: #9A1900">/** move the cursor by coordinate (xcoord,ycoord) { /* ... */</span></span> <span style="color: #FF0000">}</span>
     <span style="color: #990000">*/</span>
    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">moveCursor</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> xcoord<span style="color: #990000">,</span> <span style="color: #009900">int</span> ycoord<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> <span style="font-style: italic"><span style="color: #9A1900">/* ... */</span></span> <span style="color: #FF0000">}</span>

    <span style="font-style: italic"><span style="color: #9A1900">/** clear the entire screen and set cursor position to (0,0)</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     */</span></span>
    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">clear</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> <span style="font-style: italic"><span style="color: #9A1900">/* ... */</span></span> <span style="color: #FF0000">}</span>
<span style="color: #FF0000">}</span>
</tt></pre>


<p xmlns="">
The initial cursor position is at (0,0). 
</p>
<p xmlns="">        
For example:
</p>

<pre xmlns="" xml:space="preserve"><tt>BasicGLib<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">clear</span></span><span style="color: #990000">();</span>                    <span style="font-style: italic"><span style="color: #9A1900">// initialize </span></span>
BasicGLib<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">drawCircle</span></span><span style="color: #990000">(</span>Color<span style="color: #990000">.</span>red<span style="color: #990000">,</span> <span style="color: #993399">3</span><span style="color: #990000">);</span>   <span style="font-style: italic"><span style="color: #9A1900">// draws a red circle, radius 3, center (0,0)</span></span>
BasicGLib<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">drawRect</span></span><span style="color: #990000">(</span>Color<span style="color: #990000">.</span>blue<span style="color: #990000">,</span> <span style="color: #993399">3</span><span style="color: #990000">,</span> <span style="color: #993399">5</span><span style="color: #990000">);</span> <span style="font-style: italic"><span style="color: #9A1900">// draws blue rectangle </span></span>
                                      <span style="font-style: italic"><span style="color: #9A1900">// with coord (0,0),(3,0),(3,5),(0,5) </span></span>

BasicGLib<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">moveCursor</span></span><span style="color: #990000">(</span><span style="color: #993399">2</span><span style="color: #990000">,</span> <span style="color: #993399">2</span><span style="color: #990000">);</span> 
BasicGLib<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">drawCircle</span></span><span style="color: #990000">(</span>Color<span style="color: #990000">.</span>green<span style="color: #990000">,</span> <span style="color: #993399">3</span><span style="color: #990000">);</span> <span style="font-style: italic"><span style="color: #9A1900">// draws green circle of radius 3 </span></span>
                                      <span style="font-style: italic"><span style="color: #9A1900">// and center (2,2)</span></span>

BasicGLib<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">drawRect</span></span><span style="color: #990000">(</span>Color<span style="color: #990000">.</span>pink<span style="color: #990000">,</span> <span style="color: #993399">3</span><span style="color: #990000">,</span> <span style="color: #993399">5</span><span style="color: #990000">);</span> <span style="font-style: italic"><span style="color: #9A1900">// draws pink rectangle </span></span>
                                      <span style="font-style: italic"><span style="color: #9A1900">// with coord (2,2),(5,2),(5,7),(2,7)</span></span>

BasicGLib<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">moveCursor</span></span><span style="color: #990000">(-</span><span style="color: #993399">2</span><span style="color: #990000">,</span> <span style="color: #990000">-</span><span style="color: #993399">2</span><span style="color: #990000">);</span>         <span style="font-style: italic"><span style="color: #9A1900">// cursor back to (0,0)</span></span>
</tt></pre>


The draw methods above operate in the XOR mode --- i.e redrawing causes erasing.  For example:


<pre xmlns="" xml:space="preserve"><tt>BasicGLib<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">clear</span></span><span style="color: #990000">();</span>                    <span style="font-style: italic"><span style="color: #9A1900">// initialize </span></span>
BasicGLib<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">drawCircle</span></span><span style="color: #990000">(</span>Color<span style="color: #990000">.</span>red<span style="color: #990000">,</span> <span style="color: #993399">3</span><span style="color: #990000">);</span>   <span style="font-style: italic"><span style="color: #9A1900">//draws a red circle, radius 3, center (0,0)</span></span>
BasicGLib<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">drawCircle</span></span><span style="color: #990000">(</span>Color<span style="color: #990000">.</span>red<span style="color: #990000">,</span> <span style="color: #993399">3</span><span style="color: #990000">);</span>   <span style="font-style: italic"><span style="color: #9A1900">//draws a red circle, radius 3, center (0,0)</span></span>
</tt></pre>


<p xmlns="">
The net effect of this program is that nothing happens since the
second draw erases the effect of the first. In this exam, we will
write code to build and manipulate complex graphics objects that are
built out of circles and rectangles. The architecture of our design is
as follows (the description of ShapeVisitor is postponed till later): 
</p>
        

<pre xmlns="" xml:space="preserve"><tt><span style="font-weight: bold"><span style="color: #0000FF">interface</span></span> <span style="color: #009900">Shape</span> <span style="font-weight: bold"><span style="color: #0000FF">extends</span></span> Cloneable <span style="color: #FF0000">{</span>
    <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">draw</span></span><span style="color: #990000">(</span>Color c<span style="color: #990000">);</span>
    Object <span style="font-weight: bold"><span style="color: #000000">accept</span></span><span style="color: #990000">(</span>ShapeVisitor v<span style="color: #990000">);</span>
    Object <span style="font-weight: bold"><span style="color: #000000">clone</span></span><span style="color: #990000">();</span>
<span style="color: #FF0000">}</span>

<span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">Circle</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Shape <span style="color: #FF0000">{</span>
    <span style="color: #009900">int</span> r<span style="color: #990000">;</span>
    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">Circle</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> radius<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> r <span style="color: #990000">=</span> radius<span style="color: #990000">;</span> <span style="color: #FF0000">}</span>
    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">draw</span></span><span style="color: #990000">(</span>Color c<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> BasicGLib<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">drawCircle</span></span><span style="color: #990000">(</span>c<span style="color: #990000">,</span> r<span style="color: #990000">);</span> <span style="color: #FF0000">}</span>
    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> Object <span style="font-weight: bold"><span style="color: #000000">accept</span></span><span style="color: #990000">(</span>ShapeVisitor v<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> v<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">visitCircle</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">);</span> <span style="color: #FF0000">}</span>
    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> Object <span style="font-weight: bold"><span style="color: #000000">clone</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
        <span style="font-weight: bold"><span style="color: #0000FF">try</span></span> <span style="color: #FF0000">{</span>
            <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">super</span></span><span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">clone</span></span><span style="color: #990000">();</span>
        <span style="color: #FF0000">}</span> <span style="font-weight: bold"><span style="color: #0000FF">catch</span></span> <span style="color: #990000">(</span>CloneNotSupportedException e<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
            <span style="font-weight: bold"><span style="color: #0000FF">throw</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">InternalError</span></span><span style="color: #990000">();</span>
        <span style="color: #FF0000">}</span>
    <span style="color: #FF0000">}</span>
<span style="color: #FF0000">}</span>

<span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">Rectangle</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Shape <span style="color: #FF0000">{</span>
    <span style="color: #009900">int</span> xl<span style="color: #990000">,</span> yl<span style="color: #990000">;</span>
    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">Rectangle</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> xlength<span style="color: #990000">,</span> <span style="color: #009900">int</span> ylength<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> xl <span style="color: #990000">=</span> xlength<span style="color: #990000">;</span> yl <span style="color: #990000">=</span> ylength<span style="color: #990000">;</span> <span style="color: #FF0000">}</span>
    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">draw</span></span><span style="color: #990000">(</span>Color c<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> BasicGLib<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">drawRectangle</span></span><span style="color: #990000">(</span>c<span style="color: #990000">,</span> xl<span style="color: #990000">,</span> yl<span style="color: #990000">);</span> <span style="color: #FF0000">}</span>
    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> Object <span style="font-weight: bold"><span style="color: #000000">accept</span></span><span style="color: #990000">(</span>ShapeVisitor v<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> v<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">visitRectangle</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">);</span> <span style="color: #FF0000">}</span>
    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> Object <span style="font-weight: bold"><span style="color: #000000">clone</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
        <span style="font-weight: bold"><span style="color: #0000FF">try</span></span> <span style="color: #FF0000">{</span>
            <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">super</span></span><span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">clone</span></span><span style="color: #990000">();</span>
        <span style="color: #FF0000">}</span> <span style="font-weight: bold"><span style="color: #0000FF">catch</span></span> <span style="color: #990000">(</span>CloneNotSupportedException e<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
            <span style="font-weight: bold"><span style="color: #0000FF">throw</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">InternalError</span></span><span style="color: #990000">();</span>
        <span style="color: #FF0000">}</span>
    <span style="color: #FF0000">}</span>
<span style="color: #FF0000">}</span> 
</tt></pre>



<p xmlns="">
Now, we look into stuff that we need to build complex shapes.  As
expected, we begin with a class ComplexShape.  Answer the following
questions
</p>
      <p xmlns=""> </p><table xmlns="" width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide007">Practice (do not hand in): Problem 4</a></span><span style="font-weight: normal"><a href="hw-10-007.html"> [7/14] </a></span></td></tr></table><p xmlns=""> </p>
<p xmlns="">
Finish the following code.
</p>

<pre xmlns="" xml:space="preserve"><tt><span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">ComplexShape</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Shape <span style="color: #FF0000">{</span>

    ArrayList shapes <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">ArrayList</span></span><span style="color: #990000">();</span>   <span style="font-style: italic"><span style="color: #9A1900">// a list of shapes</span></span>

    <span style="font-style: italic"><span style="color: #9A1900">/** add a shape to the composite */</span></span>
    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">addShape</span></span><span style="color: #990000">(</span>Shape s<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>






    <span style="color: #FF0000">}</span>

    <span style="font-style: italic"><span style="color: #9A1900">/** draw all shapes in the composite */</span></span>
    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">draw</span></span><span style="color: #990000">(</span>Color c<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>












    <span style="color: #FF0000">}</span>

    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> Object <span style="font-weight: bold"><span style="color: #000000">clone</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>












    <span style="color: #FF0000">}</span>

    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> Object <span style="font-weight: bold"><span style="color: #000000">accept</span></span><span style="color: #990000">(</span>ShapeVisitor v<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> v<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">visitComplexShape</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">);</span> <span style="color: #FF0000">}</span>

<span style="color: #FF0000">}</span>
</tt></pre>

      <p xmlns=""> </p><table xmlns="" width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide008">Practice (do not hand in): Problem 5</a></span><span style="font-weight: normal"><a href="hw-10-008.html"> [8/14] </a></span></td></tr></table><p xmlns=""> </p>
<p xmlns="">
Use the classes Circle, Rectangle and ComplexShape to write Java code to construct a complex shape that consists of:
</p>
<ul xmlns="">        
    <li>A circle of radius 3 with center at (0,0).</li>
    <li>A circle of radius 5 with center at (0,0)</li>
    <li>A square of side 8 with lower left corner at (0,0)</li>
</ul>


      <p xmlns=""> </p><table xmlns="" width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide009">Practice (do not hand in): Problem 6</a></span><span style="font-weight: normal"><a href="hw-10-009.html"> [9/14] </a></span></td></tr></table><p xmlns=""> </p>

        <p xmlns="">
          Now, we focus on the ability to construct complex shapes.
          Consider the object consisting of :
        </p>
        <ul xmlns="">
          <li>A circle of radius 3 at center (0,0)</li>
          <li>A circle of radius 5 at center (2,3)</li>
        </ul>
        <p xmlns="">
          The class Translate below is intended to help in describing
          such objects.  For example, the above object would be
          constructed as:
        </p>

<pre xmlns="" xml:space="preserve"><tt>Shape o <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">ComplexShape</span></span><span style="color: #990000">();</span>
o<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">addShape</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Circle</span></span><span style="color: #990000">(</span><span style="color: #993399">3</span><span style="color: #990000">));</span>
o<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">addShape</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Translate</span></span><span style="color: #990000">(</span><span style="color: #993399">2</span><span style="color: #990000">,</span> <span style="color: #993399">3</span><span style="color: #990000">,</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Circle</span></span><span style="color: #990000">(</span><span style="color: #993399">5</span><span style="color: #990000">)));</span>
</tt></pre>

        <p xmlns="">
          Finish the following  code.
        </p>

<pre xmlns="" xml:space="preserve"><tt><span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">Translate</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Shape<span style="color: #FF0000">{</span>

    Shape sh<span style="color: #990000">;</span>

    <span style="color: #009900">int</span> xtrans<span style="color: #990000">,</span> ytrans<span style="color: #990000">;</span>

    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">Translate</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> x<span style="color: #990000">,</span> <span style="color: #009900">int</span> y<span style="color: #990000">,</span> Shape sh<span style="color: #990000">)</span><span style="color: #FF0000">{</span>
        xtrans <span style="color: #990000">=</span> x<span style="color: #990000">;</span> ytrans <span style="color: #990000">=</span> y<span style="color: #990000">;</span>
        <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">.</span>sh <span style="color: #990000">=</span> sh<span style="color: #990000">;</span> 
    <span style="color: #FF0000">}</span>

    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">draw</span></span><span style="color: #990000">(</span>Color c<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> 
        <span style="font-style: italic"><span style="color: #9A1900">// Hint: Move cursor by amount xtrans, ytrans; draw;</span></span>
        <span style="font-style: italic"><span style="color: #9A1900">// and then restore the original position of cursor</span></span>












    <span style="color: #FF0000">}</span>

    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> Object <span style="font-weight: bold"><span style="color: #000000">clone</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>








    <span style="color: #FF0000">}</span>

    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> Object <span style="font-weight: bold"><span style="color: #000000">accept</span></span><span style="color: #990000">(</span>ShapeVisitor v<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> v<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">visitTranslate</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">);</span> <span style="color: #FF0000">}</span>

<span style="color: #FF0000">}</span>
</tt></pre>

      <p xmlns=""> </p><table xmlns="" width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide010">Practice (do not hand in): Problem 7</a></span><span style="font-weight: normal"><a href="hw-10-010.html"> [10/14] </a></span></td></tr></table><p xmlns=""> </p>
        <p xmlns="">
          Use the classes Circle, Rectangle, Translate and
          ComplexShape to write Java code to construct a complex shape
          that consists of:
        </p>
        <ul xmlns="">
          <li>A circle of radius 3 with center at (0,0).</li>
          <li>A circle of radius 5 with center at (3,4).</li>
          <li>A complex shape that consists of A circle of radius 3 at the (8,9), and a circle of radius 5 with center (10,12)</li>
        </ul>
      <p xmlns=""> </p><table xmlns="" width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide011">Practice (do not hand in): Problem 8</a></span><span style="font-weight: normal"><a href="hw-10-011.html"> [11/14] </a></span></td></tr></table><p xmlns=""> </p>
        <p xmlns="">
          The interface ShapeVisitor is as follows:
        </p>

<pre xmlns="" xml:space="preserve"><tt><span style="font-weight: bold"><span style="color: #0000FF">interface</span></span> <span style="color: #009900">ShapeVisitor</span> <span style="color: #FF0000">{</span>
    Object <span style="font-weight: bold"><span style="color: #000000">visitCircle</span></span><span style="color: #990000">(</span>Circle c<span style="color: #990000">);</span>
    Object <span style="font-weight: bold"><span style="color: #000000">visitRectangle</span></span><span style="color: #990000">(</span> Rectangle r<span style="color: #990000">);</span>
    Object <span style="font-weight: bold"><span style="color: #000000">visitComplexShape</span></span><span style="color: #990000">(</span>ComplexShape c<span style="color: #990000">);</span>
    Object <span style="font-weight: bold"><span style="color: #000000">visitTranslate</span></span><span style="color: #990000">(</span>Translate t<span style="color: #990000">);</span>
<span style="color: #FF0000">}</span>
</tt></pre>

        <p xmlns="">
          Write the code for a PrintVisitor that will print out a Shape with nice indentation.  For example,  the code:
        </p>          

<pre xmlns="" xml:space="preserve"><tt>Shape o <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">ComplexShape</span></span><span style="color: #990000">();</span>   
o<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">addShape</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Circle</span></span><span style="color: #990000">(</span><span style="color: #993399">3</span><span style="color: #990000">));</span>
o<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">addShape</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Translate</span></span><span style="color: #990000">(</span><span style="color: #993399">2</span><span style="color: #990000">,</span> <span style="color: #993399">3</span><span style="color: #990000">,</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Circle</span></span><span style="color: #990000">(</span><span style="color: #993399">5</span><span style="color: #990000">)));</span>
System<span style="color: #990000">.</span>out<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">println</span></span><span style="color: #990000">(</span>o<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">accept</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">PrintVisitor</span></span><span style="color: #990000">()));</span>
should output<span style="color: #990000">:</span>
<span style="font-weight: bold"><span style="color: #000000">ComplexShape</span></span><span style="color: #990000">(</span>
    <span style="font-weight: bold"><span style="color: #000000">Circle</span></span><span style="color: #990000">(</span><span style="color: #993399">3</span><span style="color: #990000">),</span>
    <span style="font-weight: bold"><span style="color: #000000">Translate</span></span><span style="color: #990000">(</span><span style="color: #993399">2</span><span style="color: #990000">,</span> <span style="color: #993399">3</span><span style="color: #990000">,</span>
        <span style="font-weight: bold"><span style="color: #000000">Circle</span></span><span style="color: #990000">(</span><span style="color: #993399">3</span><span style="color: #990000">)</span>
    <span style="color: #990000">)</span>
<span style="color: #990000">)</span>
<span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">PrintVisitor</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> ShapeVisitor <span style="color: #FF0000">{</span>

























<span style="color: #FF0000">}</span> 
</tt></pre>

      <p xmlns=""> </p><table xmlns="" width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide012">Practice (do not hand in): Problem 9</a></span><span style="font-weight: normal"><a href="hw-10-012.html"> [12/14] </a></span></td></tr></table><p xmlns=""> </p>
        <p xmlns="">
          Write the code for a BBoxVisitor that computes the bounding
          box of a Shape.  The bounding box of a shape is the smallest
          rectangle with sides parallel to the axis that contains the
          entire shape.  For example:
        </p>
        <ul xmlns="">
          <li>A circle of radius 3 with center at (0,0) has bounding box (xleft = -3, xright = +3; ydown = -3, yup = +3).</li>
          <li>A circle of radius 5 with center at (3,4) has bounding box: (xleft = -2, xright = 8; ydown = -1, yup = 9).</li>
          <li>A complex shape that consists of: a circle of radius 3 with center (8,9), and a circle of radius 5 with center (10,12) has bounding box (xleft = 5, xright = 15; ydown = 6, yup = 17)</li>
        </ul>

<pre xmlns="" xml:space="preserve"><tt><span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">BBox</span> <span style="color: #FF0000">{</span>
    <span style="color: #009900">int</span> xleft<span style="color: #990000">,</span> xright<span style="color: #990000">;</span>
    <span style="color: #009900">int</span> ydown<span style="color: #990000">,</span> yup<span style="color: #990000">;</span>
    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">BBox</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> xl<span style="color: #990000">,</span> <span style="color: #009900">int</span> xr<span style="color: #990000">,</span> <span style="color: #009900">int</span> yd<span style="color: #990000">,</span> <span style="color: #009900">int</span> yu<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> <span style="font-style: italic"><span style="color: #9A1900">/* ... */</span></span> <span style="color: #FF0000">}</span>
<span style="color: #FF0000">}</span>

<span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">BBoxVisitor</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> ShapeVisitor <span style="color: #FF0000">{</span>

























<span style="color: #FF0000">}</span>
</tt></pre>

      <p xmlns=""> </p><table xmlns="" width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide013">Practice (do not hand in): Problem 10</a></span><span style="font-weight: normal"><a href="hw-10-013.html"> [13/14] </a></span></td></tr></table><p xmlns=""> </p>
        <p xmlns="">
          Write a method renderShape that draws the shape sh with
          color fore.  The color fore is used to color the part of the
          bounding box of the shape that is occupied by the shape ---
          i.e. the background part of the bounding box is colored with
          color back.
        </p>

<pre xmlns="" xml:space="preserve"><tt><span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">renderShape</span></span><span style="color: #990000">(</span>Shape sh<span style="color: #990000">,</span> Color back<span style="color: #990000">,</span> Color fore<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>

 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
<span style="color: #FF0000">}</span>
</tt></pre>

      <p xmlns=""> </p><table xmlns="" width="100%" class="title"><tr><td><span style="font-weight: bold; font-size: larger"><a name="slide014">Practice (do not hand in): Answers</a></span><span style="font-weight: normal"><a href="hw-10-014.html"> [14/14] </a></span></td></tr></table><p xmlns=""> </p>

<pre xmlns="" xml:space="preserve"><tt>Problem <span style="color: #993399">1</span>

<span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">ComplexShape</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Shape <span style="color: #FF0000">{</span>

    ArrayList shapes <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">ArrayList</span></span><span style="color: #990000">();</span>   <span style="font-style: italic"><span style="color: #9A1900">// a list of shapes</span></span>

    <span style="font-style: italic"><span style="color: #9A1900">/** add a shape to the composite */</span></span>
    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">addShape</span></span><span style="color: #990000">(</span>Shape s<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
        shapes<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">add</span></span><span style="color: #990000">(</span>s<span style="color: #990000">);</span>
    <span style="color: #FF0000">}</span>

    <span style="font-style: italic"><span style="color: #9A1900">/** draw all shapes in the composite */</span></span>
    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">draw</span></span><span style="color: #990000">(</span>Color c<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
       Iterator i <span style="color: #990000">=</span> shapes<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">iterator</span></span><span style="color: #990000">();</span> 
       <span style="font-weight: bold"><span style="color: #0000FF">while</span></span> <span style="color: #990000">(</span>i<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">hasNext</span></span><span style="color: #990000">())</span> <span style="color: #FF0000">{</span>
            <span style="color: #990000">((</span>Shape<span style="color: #990000">)</span> i<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">next</span></span><span style="color: #990000">()).</span><span style="font-weight: bold"><span style="color: #000000">draw</span></span><span style="color: #990000">(</span>c<span style="color: #990000">);</span>
        <span style="color: #FF0000">}</span>
    <span style="color: #FF0000">}</span>

    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> Object <span style="font-weight: bold"><span style="color: #000000">clone</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
        <span style="font-weight: bold"><span style="color: #0000FF">try</span></span> <span style="color: #FF0000">{</span>
            ComplexShape result <span style="color: #990000">=</span> <span style="color: #990000">(</span>ComplexShape<span style="color: #990000">)</span> <span style="font-weight: bold"><span style="color: #0000FF">super</span></span><span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">clone</span></span><span style="color: #990000">();</span>
            <span style="font-style: italic"><span style="color: #9A1900">// make a *deep* clone of the shapes</span></span>
            result<span style="color: #990000">.</span>shapes <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">ArrayList</span></span><span style="color: #990000">();</span>
            Iterator i <span style="color: #990000">=</span> shapes<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">iterator</span></span><span style="color: #990000">();</span> 
            <span style="font-weight: bold"><span style="color: #0000FF">while</span></span> <span style="color: #990000">(</span>i<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">hasNext</span></span><span style="color: #990000">())</span> <span style="color: #FF0000">{</span>
                result<span style="color: #990000">.</span>shapes<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">add</span></span><span style="color: #990000">(((</span>Shape<span style="color: #990000">)</span> i<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">next</span></span><span style="color: #990000">()).</span><span style="font-weight: bold"><span style="color: #000000">clone</span></span><span style="color: #990000">());</span>
            <span style="color: #FF0000">}</span>
            <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> result<span style="color: #990000">;</span>
        <span style="color: #FF0000">}</span> <span style="font-weight: bold"><span style="color: #0000FF">catch</span></span> <span style="color: #990000">(</span>CloneNotSupportedException e<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
            <span style="font-weight: bold"><span style="color: #0000FF">throw</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">InternalError</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"this should not have happened"</span><span style="color: #990000">);</span>
        <span style="color: #FF0000">}</span>
    <span style="color: #FF0000">}</span>

    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> Object <span style="font-weight: bold"><span style="color: #000000">accept</span></span><span style="color: #990000">(</span>ShapeVisitor v<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> v<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">visitComplexShape</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">);</span> <span style="color: #FF0000">}</span>
<span style="color: #FF0000">}</span>


Problem <span style="color: #993399">2</span>

ComplexShape c <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">ComplexShape</span></span><span style="color: #990000">();</span>
c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">addShape</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Circle</span></span><span style="color: #990000">(</span><span style="color: #993399">4</span><span style="color: #990000">));</span>
c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">addShape</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Circle</span></span><span style="color: #990000">(</span><span style="color: #993399">7</span><span style="color: #990000">));</span>
c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">addShape</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Rectangle</span></span><span style="color: #990000">(</span><span style="color: #993399">10</span><span style="color: #990000">,</span> <span style="color: #993399">10</span><span style="color: #990000">));</span>


Problem <span style="color: #993399">3</span>

<span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">Translate</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> Shape <span style="color: #FF0000">{</span>

    Shape sh<span style="color: #990000">;</span>

    <span style="color: #009900">int</span> xtrans<span style="color: #990000">,</span> ytrans<span style="color: #990000">;</span>

    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #000000">Translate</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> x<span style="color: #990000">,</span> <span style="color: #009900">int</span> y<span style="color: #990000">,</span> Shape sh<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
        xtrans <span style="color: #990000">=</span> x<span style="color: #990000">;</span> ytrans <span style="color: #990000">=</span> y<span style="color: #990000">;</span>
        <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">.</span>sh <span style="color: #990000">=</span> sh<span style="color: #990000">;</span> 
    <span style="color: #FF0000">}</span>

    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">draw</span></span><span style="color: #990000">(</span>Color c<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> 
        <span style="font-style: italic"><span style="color: #9A1900">// Hint: Move cursor by amount xtrans, ytrans; draw;</span></span>
        <span style="font-style: italic"><span style="color: #9A1900">// and then restore the original position of cursor</span></span>
        BasicGLib<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">moveCursor</span></span><span style="color: #990000">(</span>xtrans<span style="color: #990000">,</span> ytrans<span style="color: #990000">);</span>
        sh<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">draw</span></span><span style="color: #990000">(</span>c<span style="color: #990000">);</span>
        BasicGLib<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">moveCursor</span></span><span style="color: #990000">(-</span>xtrans<span style="color: #990000">,</span> <span style="color: #990000">-</span>ytrans<span style="color: #990000">);</span>
        <span style="font-style: italic"><span style="color: #9A1900">// 0, 0 will *not* work (not compositional)</span></span>
    <span style="color: #FF0000">}</span>

    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> Object <span style="font-weight: bold"><span style="color: #000000">clone</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
        <span style="font-weight: bold"><span style="color: #0000FF">try</span></span> <span style="color: #FF0000">{</span>
            <span style="font-style: italic"><span style="color: #9A1900">// handles xtrans, ytrans</span></span>
            Translate result <span style="color: #990000">=</span> <span style="color: #990000">(</span>Translate<span style="color: #990000">)</span> <span style="font-weight: bold"><span style="color: #0000FF">super</span></span><span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">clone</span></span><span style="color: #990000">();</span>
            result<span style="color: #990000">.</span>sh <span style="color: #990000">=</span> <span style="color: #990000">(</span>Shape<span style="color: #990000">)</span> sh<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">clone</span></span><span style="color: #990000">();</span>
            <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> result<span style="color: #990000">;</span>
        <span style="color: #FF0000">}</span> <span style="font-weight: bold"><span style="color: #0000FF">catch</span></span> <span style="color: #990000">(</span>CloneNotSupportedException e<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
            <span style="font-weight: bold"><span style="color: #0000FF">throw</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">InternalError</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"this should not have happened"</span><span style="color: #990000">);</span>
        <span style="color: #FF0000">}</span>
    <span style="color: #FF0000">}</span>

    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> Object <span style="font-weight: bold"><span style="color: #000000">accept</span></span><span style="color: #990000">(</span>ShapeVisitor v<span style="color: #990000">)</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> v<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">visitTranslate</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">);</span> <span style="color: #FF0000">}</span>

<span style="color: #FF0000">}</span>


Problem <span style="color: #993399">4</span>

Shape s1 <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Circle</span></span><span style="color: #990000">(</span><span style="color: #993399">4</span><span style="color: #990000">);</span>
Shape s2 <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Translate</span></span><span style="color: #990000">(</span><span style="color: #993399">3</span><span style="color: #990000">,</span> <span style="color: #993399">4</span><span style="color: #990000">,</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Circle</span></span><span style="color: #990000">(</span><span style="color: #993399">5</span><span style="color: #990000">));</span>
Shape s3 <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Translate</span></span><span style="color: #990000">(</span><span style="color: #993399">8</span><span style="color: #990000">,</span> <span style="color: #993399">9</span><span style="color: #990000">,</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Circle</span></span><span style="color: #990000">(</span><span style="color: #993399">3</span><span style="color: #990000">));</span>
Shape s4 <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Translate</span></span><span style="color: #990000">(</span><span style="color: #993399">10</span><span style="color: #990000">,</span> <span style="color: #993399">12</span><span style="color: #990000">,</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Circle</span></span><span style="color: #990000">(</span><span style="color: #993399">5</span><span style="color: #990000">));</span>

ComplexShape inner <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">ComplexShape</span></span><span style="color: #990000">();</span>
inner<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">addShape</span></span><span style="color: #990000">(</span>s3<span style="color: #990000">);</span>
inner<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">addShape</span></span><span style="color: #990000">(</span>s4<span style="color: #990000">);</span>

ComplexShape outer <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">ComplexShape</span></span><span style="color: #990000">();</span>
outer<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">addShape</span></span><span style="color: #990000">(</span>s1<span style="color: #990000">);</span>
outer<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">addShape</span></span><span style="color: #990000">(</span>s2<span style="color: #990000">);</span>
outer<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">addShape</span></span><span style="color: #990000">(</span>inner<span style="color: #990000">);</span>


Problem <span style="color: #993399">5</span>

<span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">PrintVisitor</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> ShapeVisitor <span style="color: #FF0000">{</span>

    <span style="font-style: italic"><span style="color: #9A1900">// This PrintVisitor does not handle indentation!</span></span>
    <span style="font-style: italic"><span style="color: #9A1900">// Indentation is left as an exercise to the reader.</span></span>

    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">final</span></span> String lineSeparator <span style="color: #990000">=</span> System<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getProperty</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"line.separator"</span><span style="color: #990000">);</span>

    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> Object <span style="font-weight: bold"><span style="color: #000000">visitCircle</span></span><span style="color: #990000">(</span>Circle c<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
        StringBuilder buffer <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">StringBuilder</span></span><span style="color: #990000">();</span>
        buffer<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">append</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"Circle("</span><span style="color: #990000">);</span>
        buffer<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">append</span></span><span style="color: #990000">(</span>c<span style="color: #990000">.</span>r<span style="color: #990000">);</span>
        buffer<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">append</span></span><span style="color: #990000">(</span><span style="color: #FF0000">")"</span><span style="color: #990000">);</span>
        <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> buffer<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">toString</span></span><span style="color: #990000">();</span>
    <span style="color: #FF0000">}</span>

    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> Object <span style="font-weight: bold"><span style="color: #000000">visitRectangle</span></span><span style="color: #990000">(</span> Rectangle r<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
        StringBuilder buffer <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">StringBuilder</span></span><span style="color: #990000">();</span>
        buffer<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">append</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"Rectangle("</span><span style="color: #990000">);</span>
        buffer<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">append</span></span><span style="color: #990000">(</span>r<span style="color: #990000">.</span>xl<span style="color: #990000">);</span>
        buffer<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">append</span></span><span style="color: #990000">(</span><span style="color: #FF0000">", "</span><span style="color: #990000">);</span>
        buffer<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">append</span></span><span style="color: #990000">(</span>r<span style="color: #990000">.</span>yl<span style="color: #990000">);</span>
        buffer<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">append</span></span><span style="color: #990000">(</span><span style="color: #FF0000">")"</span><span style="color: #990000">);</span>
        <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> buffer<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">toString</span></span><span style="color: #990000">();</span>
    <span style="color: #FF0000">}</span>

    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> Object <span style="font-weight: bold"><span style="color: #000000">visitComplexShape</span></span><span style="color: #990000">(</span>ComplexShape c<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
        StringBuilder buffer <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">StringBuilder</span></span><span style="color: #990000">();</span>
        buffer<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">append</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"ComplexShape("</span><span style="color: #990000">);</span>
        Iterator i <span style="color: #990000">=</span> c<span style="color: #990000">.</span>shapes<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">iterator</span></span><span style="color: #990000">();</span>
        <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>i<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">hasNext</span></span><span style="color: #990000">())</span> <span style="color: #FF0000">{</span>
            buffer<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">append</span></span><span style="color: #990000">(</span>lineSeparator<span style="color: #990000">);</span>
            buffer<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">append</span></span><span style="color: #990000">(((</span>Shape<span style="color: #990000">)</span> i<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">next</span></span><span style="color: #990000">()).</span><span style="font-weight: bold"><span style="color: #000000">accept</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">));</span>
        <span style="color: #FF0000">}</span>
        <span style="font-weight: bold"><span style="color: #0000FF">while</span></span> <span style="color: #990000">(</span>i<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">hasNext</span></span><span style="color: #990000">())</span> <span style="color: #FF0000">{</span>
            buffer<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">append</span></span><span style="color: #990000">(</span><span style="color: #FF0000">","</span><span style="color: #990000">);</span>
            buffer<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">append</span></span><span style="color: #990000">(</span>lineSeparator<span style="color: #990000">);</span>
            buffer<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">append</span></span><span style="color: #990000">(((</span>Shape<span style="color: #990000">)</span> i<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">next</span></span><span style="color: #990000">()).</span><span style="font-weight: bold"><span style="color: #000000">accept</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">));</span>
        <span style="color: #FF0000">}</span>
        <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(!</span> c<span style="color: #990000">.</span>shapes<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">isEmpty</span></span><span style="color: #990000">())</span> <span style="color: #FF0000">{</span>
            buffer<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">append</span></span><span style="color: #990000">(</span>lineSeparator<span style="color: #990000">);</span>
        <span style="color: #FF0000">}</span>
        buffer<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">append</span></span><span style="color: #990000">(</span><span style="color: #FF0000">")"</span><span style="color: #990000">);</span>
        <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> buffer<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">toString</span></span><span style="color: #990000">();</span>
    <span style="color: #FF0000">}</span>

    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> Object <span style="font-weight: bold"><span style="color: #000000">visitTranslate</span></span><span style="color: #990000">(</span>Translate t<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
        StringBuilder buffer <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">StringBuilder</span></span><span style="color: #990000">();</span>
        buffer<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">append</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"Translate("</span><span style="color: #990000">);</span>
	buffer<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">append</span></span><span style="color: #990000">(</span>t<span style="color: #990000">.</span>xtrans<span style="color: #990000">);</span>
	buffer<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">append</span></span><span style="color: #990000">(</span><span style="color: #FF0000">", "</span><span style="color: #990000">);</span>
	buffer<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">append</span></span><span style="color: #990000">(</span>t<span style="color: #990000">.</span>ytrans<span style="color: #990000">);</span>
	buffer<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">append</span></span><span style="color: #990000">(</span><span style="color: #FF0000">", "</span><span style="color: #990000">);</span>
        buffer<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">append</span></span><span style="color: #990000">(</span>lineSeparator<span style="color: #990000">);</span>
        buffer<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">append</span></span><span style="color: #990000">(</span>t<span style="color: #990000">.</span>sh<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">accept</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">));</span>
        buffer<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">append</span></span><span style="color: #990000">(</span>lineSeparator<span style="color: #990000">);</span>
        buffer<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">append</span></span><span style="color: #990000">(</span><span style="color: #FF0000">")"</span><span style="color: #990000">);</span>
        <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> buffer<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">toString</span></span><span style="color: #990000">();</span>
    <span style="color: #FF0000">}</span>
<span style="color: #FF0000">}</span>


Problem <span style="color: #993399">6</span>

<span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #009900">BBoxVisitor</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> ShapeVisitor <span style="color: #FF0000">{</span>

    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> Object <span style="font-weight: bold"><span style="color: #000000">visitCircle</span></span><span style="color: #990000">(</span>Circle c<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
        <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">BBox</span></span><span style="color: #990000">(-</span>c<span style="color: #990000">.</span>r<span style="color: #990000">,</span> <span style="color: #990000">+</span>c<span style="color: #990000">.</span>r<span style="color: #990000">,</span> <span style="color: #990000">-</span>c<span style="color: #990000">.</span>r<span style="color: #990000">,</span> <span style="color: #990000">+</span>c<span style="color: #990000">.</span>r<span style="color: #990000">);</span>
    <span style="color: #FF0000">}</span>

    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> Object <span style="font-weight: bold"><span style="color: #000000">visitRectangle</span></span><span style="color: #990000">(</span> Rectangle r<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
        <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">BBox</span></span><span style="color: #990000">(</span><span style="color: #993399">0</span><span style="color: #990000">,</span> r<span style="color: #990000">.</span>xl<span style="color: #990000">,</span> <span style="color: #993399">0</span><span style="color: #990000">,</span> r<span style="color: #990000">.</span>yl<span style="color: #990000">);</span>
    <span style="color: #FF0000">}</span>

    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> Object <span style="font-weight: bold"><span style="color: #000000">visitComplexShape</span></span><span style="color: #990000">(</span>ComplexShape c<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
        <span style="color: #009900">int</span> xl <span style="color: #990000">=</span> Integer<span style="color: #990000">.</span>MAX_VALUE<span style="color: #990000">;</span>
        <span style="color: #009900">int</span> xr <span style="color: #990000">=</span> Integer<span style="color: #990000">.</span>MIN_VALUE<span style="color: #990000">;</span>
        <span style="color: #009900">int</span> yd <span style="color: #990000">=</span> Integer<span style="color: #990000">.</span>MAX_VALUE<span style="color: #990000">;</span>
        <span style="color: #009900">int</span> yu <span style="color: #990000">=</span> Integer<span style="color: #990000">.</span>MIN_VALUE<span style="color: #990000">;</span>
        Iterator i <span style="color: #990000">=</span> c<span style="color: #990000">.</span>shapes<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">iterator</span></span><span style="color: #990000">();</span>
        <span style="font-weight: bold"><span style="color: #0000FF">while</span></span> <span style="color: #990000">(</span>i<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">hasNext</span></span><span style="color: #990000">())</span> <span style="color: #FF0000">{</span>
            BBox bbox <span style="color: #990000">=</span> <span style="color: #990000">(</span>BBox<span style="color: #990000">)</span> <span style="color: #990000">((</span>Shape<span style="color: #990000">)</span> i<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">next</span></span><span style="color: #990000">()).</span><span style="font-weight: bold"><span style="color: #000000">accept</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">);</span>
            xl <span style="color: #990000">=</span> Math<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">min</span></span><span style="color: #990000">(</span>xl<span style="color: #990000">,</span> bbox<span style="color: #990000">.</span>xleft<span style="color: #990000">);</span>
            xr <span style="color: #990000">=</span> Math<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">max</span></span><span style="color: #990000">(</span>xr<span style="color: #990000">,</span> bbox<span style="color: #990000">.</span>xright<span style="color: #990000">);</span>
            yd <span style="color: #990000">=</span> Math<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">min</span></span><span style="color: #990000">(</span>yd<span style="color: #990000">,</span> bbox<span style="color: #990000">.</span>ydown<span style="color: #990000">);</span>
            yu <span style="color: #990000">=</span> Math<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">max</span></span><span style="color: #990000">(</span>yu<span style="color: #990000">,</span> bbox<span style="color: #990000">.</span>yup<span style="color: #990000">);</span>
        <span style="color: #FF0000">}</span>
        <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">BBox</span></span><span style="color: #990000">(</span>xl<span style="color: #990000">,</span> xr<span style="color: #990000">,</span> yd<span style="color: #990000">,</span> yu<span style="color: #990000">);</span>
    <span style="color: #FF0000">}</span>

    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> Object <span style="font-weight: bold"><span style="color: #000000">visitTranslate</span></span><span style="color: #990000">(</span>Translate t<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
        BBox bbox <span style="color: #990000">=</span> <span style="color: #990000">(</span>BBox<span style="color: #990000">)</span> t<span style="color: #990000">.</span>sh<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">accept</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">);</span>
        <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">BBox</span></span><span style="color: #990000">(</span>
            bbox<span style="color: #990000">.</span>xleft <span style="color: #990000">+</span> t<span style="color: #990000">.</span>xtrans<span style="color: #990000">,</span> 
            bbox<span style="color: #990000">.</span>xright <span style="color: #990000">+</span> t<span style="color: #990000">.</span>xtrans<span style="color: #990000">,</span> 
            bbox<span style="color: #990000">.</span>xdown <span style="color: #990000">+</span> t<span style="color: #990000">.</span>ytrans<span style="color: #990000">,</span> 
            bbox<span style="color: #990000">.</span>xup <span style="color: #990000">+</span> t<span style="color: #990000">.</span>ytrans
        <span style="color: #990000">);</span>
    <span style="color: #FF0000">}</span>
<span style="color: #FF0000">}</span>


Problem <span style="color: #993399">7</span>

<span style="font-style: italic"><span style="color: #9A1900">// version one</span></span>
<span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">renderShape</span></span><span style="color: #990000">(</span>Shape sh<span style="color: #990000">,</span> Color back<span style="color: #990000">,</span> Color fore<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
    BBox bbox <span style="color: #990000">=</span> sh<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">accept</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">BBoxVisitor</span></span><span style="color: #990000">());</span>
    BasicGLib<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">moveCursor</span></span><span style="color: #990000">(</span>bbox<span style="color: #990000">.</span>xleft<span style="color: #990000">,</span> bbox<span style="color: #990000">.</span>ydown<span style="color: #990000">);</span>
    BasicGLib<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">drawRectangle</span></span><span style="color: #990000">(</span>
        back<span style="color: #990000">,</span> bbox<span style="color: #990000">.</span>xright <span style="color: #990000">-</span> bbox<span style="color: #990000">.</span>xleft<span style="color: #990000">,</span> bbox<span style="color: #990000">.</span>yup <span style="color: #990000">-</span> bbox<span style="color: #990000">.</span>ydown<span style="color: #990000">);</span>
    BasicGLib<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">moveCursor</span></span><span style="color: #990000">(-</span>bbox<span style="color: #990000">.</span>xleft<span style="color: #990000">,</span> <span style="color: #990000">-</span>bbox<span style="color: #990000">.</span>ydown<span style="color: #990000">);</span>
    sh<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">draw</span></span><span style="color: #990000">(</span>fore<span style="color: #990000">);</span>
<span style="color: #FF0000">}</span>

<span style="font-style: italic"><span style="color: #9A1900">// version two</span></span>
<span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">renderShape</span></span><span style="color: #990000">(</span>Shape sh<span style="color: #990000">,</span> Color back<span style="color: #990000">,</span> Color fore<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
    BBox bbox <span style="color: #990000">=</span> sh<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">accept</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">BBoxVisitor</span></span><span style="color: #990000">());</span>
    <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Translate</span></span><span style="color: #990000">(</span>bbox<span style="color: #990000">.</span>xleft<span style="color: #990000">,</span> bbox<span style="color: #990000">.</span>ydown<span style="color: #990000">,</span> 
        <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Rectangle</span></span><span style="color: #990000">(</span>bbox<span style="color: #990000">.</span>xright <span style="color: #990000">-</span> bbox<span style="color: #990000">.</span>xleft<span style="color: #990000">,</span> bbox<span style="color: #990000">.</span>yup <span style="color: #990000">-</span> bbox<span style="color: #990000">.</span>ydown<span style="color: #990000">))</span>
           <span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">draw</span></span><span style="color: #990000">(</span>back<span style="color: #990000">);</span>
    sh<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">draw</span></span><span style="color: #990000">(</span>fore<span style="color: #990000">);</span>
<span style="color: #FF0000">}</span>
</tt></pre>

      <hr xmlns=""/><p xmlns="" class="flush">
      Revised: 2007/11/02 14:29</p><p xmlns="" class="flush">
    This page is
    <a href="http://validator.w3.org/check/referer">valid</a>
    xhtml 1.0. 
  </p></body></html>
